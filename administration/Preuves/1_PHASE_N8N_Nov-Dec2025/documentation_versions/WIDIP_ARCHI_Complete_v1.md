# ğŸ—ï¸ Architecture ComplÃ¨te WIDIP - SystÃ¨me d'Automatisation IA

**Version** : 1.0
**Auteur** : Maxime RIPOUTEAU  
**Date** : 27 Novembre 2025  
**Licence** : Apache 2.0  

---

## ğŸ“‹ Table des MatiÃ¨res

1. [Vue d'Ensemble](#1-vue-densemble)
2. [Architecture Globale](#2-architecture-globale)
3. [Hub MCP Global](#3-hub-mcp-global)
4. [Workflow 1 : WIBOT (Assistant IA Interne)](#4-workflow-1--wibot-assistant-ia-interne)
5. [Workflow 2 : Proactif Observium (Monitoring RÃ©seau)](#5-workflow-2--proactif-observium-monitoring-rÃ©seau)
6. [Workflow 3 : Assistant GLPI (Support Automatique)](#6-workflow-3--assistant-glpi-support-automatique)
7. [Matrice des DÃ©pendances MCP](#7-matrice-des-dÃ©pendances-mcp)
8. [Flux de DonnÃ©es](#8-flux-de-donnÃ©es)
9. [MÃ©triques & Performances](#9-mÃ©triques--performances)

---

## 1. Vue d'Ensemble

### ğŸ¯ Contexte MÃ©tier

**WIDIP** est un hÃ©bergeur de donnÃ©es pour le secteur mÃ©dico-social (EHPAD, cliniques, associations) avec :
- **800+ Ã©tablissements clients**
- **~20 000 tickets de support / an**
- Infrastructure critique 24/7
- Besoin d'automatisation intelligente

### ğŸ§  Philosophie d'Architecture

L'architecture WIDIP suit un pattern **Hub-and-Spoke avec MCP (Model Context Protocol)** :

- **Hub Central** : Serveur MCP Global qui route les requÃªtes
- **Spokes** : 3 workflows principaux (WIBOT, Proactif, Assistant GLPI)
- **Services MCP** : Abstraction unifiÃ©e des APIs (GLPI, AD, Observium, etc.)
- **Infrastructure locale** : Ollama + PostgreSQL + n8n on-premise

### ğŸ”‘ Principes Fondamentaux

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     PRINCIPES WIDIP                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. Data Sovereignty    â†’ Tout en local (RGPD)             â”‚
â”‚  2. Agent Autonomy      â†’ IA dÃ©cide et agit                â”‚
â”‚  3. MCP Abstraction     â†’ APIs unifiÃ©es                    â”‚
â”‚  4. Fail-Safe Design    â†’ Graceful degradation             â”‚
â”‚  5. Observability       â†’ MÃ©triques Ã  chaque Ã©tape         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. Architecture Globale

### ğŸ›ï¸ Vue d'Ensemble du SystÃ¨me

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         COUCHE PRÃ‰SENTATION                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   Chat Web UI   â”‚  â”‚  Webhook HTTP   â”‚  â”‚  Schedule Cron  â”‚         â”‚
â”‚  â”‚   (WIBOT)       â”‚  â”‚  (Observium)    â”‚  â”‚  (3 min poll)   â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚           â”‚                    â”‚                     â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                    â”‚                     â”‚
            â–¼                    â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      COUCHE ORCHESTRATION (n8n)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   WIBOT_v1      â”‚  â”‚  Proactif_v6    â”‚  â”‚  Assist_v2      â”‚         â”‚
â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚         â”‚
â”‚  â”‚ â€¢ RAG Chatbot   â”‚  â”‚ â€¢ Agent         â”‚  â”‚ â€¢ Agent         â”‚         â”‚
â”‚  â”‚ â€¢ Auth Matrix   â”‚  â”‚   Sentinel      â”‚  â”‚   Support       â”‚         â”‚
â”‚  â”‚ â€¢ Vector Store  â”‚  â”‚ â€¢ Agent         â”‚  â”‚ â€¢ Auto-Action   â”‚         â”‚
â”‚  â”‚                 â”‚  â”‚   Notificateur  â”‚  â”‚ â€¢ Polling       â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚           â”‚                    â”‚                     â”‚                  â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                â”‚                                        â”‚
â”‚                         MCP Client Tools                                â”‚
â”‚                                â”‚                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚ SSE/HTTP
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         HUB MCP GLOBAL                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ GLPI â”‚  â”‚ Obs. â”‚  â”‚Phibeeâ”‚  â”‚ SMTP â”‚  â”‚  AD  â”‚  â”‚MyScrtâ”‚           â”‚
â”‚  â”‚Trigger  â”‚Trigger  â”‚Trigger  â”‚Trigger  â”‚Trigger  â”‚Triggerâ”‚           â”‚
â”‚  â””â”€â”€â”€â”¬â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”˜           â”‚
â”‚      â”‚         â”‚         â”‚         â”‚         â”‚         â”‚               â”‚
â”‚  â”Œâ”€â”€â”€â–¼â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”           â”‚
â”‚  â”‚Call  â”‚  â”‚Call  â”‚  â”‚Call  â”‚  â”‚Call  â”‚  â”‚Call  â”‚  â”‚Call  â”‚           â”‚
â”‚  â”‚n8n   â”‚  â”‚n8n   â”‚  â”‚n8n   â”‚  â”‚n8n   â”‚  â”‚n8n   â”‚  â”‚n8n   â”‚           â”‚
â”‚  â”‚Wrkflwâ”‚  â”‚Wrkflwâ”‚  â”‚Wrkflwâ”‚  â”‚Wrkflwâ”‚  â”‚Wrkflwâ”‚  â”‚Wrkflwâ”‚           â”‚
â”‚  â””â”€â”€â”€â”¬â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”˜           â”‚
â”‚      â”‚         â”‚         â”‚         â”‚         â”‚         â”‚               â”‚
â””â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚         â”‚         â”‚         â”‚         â”‚         â”‚
       â–¼         â–¼         â–¼         â–¼         â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    COUCHE IMPLÃ‰MENTATION MCP                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚ MCP_GLPI_v6  â”‚  â”‚ MCP_Observiumâ”‚  â”‚ MCP_Phibee   â”‚                  â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚                  â”‚
â”‚  â”‚ â€¢ Switch 8   â”‚  â”‚ â€¢ Device     â”‚  â”‚ â€¢ Diagnose   â”‚                  â”‚
â”‚  â”‚   routes     â”‚  â”‚   Status     â”‚  â”‚   Outage     â”‚                  â”‚
â”‚  â”‚ â€¢ HTTP Nodes â”‚  â”‚ â€¢ Metrics    â”‚  â”‚ â€¢ Link Test  â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚         â”‚                 â”‚                 â”‚                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚  MCP_SMTP    â”‚  â”‚   MCP_AD     â”‚  â”‚ MCP_MySecret â”‚                  â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚                  â”‚
â”‚  â”‚ â€¢ Send Email â”‚  â”‚ â€¢ Check User â”‚  â”‚ â€¢ Create     â”‚                  â”‚
â”‚  â”‚ â€¢ Templates  â”‚  â”‚ â€¢ Reset PWD  â”‚  â”‚   Secret     â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚         â”‚                 â”‚                 â”‚                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                 â”‚                 â”‚
          â–¼                 â–¼                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        COUCHE SERVICES EXTERNES                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚  GLPI API    â”‚  â”‚  Observium   â”‚  â”‚  Phibee API  â”‚                  â”‚
â”‚  â”‚  REST        â”‚  â”‚  Monitoring  â”‚  â”‚  FAI         â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚  SMTP Server â”‚  â”‚ Active Dir.  â”‚  â”‚  MySecret    â”‚                  â”‚
â”‚  â”‚  (Email)     â”‚  â”‚  LDAP        â”‚  â”‚  API         â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      COUCHE INTELLIGENCE (Local)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚                    Ollama (Local LLMs)                    â”‚          â”‚
â”‚  â”‚  â€¢ Qwen 2.5 14B (Support GLPI)                            â”‚          â”‚
â”‚  â”‚  â€¢ Mistral 7B (Diagnostic Observium)                      â”‚          â”‚
â”‚  â”‚  â€¢ Claude Sonnet 4 via Anthropic API (WIBOT)             â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚              Base de DonnÃ©es PostgreSQL                   â”‚          â”‚
â”‚  â”‚  â€¢ incident_logs (Proactif)                               â”‚          â”‚
â”‚  â”‚  â€¢ widip_agent_logs (Assistant GLPI)                      â”‚          â”‚
â”‚  â”‚  â€¢ Vector Store (OpenAI Embeddings)                       â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“Š Statistiques d'Architecture

| Composant | QuantitÃ© | Type | DÃ©ploiement |
|-----------|----------|------|-------------|
| Workflows Principaux | 3 | n8n | Local |
| Hub MCP Global | 1 | n8n | Local |
| Sub-workflows MCP | 6+ | n8n | Local |
| Agents IA | 4 | LangChain | Local |
| MCP Servers | 6 | SSE/HTTP | Local |
| APIs Externes | 6+ | REST/LDAP | Divers |
| LLMs | 3 | Ollama/API | Local + Cloud |
| Bases de DonnÃ©es | 1 | PostgreSQL | Local |

---

## 3. Hub MCP Global

### ğŸ›ï¸ Architecture du Hub

Le **WIDIP_MCP_SERVEUR_GLOBAL_v6** est le point d'entrÃ©e centralisÃ© pour toutes les communications MCP.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               WIDIP_MCP_SERVEUR_GLOBAL_v6                      â”‚
â”‚                    (Hub de Routage)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  MCP TRIGGERS  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚  [1] MCP Server Observium                              â”‚   â”‚
â”‚  â”‚      â€¢ Path: /mcp-observium                            â”‚   â”‚
â”‚  â”‚      â€¢ Auth: Header Auth                               â”‚   â”‚
â”‚  â”‚      â€¢ Webhook ID: mcp-observium-endpoint              â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚  [2] MCP Server Phibee                                 â”‚   â”‚
â”‚  â”‚      â€¢ Path: /mcp-phibee                               â”‚   â”‚
â”‚  â”‚      â€¢ Auth: Header Auth                               â”‚   â”‚
â”‚  â”‚      â€¢ Webhook ID: mcp-phibee-endpoint                 â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚  [3] MCP Server GLPI                                   â”‚   â”‚
â”‚  â”‚      â€¢ Path: /mcp-glpi-server                          â”‚   â”‚
â”‚  â”‚      â€¢ Auth: Header Auth                               â”‚   â”‚
â”‚  â”‚      â€¢ Webhook ID: mcp-glpi-server                     â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚  [4] MCP Server SMTP                                   â”‚   â”‚
â”‚  â”‚      â€¢ Path: /mcp-email                                â”‚   â”‚
â”‚  â”‚      â€¢ Auth: Header Auth                               â”‚   â”‚
â”‚  â”‚      â€¢ Webhook ID: mcp-email-endpoint                  â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚  [5] MCP Server AD                                     â”‚   â”‚
â”‚  â”‚      â€¢ Path: /mcp-ad                                   â”‚   â”‚
â”‚  â”‚      â€¢ Auth: Header Auth                               â”‚   â”‚
â”‚  â”‚      â€¢ Webhook ID: mcp-ad-endpoint                     â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚  [6] MCP Server MySecret                               â”‚   â”‚
â”‚  â”‚      â€¢ Path: /mcp-mysecret                             â”‚   â”‚
â”‚  â”‚      â€¢ Auth: Header Auth                               â”‚   â”‚
â”‚  â”‚      â€¢ Webhook ID: mcp-mysecret-endpoint               â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  WORKFLOW CALL NODES (Tools)  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚                                                       â”‚     â”‚
â”‚  â”‚  [1] Call MCP Observium                              â”‚     â”‚
â”‚  â”‚      â†’ Workflow ID: [A remplacer]                    â”‚     â”‚
â”‚  â”‚      â†’ Tools: get_device_status, get_device_metrics  â”‚     â”‚
â”‚  â”‚                                                       â”‚     â”‚
â”‚  â”‚  [2] Call MCP Phibee                                 â”‚     â”‚
â”‚  â”‚      â†’ Workflow ID: fo2Ecbvioy4IKrh6                 â”‚     â”‚
â”‚  â”‚      â†’ Tools: diagnose_outage, test_link_status      â”‚     â”‚
â”‚  â”‚                                                       â”‚     â”‚
â”‚  â”‚  [3] Call MCP GLPI                                   â”‚     â”‚
â”‚  â”‚      â†’ Workflow ID: aPU67DvaEk7Y5mFl                 â”‚     â”‚
â”‚  â”‚      â†’ Tools: 8 operations (voir dÃ©tails)            â”‚     â”‚
â”‚  â”‚                                                       â”‚     â”‚
â”‚  â”‚  [4] Call MCP SMTP                                   â”‚     â”‚
â”‚  â”‚      â†’ Workflow ID: Lz6LZF9nIaRtNkMm                 â”‚     â”‚
â”‚  â”‚      â†’ Tools: send_email, send_template_email        â”‚     â”‚
â”‚  â”‚                                                       â”‚     â”‚
â”‚  â”‚  [5] Call MCP AD                                     â”‚     â”‚
â”‚  â”‚      â†’ Workflow ID: 4EzoFmFJvKGRbICU                 â”‚     â”‚
â”‚  â”‚      â†’ Tools: check_user, reset_password, unlock     â”‚     â”‚
â”‚  â”‚                                                       â”‚     â”‚
â”‚  â”‚  [6] Call MCP MySecret                               â”‚     â”‚
â”‚  â”‚      â†’ Workflow ID: [A remplacer]                    â”‚     â”‚
â”‚  â”‚      â†’ Tools: create_secret                          â”‚     â”‚
â”‚  â”‚                                                       â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                              â”‚
                              â”‚ Connexions
                              â–¼

      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚       Tous les MCP Trigger Nodes             â”‚
      â”‚       connectent leurs ai_tool outputs       â”‚
      â”‚       aux Call Workflow Tool Nodes           â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### âš™ï¸ Fonctionnement du Hub

**RÃ´le** : Le hub agit comme un **API Gateway interne** pour les protocoles MCP.

**Flow de donnÃ©es** :

```
Client MCP (dans workflow principal)
          â”‚
          â”‚ SSE Request
          â–¼
    MCP Server Trigger
          â”‚
          â”‚ ai_tool connection
          â–¼
   Call n8n Workflow Tool
          â”‚
          â”‚ Execute Sub-Workflow
          â–¼
    MCP Implementation
    (ex: WIDIP_MCP_GLPI_v6)
          â”‚
          â”‚ HTTP Request
          â–¼
      API Externe
    (ex: GLPI REST API)
          â”‚
          â”‚ Response
          â–¼
    Format & Return
          â”‚
          â”‚ JSON Response
          â–¼
  Client MCP (Agent IA)
```

### ğŸ” SÃ©curitÃ© du Hub

- **Authentification** : Header Auth sur tous les MCP Triggers
- **Isolation** : Chaque MCP Server a son propre endpoint
- **Logging** : Tous les appels sont tracÃ©s
- **Rate Limiting** : Configurable par endpoint

### ğŸ’¡ Avantages de cette Architecture

1. **Centralisation** : Un seul point de configuration pour tous les MCP
2. **RÃ©utilisabilitÃ©** : Les 3 workflows principaux partagent les mÃªmes services
3. **MaintenabilitÃ©** : Modifier une API = modifier un seul sub-workflow
4. **ScalabilitÃ©** : Ajouter un nouveau service = ajouter un trigger + call node
5. **ObservabilitÃ©** : TraÃ§age centralisÃ© de toutes les communications MCP

---

## 4. Workflow 1 : WIBOT (Assistant IA Interne)

### ğŸ“– Vue d'Ensemble

**WIBOT** (WIDIP Bot) est un assistant IA conversationnel pour les employÃ©s WIDIP avec :
- ContrÃ´le d'accÃ¨s basÃ© sur une matrice CSV
- RAG (Retrieval Augmented Generation) sur base documentaire
- AccÃ¨s sÃ©curisÃ© aux outils GLPI selon permissions

### ğŸ—ï¸ Architecture WIBOT

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     WIBOT_v1 Architecture                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              PHASE 0: Point d'EntrÃ©e                    â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  [Chat Trigger]                                         â”‚    â”‚
â”‚  â”‚      â€¢ Public: true                                     â”‚    â”‚
â”‚  â”‚      â€¢ Webhook: widip-secure-chat                       â”‚    â”‚
â”‚  â”‚      â€¢ Initial Msg: "Authentifiez-vous..."             â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                             â”‚                                    â”‚
â”‚                             â–¼                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚         PHASE 1: Authentification & Autorisation        â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  [Extract User Context]                                 â”‚    â”‚
â”‚  â”‚      â€¢ user_id = sessionId                              â”‚    â”‚
â”‚  â”‚      â€¢ original_query = chatInput                       â”‚    â”‚
â”‚  â”‚      â€¢ timestamp                                        â”‚    â”‚
â”‚  â”‚            â”‚                                             â”‚    â”‚
â”‚  â”‚            â–¼                                             â”‚    â”‚
â”‚  â”‚  [Read Access Matrix]  â—„â”€â”€â”€ CSV File                    â”‚    â”‚
â”‚  â”‚      â€¢ acces_glpi                                       â”‚    â”‚
â”‚  â”‚      â€¢ acces_base_docs                                  â”‚    â”‚
â”‚  â”‚      â€¢ acces_contrats                                   â”‚    â”‚
â”‚  â”‚      â€¢ acces_confidential                               â”‚    â”‚
â”‚  â”‚      â€¢ clients_autorises                                â”‚    â”‚
â”‚  â”‚      â€¢ categories_tickets_autorisees                    â”‚    â”‚
â”‚  â”‚            â”‚                                             â”‚    â”‚
â”‚  â”‚            â–¼                                             â”‚    â”‚
â”‚  â”‚  [Merge User + Matrix]                                  â”‚    â”‚
â”‚  â”‚            â”‚                                             â”‚    â”‚
â”‚  â”‚            â–¼                                             â”‚    â”‚
â”‚  â”‚  [Check Authorization]  â—„â”€â”€â”€ Code JS                    â”‚    â”‚
â”‚  â”‚      â€¢ Parse boolean permissions                        â”‚    â”‚
â”‚  â”‚      â€¢ Build auth context                               â”‚    â”‚
â”‚  â”‚      â€¢ Validate restrictions                            â”‚    â”‚
â”‚  â”‚            â”‚                                             â”‚    â”‚
â”‚  â”‚            â–¼                                             â”‚    â”‚
â”‚  â”‚  [IF Authorized?]                                       â”‚    â”‚
â”‚  â”‚       â”‚          â”‚                                       â”‚    â”‚
â”‚  â”‚      YES        NO                                       â”‚    â”‚
â”‚  â”‚       â”‚          â”‚                                       â”‚    â”‚
â”‚  â”‚       â”‚          â””â”€â”€â–º[Unauthorized Response]            â”‚    â”‚
â”‚  â”‚       â”‚                "ğŸš« AccÃ¨s refusÃ©"                â”‚    â”‚
â”‚  â”‚       â”‚                                                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚          â”‚                                                       â”‚
â”‚          â–¼                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚      PHASE 2: Construction du Prompt Dynamique          â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  [Format Dynamic System Prompt]  â—„â”€â”€â”€ Code JS           â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  GÃ©nÃ¨re un prompt systÃ¨me personnalisÃ© avec:            â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  â€¢ âœ… Permissions accordÃ©es (GLPI, Docs, Contrats)     â”‚    â”‚
â”‚  â”‚  â€¢ âŒ Permissions refusÃ©es                              â”‚    â”‚
â”‚  â”‚  â€¢ ğŸ”’ Restrictions clients (liste ou *)                â”‚    â”‚
â”‚  â”‚  â€¢ ğŸ¯ RÃ¨gles de sÃ©curitÃ© absolues                      â”‚    â”‚
â”‚  â”‚  â€¢ ğŸ“š CapacitÃ©s disponibles (selon perms)              â”‚    â”‚
â”‚  â”‚  â€¢ ğŸ¨ Format de rÃ©ponse attendu                        â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  Exemple de prompt gÃ©nÃ©rÃ©:                              â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚    â”‚
â”‚  â”‚  â”‚ Tu es l'assistant WIDIP                   â”‚         â”‚    â”‚
â”‚  â”‚  â”‚ Utilisateur: john.doe                     â”‚         â”‚    â”‚
â”‚  â”‚  â”‚ RÃ´le: Technicien                          â”‚         â”‚    â”‚
â”‚  â”‚  â”‚                                            â”‚         â”‚    â”‚
â”‚  â”‚  â”‚ âœ… AccÃ¨s GLPI: AUTORISÃ‰                   â”‚         â”‚    â”‚
â”‚  â”‚  â”‚ âœ… AccÃ¨s Base Docs: AUTORISÃ‰              â”‚         â”‚    â”‚
â”‚  â”‚  â”‚ âŒ AccÃ¨s Contrats: REFUSÃ‰                 â”‚         â”‚    â”‚
â”‚  â”‚  â”‚                                            â”‚         â”‚    â”‚
â”‚  â”‚  â”‚ Restrictions clients:                     â”‚         â”‚    â”‚
â”‚  â”‚  â”‚ - EHPAD Les Roses                         â”‚         â”‚    â”‚
â”‚  â”‚  â”‚ - Clinique Saint-Jean                     â”‚         â”‚    â”‚
â”‚  â”‚  â”‚                                            â”‚         â”‚    â”‚
â”‚  â”‚  â”‚ ğŸš« Tu DOIS refuser toute requÃªte sur     â”‚         â”‚    â”‚
â”‚  â”‚  â”‚    des clients non listÃ©s                 â”‚         â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                             â”‚                                    â”‚
â”‚                             â–¼                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚            PHASE 3: Traitement IA                       â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  [Knowledge Base Chatbot]  â—„â”€â”€â”€ LangChain Agent         â”‚    â”‚
â”‚  â”‚      â€¢ Type: Agent                                      â”‚    â”‚
â”‚  â”‚      â€¢ System Message: Dynamic (from Phase 2)           â”‚    â”‚
â”‚  â”‚      â€¢ Max Iterations: 8                                â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚    â”‚
â”‚  â”‚      â”‚         COMPOSANTS AGENT             â”‚           â”‚    â”‚
â”‚  â”‚      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚    â”‚
â”‚  â”‚      â”‚                                      â”‚           â”‚    â”‚
â”‚  â”‚      â”‚  ğŸ¤– LLM Model                        â”‚           â”‚    â”‚
â”‚  â”‚      â”‚     [Anthropic Chat Model]          â”‚           â”‚    â”‚
â”‚  â”‚      â”‚     â€¢ Claude Sonnet 4               â”‚           â”‚    â”‚
â”‚  â”‚      â”‚     â€¢ Temperature: 0.3              â”‚           â”‚    â”‚
â”‚  â”‚      â”‚     â€¢ Max Tokens: 4096              â”‚           â”‚    â”‚
â”‚  â”‚      â”‚                                      â”‚           â”‚    â”‚
â”‚  â”‚      â”‚  ğŸ’¾ Memory                           â”‚           â”‚    â”‚
â”‚  â”‚      â”‚     [Chat Memory Buffer Window]     â”‚           â”‚    â”‚
â”‚  â”‚      â”‚     â€¢ Context: Conversation history â”‚           â”‚    â”‚
â”‚  â”‚      â”‚                                      â”‚           â”‚    â”‚
â”‚  â”‚      â”‚  ğŸ› ï¸ TOOLS (AI Tools)                â”‚           â”‚    â”‚
â”‚  â”‚      â”‚                                      â”‚           â”‚    â”‚
â”‚  â”‚      â”‚  [1] Vector Store Retriever         â”‚           â”‚    â”‚
â”‚  â”‚      â”‚      â€¢ Mode: retrieve-as-tool       â”‚           â”‚    â”‚
â”‚  â”‚      â”‚      â€¢ Name: knowledge_base_search  â”‚           â”‚    â”‚
â”‚  â”‚      â”‚      â€¢ TopK: 7 documents            â”‚           â”‚    â”‚
â”‚  â”‚      â”‚      â€¢ Memory: widip_knowledge_base â”‚           â”‚    â”‚
â”‚  â”‚      â”‚      â€¢ Embeddings: OpenAI           â”‚           â”‚    â”‚
â”‚  â”‚      â”‚                                      â”‚           â”‚    â”‚
â”‚  â”‚      â”‚      Description:                   â”‚           â”‚    â”‚
â”‚  â”‚      â”‚      "Recherche dans la base de    â”‚           â”‚    â”‚
â”‚  â”‚      â”‚       connaissances WIDIP (contrats,â”‚           â”‚    â”‚
â”‚  â”‚      â”‚       procÃ©dures, docs rÃ©seau).    â”‚           â”‚    â”‚
â”‚  â”‚      â”‚       Pour les tickets, utilise    â”‚           â”‚    â”‚
â”‚  â”‚      â”‚       l'outil GLPI."               â”‚           â”‚    â”‚
â”‚  â”‚      â”‚                                      â”‚           â”‚    â”‚
â”‚  â”‚      â”‚  [2] MCP Client - GLPI              â”‚           â”‚    â”‚
â”‚  â”‚      â”‚      â€¢ Endpoint: /mcp-glpi-server/sseâ”‚          â”‚    â”‚
â”‚  â”‚      â”‚      â€¢ Operations disponibles:      â”‚           â”‚    â”‚
â”‚  â”‚      â”‚        - search_client              â”‚           â”‚    â”‚
â”‚  â”‚      â”‚        - get_ticket_status          â”‚           â”‚    â”‚
â”‚  â”‚      â”‚        - search_new_tickets         â”‚           â”‚    â”‚
â”‚  â”‚      â”‚        - get_ticket_details         â”‚           â”‚    â”‚
â”‚  â”‚      â”‚        (selon permissions user)     â”‚           â”‚    â”‚
â”‚  â”‚      â”‚                                      â”‚           â”‚    â”‚
â”‚  â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚         PHASE 4: Gestion Documentaire (Parallel)        â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  [Document Upload Form]                                 â”‚    â”‚
â”‚  â”‚      â€¢ Webhook: widip-doc-upload                        â”‚    â”‚
â”‚  â”‚      â€¢ Accept: .pdf, .csv, .json, .txt, .docx           â”‚    â”‚
â”‚  â”‚      â€¢ Categories:                                      â”‚    â”‚
â”‚  â”‚        - Contrat                                        â”‚    â”‚
â”‚  â”‚        - ProcÃ©dure                                      â”‚    â”‚
â”‚  â”‚        - Guide technique                                â”‚    â”‚
â”‚  â”‚        - Documentation rÃ©seau                           â”‚    â”‚
â”‚  â”‚            â”‚                                             â”‚    â”‚
â”‚  â”‚            â–¼                                             â”‚    â”‚
â”‚  â”‚  [Add Document Metadata]                                â”‚    â”‚
â”‚  â”‚      â€¢ filename                                         â”‚    â”‚
â”‚  â”‚      â€¢ uploadDate                                       â”‚    â”‚
â”‚  â”‚      â€¢ fileType                                         â”‚    â”‚
â”‚  â”‚      â€¢ documentCategory                                 â”‚    â”‚
â”‚  â”‚            â”‚                                             â”‚    â”‚
â”‚  â”‚            â–¼                                             â”‚    â”‚
â”‚  â”‚  [Default Binary Data Loader]                           â”‚    â”‚
â”‚  â”‚      â€¢ Parse document content                           â”‚    â”‚
â”‚  â”‚            â”‚                                             â”‚    â”‚
â”‚  â”‚            â–¼                                             â”‚    â”‚
â”‚  â”‚  [Recursive Character Text Splitter]                    â”‚    â”‚
â”‚  â”‚      â€¢ Chunk Size: 1000                                 â”‚    â”‚
â”‚  â”‚      â€¢ Chunk Overlap: 200                               â”‚    â”‚
â”‚  â”‚            â”‚                                             â”‚    â”‚
â”‚  â”‚            â–¼                                             â”‚    â”‚
â”‚  â”‚  [Vector Store Insert]                                  â”‚    â”‚
â”‚  â”‚      â€¢ Mode: insert                                     â”‚    â”‚
â”‚  â”‚      â€¢ Memory Key: widip_knowledge_base                 â”‚    â”‚
â”‚  â”‚      â€¢ Embeddings: OpenAI                               â”‚    â”‚
â”‚  â”‚            â”‚                                             â”‚    â”‚
â”‚  â”‚            â–¼                                             â”‚    â”‚
â”‚  â”‚  [Upload Confirmation]                                  â”‚    â”‚
â”‚  â”‚      "âœ… Document ajoutÃ© Ã  la base"                     â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ¯ UtilitÃ© de WIBOT

| Cas d'Usage | Description | Outils UtilisÃ©s |
|-------------|-------------|-----------------|
| **Recherche Documentaire** | Trouver procÃ©dures, guides techniques | Vector Store RAG |
| **Consultation Tickets** | Voir statut tickets client (si autorisÃ©) | MCP GLPI |
| **Recherche Contrats** | AccÃ©der aux contrats clients (si autorisÃ©) | Vector Store RAG |
| **Assistance Technique** | Questions sur infrastructure rÃ©seau | Vector Store RAG + GLPI |
| **Onboarding** | Formation nouveaux employÃ©s | Vector Store RAG |

### ğŸ”’ Matrice de ContrÃ´le d'AccÃ¨s

```csv
user_id,role,acces_glpi,acces_base_docs,acces_contrats,acces_confidential,clients_autorises,categories_tickets_autorisees
john.doe,Technicien,true,true,false,false,"EHPAD Les Roses,Clinique Saint-Jean",*
marie.martin,Manager,true,true,true,true,*,*
support.level1,Support,true,true,false,false,*,"Incident,Demande"
```

**Champs de la matrice** :

- `user_id` : Identifiant de session
- `role` : RÃ´le mÃ©tier
- `acces_glpi` : Peut utiliser les outils GLPI
- `acces_base_docs` : Peut chercher dans la base documentaire
- `acces_contrats` : Peut accÃ©der aux contrats (confidentiels)
- `acces_confidential` : Peut voir donnÃ©es sensibles
- `clients_autorises` : Liste des clients (ou *)
- `categories_tickets_autorisees` : CatÃ©gories de tickets (ou *)

### ğŸš€ Flux de Traitement WIBOT

```
Utilisateur se connecte au chat
          â”‚
          â–¼
Extraction user_id (sessionId)
          â”‚
          â–¼
Lecture matrice d'accÃ¨s CSV
          â”‚
          â–¼
VÃ©rification autorisation
          â”‚
    â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
    â”‚           â”‚
  RefusÃ©     AutorisÃ©
    â”‚           â”‚
    â–¼           â–¼
Message      Construction prompt
d'erreur     systÃ¨me personnalisÃ©
             (avec restrictions)
                 â”‚
                 â–¼
           Agent IA reÃ§oit:
           â€¢ Query utilisateur
           â€¢ System prompt dynamique
           â€¢ Permissions en mÃ©moire
                 â”‚
                 â–¼
           Agent dÃ©cide quel outil utiliser:
                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                 â”‚
  Recherche Docs    Recherche GLPI
  (Vector Store)    (MCP Client)
        â”‚                 â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
          SynthÃ¨se rÃ©ponse
                 â”‚
                 â–¼
         Envoi Ã  l'utilisateur
```

### ğŸ“Š MÃ©triques WIBOT

- **Latence moyenne** : 2-5 secondes
- **Taux de rÃ©ussite RAG** : ~85% (dÃ©pend de la qualitÃ© docs)
- **Utilisation MCP GLPI** : ~40% des requÃªtes
- **Refus d'accÃ¨s** : ~5% (permissions)

---

## 5. Workflow 2 : Proactif Observium (Monitoring RÃ©seau)

### ğŸ“– Vue d'Ensemble

**Proactif Observium** est un systÃ¨me de monitoring rÃ©seau intelligent qui :
- ReÃ§oit des alertes d'Observium en temps rÃ©el (webhook)
- Diagnostique automatiquement la cause (Agent Sentinel)
- CrÃ©e tickets GLPI et notifie clients (Agent Notificateur)
- DÃ©termine la responsabilitÃ© : FAI, client, Ã©lectrique, indÃ©terminÃ©

### ğŸ—ï¸ Architecture Proactif Observium

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              WIDIP_Proactif_Observium_v6 Architecture                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                  PHASE 0: RÃ©ception Alerte                   â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  [Webhook Alertes Observium]                                 â”‚    â”‚
â”‚  â”‚      â€¢ Path: /widip-alertes                                  â”‚    â”‚
â”‚  â”‚      â€¢ Method: POST                                          â”‚    â”‚
â”‚  â”‚      â€¢ Webhook ID: widip-alertes-optimized                   â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  Payload exemple:                                            â”‚    â”‚
â”‚  â”‚  {                                                           â”‚    â”‚
â”‚  â”‚    "device_name": "RTR-CLIENT-001",                          â”‚    â”‚
â”‚  â”‚    "ip_address": "192.168.1.1",                              â”‚    â”‚
â”‚  â”‚    "alert_type": "ping_down",                                â”‚    â”‚
â”‚  â”‚    "status": "critical",                                     â”‚    â”‚
â”‚  â”‚    "downtime_minutes": 45,                                   â”‚    â”‚
â”‚  â”‚    "message": "Device is not responding"                     â”‚    â”‚
â”‚  â”‚  }                                                           â”‚    â”‚
â”‚  â”‚            â”‚                                                  â”‚    â”‚
â”‚  â”‚            â–¼                                                  â”‚    â”‚
â”‚  â”‚  [Parse Alerte + Tracking ID]  â—„â”€â”€â”€ Code JS                 â”‚    â”‚
â”‚  â”‚      â€¢ GÃ©nÃ¨re tracking_id unique                             â”‚    â”‚
â”‚  â”‚      â€¢ Format: ALT-YYYY-TIMESTAMP-RANDOM                     â”‚    â”‚
â”‚  â”‚      â€¢ Enrichit donnÃ©es alerte                               â”‚    â”‚
â”‚  â”‚            â”‚                                                  â”‚    â”‚
â”‚  â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â”‚    â”‚
â”‚  â”‚            â”‚              â”‚                                   â”‚    â”‚
â”‚  â”‚            â–¼              â–¼                                   â”‚    â”‚
â”‚  â”‚  [RÃ©ponse Webhook] [Continue Async]                          â”‚    â”‚
â”‚  â”‚      â€¢ Status: accepted                                      â”‚    â”‚
â”‚  â”‚      â€¢ Tracking ID                                           â”‚    â”‚
â”‚  â”‚      â€¢ ETA: 30-45s                                           â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                              â”‚                                        â”‚
â”‚                              â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              OPTIMISATION: Pre-Filtering                     â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  [OPTIM: Pre-Filter + Dedup]  â—„â”€â”€â”€ Code JS                  â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  RÃ¨gles de filtrage AVANT traitement IA:                     â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  1. Micro-coupures < 5 minutes â†’ FiltrÃ©                      â”‚    â”‚
â”‚  â”‚     Raison: Transitoire, pas d'action requise                â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  2. FenÃªtres de maintenance (2h-4h) â†’ FiltrÃ©                 â”‚    â”‚
â”‚  â”‚     Raison: Maintenance planifiÃ©e                            â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  3. Cache Redis (optionnel)                                  â”‚    â”‚
â”‚  â”‚     Check: alert_${device}_${date}                           â”‚    â”‚
â”‚  â”‚     Raison: Ã‰viter double traitement                         â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  RÃ©sultat:                                                   â”‚    â”‚
â”‚  â”‚  â€¢ pre_filter_result: "pass" ou "filtered"                   â”‚    â”‚
â”‚  â”‚  â€¢ filter_reason: raison si filtrÃ©                           â”‚    â”‚
â”‚  â”‚            â”‚                                                  â”‚    â”‚
â”‚  â”‚            â–¼                                                  â”‚    â”‚
â”‚  â”‚  [IF Alerte valide ?]                                        â”‚    â”‚
â”‚  â”‚       â”‚            â”‚                                          â”‚    â”‚
â”‚  â”‚      OUI          NON                                         â”‚    â”‚
â”‚  â”‚       â”‚            â”‚                                          â”‚    â”‚
â”‚  â”‚       â”‚            â””â”€â”€â–º[Log Alerte FiltrÃ©e]                  â”‚    â”‚
â”‚  â”‚       â”‚                "Alerte ignorÃ©e: {reason}"            â”‚    â”‚
â”‚  â”‚       â”‚                                                       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚          â”‚                                                            â”‚
â”‚          â–¼                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   OPTIMISATION: Cache Check (Redis ready, optionnel)        â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  [OPTIM: Check Cache Diagnostic]                             â”‚    â”‚
â”‚  â”‚      â€¢ Si diagnostic rÃ©cent existe (< 20min)                 â”‚    â”‚
â”‚  â”‚      â€¢ RÃ©utiliser au lieu de re-diagnostiquer                â”‚    â”‚
â”‚  â”‚      â€¢ Gain: ~15-20s par alerte                              â”‚    â”‚
â”‚  â”‚            â”‚                                                  â”‚    â”‚
â”‚  â”‚            â–¼                                                  â”‚    â”‚
â”‚  â”‚  [IF Cache Hit ?]                                            â”‚    â”‚
â”‚  â”‚       â”‚            â”‚                                          â”‚    â”‚
â”‚  â”‚     Cache        Cache                                        â”‚    â”‚
â”‚  â”‚     Miss         Hit                                          â”‚    â”‚
â”‚  â”‚       â”‚            â”‚                                          â”‚    â”‚
â”‚  â”‚       â”‚            â””â”€â”€â–º[Use Cached Diagnostic]               â”‚    â”‚
â”‚  â”‚       â”‚                                                       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚          â”‚                                                            â”‚
â”‚          â–¼                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚        PHASE 1: Diagnostic Intelligent (Sentinel)            â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  [Agent_Sentinel_v5_OptimisÃ©]  â—„â”€â”€â”€ LangChain Agent          â”‚    â”‚
â”‚  â”‚      â€¢ LLM: Ollama (Mistral 7B local)                        â”‚    â”‚
â”‚  â”‚      â€¢ Temperature: 0.1 (dÃ©terministe)                       â”‚    â”‚
â”‚  â”‚      â€¢ Max Iterations: 8                                     â”‚    â”‚
â”‚  â”‚      â€¢ Timeout: 20 secondes                                  â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  Mission:                                                    â”‚    â”‚
â”‚  â”‚  "Analyser l'alerte rÃ©seau et dÃ©terminer la RESPONSABILITÃ‰  â”‚    â”‚
â”‚  â”‚   de la panne (FAI, client, Ã©lectrique, indÃ©terminÃ©)"       â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚    â”‚
â”‚  â”‚  â”‚          WORKFLOW AGENT SENTINEL                    â”‚     â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚    â”‚
â”‚  â”‚  â”‚                                                     â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  Ã‰TAPE 1: Identifier Client (OBLIGATOIRE)          â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  Tool: search_client(device_name)                  â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  Output: client_id (ex: "CLI-042")                 â”‚     â”‚    â”‚
â”‚  â”‚  â”‚                                                     â”‚     â”‚    â”‚
â”‚  â”‚  â”‚            â–¼                                        â”‚     â”‚    â”‚
â”‚  â”‚  â”‚                                                     â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  Ã‰TAPE 2: Diagnostic FAI (PRIORITAIRE)             â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  Tool: diagnose_outage(client_id, ip, device)      â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  Output: {                                         â”‚     â”‚    â”‚
â”‚  â”‚  â”‚    responsibility: "phibee_fai|router_client|      â”‚     â”‚    â”‚
â”‚  â”‚  â”‚                     power_outage|unknown",         â”‚     â”‚    â”‚
â”‚  â”‚  â”‚    diagnosis: "Description dÃ©taillÃ©e",             â”‚     â”‚    â”‚
â”‚  â”‚  â”‚    reference: "INC-2024-XXX",                      â”‚     â”‚    â”‚
â”‚  â”‚  â”‚    eta_resolution: "4h"                            â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  }                                                 â”‚     â”‚    â”‚
â”‚  â”‚  â”‚                                                     â”‚     â”‚    â”‚
â”‚  â”‚  â”‚            â–¼                                        â”‚     â”‚    â”‚
â”‚  â”‚  â”‚                                                     â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  Ã‰TAPE 3: MÃ©triques Observium (SI NÃ‰CESSAIRE)      â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  Tool: get_device_status(device_name)              â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  Tool: get_device_history(device_name, 24h)        â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  Output: uptime, incidents rÃ©cents                 â”‚     â”‚    â”‚
â”‚  â”‚  â”‚                                                     â”‚     â”‚    â”‚
â”‚  â”‚  â”‚            â–¼                                        â”‚     â”‚    â”‚
â”‚  â”‚  â”‚                                                     â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  OUTPUT: JSON structurÃ© avec diagnostic complet    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚                                                     â”‚     â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  ğŸ› ï¸ TOOLS DISPONIBLES (MCP Clients):                        â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  [1] MCP Client - Observium (Local)                          â”‚    â”‚
â”‚  â”‚      â€¢ Endpoint: localhost:8668/mcp/observium/sse            â”‚    â”‚
â”‚  â”‚      â€¢ Operations:                                           â”‚    â”‚
â”‚  â”‚        - get_device_status(device_name)                      â”‚    â”‚
â”‚  â”‚        - get_device_metrics(device_name)                     â”‚    â”‚
â”‚  â”‚        - get_device_alerts(device_name)                      â”‚    â”‚
â”‚  â”‚        - get_device_history(device_name, hours)              â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  [2] MCP Client - Phibee (Local)  â­ CRITIQUE                â”‚    â”‚
â”‚  â”‚      â€¢ Endpoint: localhost:8669/mcp/phibee/sse               â”‚    â”‚
â”‚  â”‚      â€¢ Operations:                                           â”‚    â”‚
â”‚  â”‚        - diagnose_outage(client_id, ip, device) â† Principal  â”‚    â”‚
â”‚  â”‚        - test_link_status(client_id, ip)                     â”‚    â”‚
â”‚  â”‚        - get_link_info(client_id)                            â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  [3] MCP Client - GLPI (Local)                               â”‚    â”‚
â”‚  â”‚      â€¢ Endpoint: localhost:8670/mcp/glpi/sse                 â”‚    â”‚
â”‚  â”‚      â€¢ Operations:                                           â”‚    â”‚
â”‚  â”‚        - search_client(name)  â† UtilisÃ© en premier          â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                              â”‚                                        â”‚
â”‚                              â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚       POST-PROCESSING: Validation & Enrichissement           â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  [Format Diagnostic + MÃ©triques]  â—„â”€â”€â”€ Code JS               â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  Enrichit le diagnostic avec:                                â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  â€¢ original_alert: DonnÃ©es brutes alerte                     â”‚    â”‚
â”‚  â”‚  â€¢ diagnostic_success: true/false                            â”‚    â”‚
â”‚  â”‚  â€¢ client_found: true/false                                  â”‚    â”‚
â”‚  â”‚  â€¢ responsibility: phibee_fai|router_client|...              â”‚    â”‚
â”‚  â”‚  â€¢ severity: critical|high|medium|low                        â”‚    â”‚
â”‚  â”‚  â€¢ confidence: high|medium|low                               â”‚    â”‚
â”‚  â”‚  â€¢ phibee_data: {link_status, reference, eta}                â”‚    â”‚
â”‚  â”‚  â€¢ observium_data: {uptime, incidents}                       â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  â€¢ metrics: {                                                â”‚    â”‚
â”‚  â”‚      sentinel_duration_ms,                                   â”‚    â”‚
â”‚  â”‚      sentinel_timeout: true/false,                           â”‚    â”‚
â”‚  â”‚      tools_used: ["search_client", "diagnose_outage"],       â”‚    â”‚
â”‚  â”‚      cache_used: false,                                      â”‚    â”‚
â”‚  â”‚      pre_filter_passed: true                                 â”‚    â”‚
â”‚  â”‚    }                                                         â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  Structure complÃ¨te JSON prÃªte pour Phase 2                  â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                              â”‚                                        â”‚
â”‚                              â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚      PHASE 2: Actions & Notifications (Notificateur)         â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  [Agent_Notificateur_v5_OptimisÃ©]  â—„â”€â”€â”€ LangChain Agent      â”‚    â”‚
â”‚  â”‚      â€¢ LLM: Ollama (Mistral 7B local)                        â”‚    â”‚
â”‚  â”‚      â€¢ Temperature: 0.1                                      â”‚    â”‚
â”‚  â”‚      â€¢ Max Iterations: 8                                     â”‚    â”‚
â”‚  â”‚      â€¢ Timeout: 15 secondes                                  â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  Mission:                                                    â”‚    â”‚
â”‚  â”‚  "ExÃ©cuter les actions appropriÃ©es selon la responsabilitÃ©   â”‚    â”‚
â”‚  â”‚   dÃ©terminÃ©e par Sentinel (tickets, emails, notifications)"  â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚    â”‚
â”‚  â”‚  â”‚       MATRICE DÃ‰CISION AUTOMATIQUE                  â”‚     â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚    â”‚
â”‚  â”‚  â”‚                                                     â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  SI responsibility = "phibee_fai" (Panne FAI):     â”‚     â”‚    â”‚
â”‚  â”‚  â”‚    1. search_client() â†’ email                      â”‚     â”‚    â”‚
â”‚  â”‚  â”‚    2. create_ticket(P5, critical)                  â”‚     â”‚    â”‚
â”‚  â”‚  â”‚    3. send_template_email("provider_incident")     â”‚     â”‚    â”‚
â”‚  â”‚  â”‚    4. send_bulk_notification("tech_team")          â”‚     â”‚    â”‚
â”‚  â”‚  â”‚                                                     â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  SI responsibility = "router_client" (Ã‰quipement): â”‚     â”‚    â”‚
â”‚  â”‚  â”‚    1. search_client() â†’ email                      â”‚     â”‚    â”‚
â”‚  â”‚  â”‚    2. create_ticket(P4, high)                      â”‚     â”‚    â”‚
â”‚  â”‚  â”‚    3. send_template_email("ticket_created")        â”‚     â”‚    â”‚
â”‚  â”‚  â”‚    4. send_bulk_notification("tech_team", URGENT)  â”‚     â”‚    â”‚
â”‚  â”‚  â”‚                                                     â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  SI responsibility = "power_outage" (Ã‰lectrique):  â”‚     â”‚    â”‚
â”‚  â”‚  â”‚    1. search_client() â†’ email                      â”‚     â”‚    â”‚
â”‚  â”‚  â”‚    2. create_ticket(P3, medium)                    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚    3. send_email(simple, verification)             â”‚     â”‚    â”‚
â”‚  â”‚  â”‚    4. PAS de notification Ã©quipe                   â”‚     â”‚    â”‚
â”‚  â”‚  â”‚                                                     â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  SI responsibility = "unknown" (IndÃ©terminÃ©):      â”‚     â”‚    â”‚
â”‚  â”‚  â”‚    1. search_client() â†’ email                      â”‚     â”‚    â”‚
â”‚  â”‚  â”‚    2. create_ticket(P4, high)                      â”‚     â”‚    â”‚
â”‚  â”‚  â”‚    3. send_bulk_notification("tech_team", URGENT)  â”‚     â”‚    â”‚
â”‚  â”‚  â”‚    4. PAS d'email client (attente investigation)   â”‚     â”‚    â”‚
â”‚  â”‚  â”‚                                                     â”‚     â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  ğŸ› ï¸ TOOLS DISPONIBLES (MCP Clients):                        â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  [1] MCP Client - GLPI Actions (Local)                       â”‚    â”‚
â”‚  â”‚      â€¢ Endpoint: localhost:8670/mcp/glpi/sse                 â”‚    â”‚
â”‚  â”‚      â€¢ Operations:                                           â”‚    â”‚
â”‚  â”‚        - search_client(name) â†’ rÃ©cupÃ©rer email              â”‚    â”‚
â”‚  â”‚        - create_ticket(title, desc, priority, urgency)       â”‚    â”‚
â”‚  â”‚        - add_ticket_followup(ticket_id, content)             â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  [2] MCP Client - SMTP (Local)                               â”‚    â”‚
â”‚  â”‚      â€¢ Endpoint: localhost:8671/mcp/smtp/sse                 â”‚    â”‚
â”‚  â”‚      â€¢ Operations:                                           â”‚    â”‚
â”‚  â”‚        - send_email(to, subject, body, priority)             â”‚    â”‚
â”‚  â”‚        - send_template_email(template, to, data)             â”‚    â”‚
â”‚  â”‚        - send_bulk_notification(group, subject, msg)         â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚      Templates disponibles:                                  â”‚    â”‚
â”‚  â”‚        - provider_incident (FAI)                             â”‚    â”‚
â”‚  â”‚        - ticket_created (Intervention)                       â”‚    â”‚
â”‚  â”‚        - resolution_confirmed (RÃ©solu)                       â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                              â”‚                                        â”‚
â”‚                              â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚         POST-PROCESSING: Validation Finale                   â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  [Valider RÃ©ponse Finale + MÃ©triques]  â—„â”€â”€â”€ Code JS          â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  Consolide les rÃ©sultats des 2 agents:                       â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  â€¢ success: global (Sentinel + Notificateur)                 â”‚    â”‚
â”‚  â”‚  â€¢ tracking_id: identifiant unique                           â”‚    â”‚
â”‚  â”‚  â€¢ device_name, ip_address, alert_type                       â”‚    â”‚
â”‚  â”‚  â€¢ client_name, client_email, client_id                      â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  â€¢ responsibility: dÃ©cision finale                           â”‚    â”‚
â”‚  â”‚  â€¢ diagnosis: explication complÃ¨te                           â”‚    â”‚
â”‚  â”‚  â€¢ severity, confidence                                      â”‚    â”‚
â”‚  â”‚  â€¢ phibee_reference: rÃ©fÃ©rence incident FAI                  â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  â€¢ ticket: {created, id, title, url}                         â”‚    â”‚
â”‚  â”‚  â€¢ notifications: {client_notified, team_notified}           â”‚    â”‚
â”‚  â”‚  â€¢ actions_taken: [liste actions]                            â”‚    â”‚
â”‚  â”‚  â€¢ summary: rÃ©sumÃ© court                                     â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  â€¢ metrics: {                                                â”‚    â”‚
â”‚  â”‚      workflow_total_duration_ms,                             â”‚    â”‚
â”‚  â”‚      sentinel_duration_ms,                                   â”‚    â”‚
â”‚  â”‚      notificateur_duration_ms,                               â”‚    â”‚
â”‚  â”‚      performance_target_met: < 45s,                          â”‚    â”‚
â”‚  â”‚      tools_used_sentinel: [...],                             â”‚    â”‚
â”‚  â”‚      tools_used_notificateur: [...]                          â”‚    â”‚
â”‚  â”‚    }                                                         â”‚    â”‚
â”‚  â”‚            â”‚                                                  â”‚    â”‚
â”‚  â”‚            â–¼                                                  â”‚    â”‚
â”‚  â”‚  [IF Success ?]                                              â”‚    â”‚
â”‚  â”‚       â”‚            â”‚                                          â”‚    â”‚
â”‚  â”‚     SUCCESS      ERROR                                        â”‚    â”‚
â”‚  â”‚       â”‚            â”‚                                          â”‚    â”‚
â”‚  â”‚       â”‚            â””â”€â”€â–º[Log Erreur PostgreSQL]               â”‚    â”‚
â”‚  â”‚       â”‚                                                       â”‚    â”‚
â”‚  â”‚       â–¼                                                       â”‚    â”‚
â”‚  â”‚  [Log SuccÃ¨s PostgreSQL]                                     â”‚    â”‚
â”‚  â”‚      â€¢ Table: incident_logs                                  â”‚    â”‚
â”‚  â”‚      â€¢ Champs: tracking_id, device, client, responsibility,  â”‚    â”‚
â”‚  â”‚                severity, ticket_id, actions_taken, metrics   â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ¯ UtilitÃ© du Proactif Observium

| Cas d'Usage | ResponsabilitÃ© | Actions Automatiques |
|-------------|----------------|----------------------|
| **Panne FAI** | phibee_fai | Ticket P5, Email template FAI, Notif Ã©quipe (Info) |
| **Ã‰quipement Client** | router_client | Ticket P4, Email intervention, Notif Ã©quipe (Urgent) |
| **Coupure Ã‰lectrique** | power_outage | Ticket P3, Email vÃ©rification, Pas notif Ã©quipe |
| **Cause Inconnue** | unknown | Ticket P4, Notif Ã©quipe (Urgent), Pas email client |

### ğŸš€ Flux de Traitement Proactif

```
Observium dÃ©tecte panne rÃ©seau
          â”‚
          â–¼
Webhook POST /widip-alertes
          â”‚
          â–¼
Parse + Tracking ID unique
          â”‚
          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚              â”‚
          â–¼              â–¼
RÃ©ponse immÃ©diate  Traitement async
"Accepted"
                        â”‚
                        â–¼
                  Pre-Filtering
                  (< 5min ? Maintenance ?)
                        â”‚
                   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
                   â”‚         â”‚
                FiltrÃ©    Valide
                   â”‚         â”‚
                   â”‚         â–¼
                   â”‚    Cache Check
                   â”‚         â”‚
                   â”‚    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
                   â”‚    â”‚         â”‚
                   â”‚   Hit      Miss
                   â”‚    â”‚         â”‚
                   â”‚    â”‚         â–¼
                   â”‚    â”‚    AGENT SENTINEL
                   â”‚    â”‚    (20s timeout)
                   â”‚    â”‚         â”‚
                   â”‚    â”‚    1. search_client
                   â”‚    â”‚    2. diagnose_outage (Phibee)
                   â”‚    â”‚    3. get_device_status (Observium)
                   â”‚    â”‚         â”‚
                   â”‚    â”‚         â–¼
                   â”‚    â”‚    Diagnostic enrichi
                   â”‚    â”‚    + MÃ©triques
                   â”‚    â”‚         â”‚
                   â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                   â”‚              â”‚
                   â”‚              â–¼
                   â”‚         AGENT NOTIFICATEUR
                   â”‚         (15s timeout)
                   â”‚              â”‚
                   â”‚         Selon responsabilitÃ©:
                   â”‚              â”‚
                   â”‚         1. search_client (email)
                   â”‚         2. create_ticket GLPI
                   â”‚         3. send_email/template
                   â”‚         4. notify_team (si requis)
                   â”‚              â”‚
                   â”‚              â–¼
                   â”‚         Validation finale
                   â”‚         + MÃ©triques complÃ¨tes
                   â”‚              â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                                  â”‚
                                  â–¼
                            Log PostgreSQL
                            (incident_logs)
                                  â”‚
                                  â–¼
                            Workflow terminÃ©
                            (Total: < 45s)
```

### ğŸ“Š MÃ©triques Proactif

**Objectifs de Performance** :
- **Total workflow** : < 45 secondes
- **Sentinel** : < 20 secondes
- **Notificateur** : < 15 secondes

**Taux de RÃ©ussite** :
- **Diagnostic automatique** : ~80%
- **CrÃ©ation ticket** : ~95%
- **Envoi email** : ~98%

**Volume** :
- **Alertes / jour** : 50-100
- **Alertes filtrÃ©es** : ~30% (micro-coupures)
- **Alertes traitÃ©es** : ~70

---

## 6. Workflow 3 : Assistant GLPI (Support Automatique)

### ğŸ“– Vue d'Ensemble

**Assistant GLPI** est un agent autonome qui :
- Polling toutes les 3 minutes pour nouveaux tickets GLPI
- Traite automatiquement les catÃ©gories simples (reset MDP, dÃ©blocage, etc.)
- Escalade les cas complexes aux techniciens
- Log toutes ses actions dans PostgreSQL

### ğŸ—ï¸ Architecture Assistant GLPI

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               WIDIP_Assist_ticket_v2 Architecture                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚              PHASE 0: DÃ©clenchement PÃ©riodique            â”‚      â”‚
â”‚  â”‚                                                            â”‚      â”‚
â”‚  â”‚  [Polling 3min]  â—„â”€â”€â”€ Schedule Trigger                    â”‚      â”‚
â”‚  â”‚      â€¢ Interval: Toutes les 3 minutes                     â”‚      â”‚
â”‚  â”‚      â€¢ Type: Cron-like schedule                           â”‚      â”‚
â”‚  â”‚            â”‚                                               â”‚      â”‚
â”‚  â”‚            â–¼                                               â”‚      â”‚
â”‚  â”‚  [Initialiser Contexte]  â—„â”€â”€â”€ Set Node                    â”‚      â”‚
â”‚  â”‚      â€¢ task: "Recherche nouveaux tickets GLPI..."         â”‚      â”‚
â”‚  â”‚      â€¢ execution_id: {{ $execution.id }}                  â”‚      â”‚
â”‚  â”‚      â€¢ started_at: {{ $now.toISO() }}                     â”‚      â”‚
â”‚  â”‚                                                            â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                               â”‚                                      â”‚
â”‚                               â–¼                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚            PHASE 1: Traitement Autonome par Agent         â”‚      â”‚
â”‚  â”‚                                                            â”‚      â”‚
â”‚  â”‚  [Agent Support WIDIP]  â—„â”€â”€â”€ LangChain Agent              â”‚      â”‚
â”‚  â”‚      â€¢ LLM: Ollama Qwen 2.5 14B (local)                   â”‚      â”‚
â”‚  â”‚      â€¢ Temperature: 0.1 (dÃ©terministe)                    â”‚      â”‚
â”‚  â”‚      â€¢ Context Window: 16K tokens                         â”‚      â”‚
â”‚  â”‚      â€¢ Max Iterations: 15                                 â”‚      â”‚
â”‚  â”‚      â€¢ Memory: Buffer Window (journalier)                 â”‚      â”‚
â”‚  â”‚                                                            â”‚      â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚      â”‚
â”‚  â”‚  â”‚         WORKFLOW AGENT SUPPORT                     â”‚   â”‚      â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚      â”‚
â”‚  â”‚  â”‚                                                    â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  Ã‰TAPE 1: RÃ©cupÃ©ration Tickets                    â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  Tool: glpi.search_new_tickets(minutes_since=5)   â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  Output: Liste tickets nouveaux/modifiÃ©s          â”‚   â”‚      â”‚
â”‚  â”‚  â”‚                                                    â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  SI aucun ticket:                                 â”‚   â”‚      â”‚
â”‚  â”‚  â”‚    â†’ Retourner "Aucun nouveau ticket"            â”‚   â”‚      â”‚
â”‚  â”‚  â”‚    â†’ FIN                                          â”‚   â”‚      â”‚
â”‚  â”‚  â”‚                                                    â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  SI tickets trouvÃ©s:                              â”‚   â”‚      â”‚
â”‚  â”‚  â”‚            â–¼                                       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚                                                    â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  Ã‰TAPE 2: Pour chaque ticket                      â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  Tool: glpi.get_ticket_details(ticket_id)         â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  Output: {title, content, requester, category}    â”‚   â”‚      â”‚
â”‚  â”‚  â”‚            â”‚                                       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚            â–¼                                       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚                                                    â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  Ã‰TAPE 3: Classification Automatique              â”‚   â”‚      â”‚
â”‚  â”‚  â”‚                                                    â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  Analyse du contenu avec mots-clÃ©s:               â”‚   â”‚      â”‚
â”‚  â”‚  â”‚                                                    â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚  CATÃ‰GORIE: RESET_MDP                  â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚  Mots-clÃ©s:                            â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ mot de passe, password, oubliÃ©      â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ bloquÃ©, rÃ©initialiser, reset, mdp   â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ accÃ¨s refusÃ©                        â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚                                         â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚  Workflow complet:                     â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚  1. Extraire identifiant utilisateur   â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚     Format: prenom.nom ou email        â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚                                         â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚  2. ad.check_user(username)            â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚     â†’ VÃ©rifier existence + statut actifâ”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚                                         â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚  3. ad.reset_password(username)        â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚     â†’ GÃ©nÃ¨re nouveau MDP               â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚     Output: {username, new_password}   â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚                                         â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚  4. mysecret.create_secret(            â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚       payload: {user, pass},           â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚       expire_days: 7,                  â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚       expire_views: 5                  â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚     )                                   â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚     Output: {secret_url}               â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚                                         â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚  5. smtp.send_email(                   â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚       to: user_email,                  â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚       subject: "RÃ©init MDP",           â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚       body: template + secret_url      â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚     )                                   â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚                                         â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚  6. glpi.add_ticket_followup(          â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚       ticket_id,                       â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚       content: "[BOT] Reset effectuÃ©", â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚       is_private: false                â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚     )                                   â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚                                         â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚  7. glpi.close_ticket(                 â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚       ticket_id,                       â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚       solution: "MDP rÃ©initialisÃ©..."  â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚     )                                   â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚                                                    â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚  CATÃ‰GORIE: DEBLOCAGE_COMPTE           â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚  Mots-clÃ©s:                            â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ compte bloquÃ©, verrouillÃ©, locked   â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ trop de tentatives                  â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚                                         â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚  Workflow:                             â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚  1. Extraire identifiant               â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚  2. ad.check_user(username)            â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚  3. ad.unlock_account(username)        â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚  4. glpi.add_ticket_followup(...)      â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚  5. glpi.close_ticket(...)             â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚                                                    â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚  CATÃ‰GORIE: CREATION_COMPTE            â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚  Mots-clÃ©s:                            â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ nouveau compte, crÃ©ation            â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ nouvel employÃ©, arrivÃ©e, embauche   â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚                                         â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚  Workflow:                             â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚  1. Extraire: nom, prÃ©nom, poste,      â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚     Ã©tablissement, email demandeur     â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚  2. glpi.add_ticket_followup(          â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚       is_private=true,                 â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚       content: infos formatÃ©es         â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚     )                                   â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚  3. NE PAS CLÃ”TURER                    â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚     â†’ NÃ©cessite script PowerShell      â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚       manuel par admin                 â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚                                                    â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚  CATÃ‰GORIE: AUTRE (Escalade)           â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚  Si aucune catÃ©gorie identifiÃ©e:       â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚                                         â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚  Workflow:                             â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚  1. glpi.add_ticket_followup(          â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚       is_private=true,                 â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚       content: "[BOT] Traitement       â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚                manuel requis - catÃ©gorie  â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚                non reconnue"              â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚     )                                   â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚  2. NE PAS CLÃ”TURER                    â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â”‚     â†’ Attente traitement humain        â”‚       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚   â”‚      â”‚
â”‚  â”‚  â”‚                                                    â”‚   â”‚      â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚      â”‚
â”‚  â”‚                                                            â”‚      â”‚
â”‚  â”‚  ğŸ› ï¸ TOOLS DISPONIBLES (MCP Clients):                      â”‚      â”‚
â”‚  â”‚                                                            â”‚      â”‚
â”‚  â”‚  [1] MCP Client GLPI                                      â”‚      â”‚
â”‚  â”‚      â€¢ Operations:                                        â”‚      â”‚
â”‚  â”‚        - search_new_tickets(minutes_since, limit)         â”‚      â”‚
â”‚  â”‚        - get_ticket_details(ticket_id)                    â”‚      â”‚
â”‚  â”‚        - add_ticket_followup(ticket_id, content, private) â”‚      â”‚
â”‚  â”‚        - close_ticket(ticket_id, solution)                â”‚      â”‚
â”‚  â”‚        - search_client(name)                              â”‚      â”‚
â”‚  â”‚                                                            â”‚      â”‚
â”‚  â”‚  [2] MCP Active Directory                                 â”‚      â”‚
â”‚  â”‚      â€¢ Operations:                                        â”‚      â”‚
â”‚  â”‚        - check_user(username)                             â”‚      â”‚
â”‚  â”‚        - reset_password(username)                         â”‚      â”‚
â”‚  â”‚        - get_user_info(username)                          â”‚      â”‚
â”‚  â”‚        - unlock_account(username)                         â”‚      â”‚
â”‚  â”‚                                                            â”‚      â”‚
â”‚  â”‚  [3] MCP MySecret                                         â”‚      â”‚
â”‚  â”‚      â€¢ Operations:                                        â”‚      â”‚
â”‚  â”‚        - create_secret(payload, expire_days, views)       â”‚      â”‚
â”‚  â”‚                                                            â”‚      â”‚
â”‚  â”‚  [4] MCP SMTP                                             â”‚      â”‚
â”‚  â”‚      â€¢ Operations:                                        â”‚      â”‚
â”‚  â”‚        - send_email(to, subject, body, html)              â”‚      â”‚
â”‚  â”‚                                                            â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                               â”‚                                      â”‚
â”‚                               â–¼                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚          PHASE 2: Post-Processing & Validation            â”‚      â”‚
â”‚  â”‚                                                            â”‚      â”‚
â”‚  â”‚  [Parser RÃ©sultats]  â—„â”€â”€â”€ Code JS                         â”‚      â”‚
â”‚  â”‚                                                            â”‚      â”‚
â”‚  â”‚  Parse la sortie de l'agent pour extraire:                â”‚      â”‚
â”‚  â”‚                                                            â”‚      â”‚
â”‚  â”‚  â€¢ tickets_found: nombre de tickets traitÃ©s               â”‚      â”‚
â”‚  â”‚  â€¢ tickets_processed: [                                   â”‚      â”‚
â”‚  â”‚      {id, category, action},                              â”‚      â”‚
â”‚  â”‚      ...                                                   â”‚      â”‚
â”‚  â”‚    ]                                                       â”‚      â”‚
â”‚  â”‚  â€¢ tickets_escalated: [ids escaladÃ©s]                     â”‚      â”‚
â”‚  â”‚  â€¢ errors: [erreurs rencontrÃ©es]                          â”‚      â”‚
â”‚  â”‚  â€¢ actions_detected: [reset_password, close_ticket, ...]  â”‚      â”‚
â”‚  â”‚  â€¢ duration_seconds: durÃ©e totale                         â”‚      â”‚
â”‚  â”‚                                                            â”‚      â”‚
â”‚  â”‚  Cherche JSON structurÃ© dans rÃ©ponse:                     â”‚      â”‚
â”‚  â”‚  ```json                                                   â”‚      â”‚
â”‚  â”‚  {                                                         â”‚      â”‚
â”‚  â”‚    "tickets_found": 3,                                    â”‚      â”‚
â”‚  â”‚    "tickets_processed": [                                 â”‚      â”‚
â”‚  â”‚      {                                                     â”‚      â”‚
â”‚  â”‚        "id": 1234,                                        â”‚      â”‚
â”‚  â”‚        "category": "RESET_MDP",                           â”‚      â”‚
â”‚  â”‚        "action": "closed"                                 â”‚      â”‚
â”‚  â”‚      }                                                     â”‚      â”‚
â”‚  â”‚    ],                                                      â”‚      â”‚
â”‚  â”‚    "tickets_escalated": [1235],                           â”‚      â”‚
â”‚  â”‚    "errors": []                                           â”‚      â”‚
â”‚  â”‚  }                                                         â”‚      â”‚
â”‚  â”‚  ```                                                       â”‚      â”‚
â”‚  â”‚            â”‚                                               â”‚      â”‚
â”‚  â”‚            â–¼                                               â”‚      â”‚
â”‚  â”‚  [IF Tickets traitÃ©s > 0 ?]                               â”‚      â”‚
â”‚  â”‚       â”‚              â”‚                                     â”‚      â”‚
â”‚  â”‚      OUI            NON                                    â”‚      â”‚
â”‚  â”‚       â”‚              â”‚                                     â”‚      â”‚
â”‚  â”‚       â”‚              â–¼                                     â”‚      â”‚
â”‚  â”‚       â”‚         [Log InactivitÃ©]                          â”‚      â”‚
â”‚  â”‚       â”‚         "Aucun ticket Ã  traiter"                  â”‚      â”‚
â”‚  â”‚       â”‚                                                    â”‚      â”‚
â”‚  â”‚       â–¼                                                    â”‚      â”‚
â”‚  â”‚  [IF Erreurs dÃ©tectÃ©es ?]                                 â”‚      â”‚
â”‚  â”‚       â”‚              â”‚                                     â”‚      â”‚
â”‚  â”‚      OUI            NON                                    â”‚      â”‚
â”‚  â”‚       â”‚              â”‚                                     â”‚      â”‚
â”‚  â”‚       â–¼              â–¼                                     â”‚      â”‚
â”‚  â”‚  [Notification]  [PrÃ©parer Notification]                  â”‚      â”‚
â”‚  â”‚  Erreurs         SuccÃ¨s                                   â”‚      â”‚
â”‚  â”‚  Partielles      â€¢ Tickets traitÃ©s: X                     â”‚      â”‚
â”‚  â”‚                  â€¢ Actions: [...]                         â”‚      â”‚
â”‚  â”‚       â”‚              â”‚                                     â”‚      â”‚
â”‚  â”‚       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚      â”‚
â”‚  â”‚              â”‚                                             â”‚      â”‚
â”‚  â”‚              â–¼                                             â”‚      â”‚
â”‚  â”‚  [Merge Tous les Flux]                                    â”‚      â”‚
â”‚  â”‚              â”‚                                             â”‚      â”‚
â”‚  â”‚              â–¼                                             â”‚      â”‚
â”‚  â”‚  [Log PostgreSQL]  â—„â”€â”€â”€ PostgreSQL Node                   â”‚      â”‚
â”‚  â”‚      â€¢ Table: widip_agent_logs                            â”‚      â”‚
â”‚  â”‚      â€¢ Champs:                                            â”‚      â”‚
â”‚  â”‚        - execution_id                                     â”‚      â”‚
â”‚  â”‚        - started_at, completed_at                         â”‚      â”‚
â”‚  â”‚        - status (success/error)                           â”‚      â”‚
â”‚  â”‚        - tickets_found, tickets_processed                 â”‚      â”‚
â”‚  â”‚        - tickets_escalated                                â”‚      â”‚
â”‚  â”‚        - actions_detected                                 â”‚      â”‚
â”‚  â”‚        - errors                                            â”‚      â”‚
â”‚  â”‚        - duration_seconds                                 â”‚      â”‚
â”‚  â”‚        - raw_output (tronquÃ© Ã  2000 chars)                â”‚      â”‚
â”‚  â”‚                                                            â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚              GESTION DES ERREURS (Parallel)               â”‚      â”‚
â”‚  â”‚                                                            â”‚      â”‚
â”‚  â”‚  Si l'agent Ã©choue (timeout, exception, etc.):            â”‚      â”‚
â”‚  â”‚            â”‚                                               â”‚      â”‚
â”‚  â”‚            â–¼                                               â”‚      â”‚
â”‚  â”‚  [Parser Erreur]  â—„â”€â”€â”€ Code JS                            â”‚      â”‚
â”‚  â”‚      â€¢ Capture error.message, error.stack                 â”‚      â”‚
â”‚  â”‚      â€¢ Format JSON erreur structurÃ©                       â”‚      â”‚
â”‚  â”‚            â”‚                                               â”‚      â”‚
â”‚  â”‚            â–¼                                               â”‚      â”‚
â”‚  â”‚  [Notification Erreur]                                    â”‚      â”‚
â”‚  â”‚      â€¢ Slack/Email: "âš ï¸ Agent GLPI failed"                â”‚      â”‚
â”‚  â”‚      â€¢ Include: execution_id, error_type, timestamp       â”‚      â”‚
â”‚  â”‚            â”‚                                               â”‚      â”‚
â”‚  â”‚            â””â”€â”€â–º [Merge Tous les Flux]                     â”‚      â”‚
â”‚  â”‚                        â”‚                                   â”‚      â”‚
â”‚  â”‚                        â–¼                                   â”‚      â”‚
â”‚  â”‚                 [Log PostgreSQL]                          â”‚      â”‚
â”‚  â”‚                 status='error'                            â”‚      â”‚
â”‚  â”‚                                                            â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ¯ UtilitÃ© de l'Assistant GLPI

| Cas d'Usage | Workflow Automatique | Temps GagnÃ© |
|-------------|---------------------|-------------|
| **Reset Mot de Passe** | Check AD + Reset + MySecret + Email + Close Ticket | ~10 min |
| **DÃ©blocage Compte** | Check AD + Unlock + Close Ticket | ~5 min |
| **CrÃ©ation Compte** | Extract infos + Followup privÃ© + Escalade | ~2 min |
| **Autre** | Followup privÃ© + Escalade | ~1 min |

**Impact Annuel** :
- **~20 000 tickets / an**
- **~40% automatisables** (8 000 tickets)
- **Gain moyen** : 5 min/ticket
- **Total gagnÃ©** : **666 heures / an** (~83 jours de travail)

### ğŸš€ Flux de Traitement Assistant GLPI

```
Toutes les 3 minutes
          â”‚
          â–¼
Initialiser contexte execution
          â”‚
          â–¼
Agent Support WIDIP dÃ©marre
          â”‚
          â–¼
search_new_tickets(minutes_since=5)
          â”‚
     â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
     â”‚         â”‚
  Aucun    Tickets trouvÃ©s
  ticket      â”‚
     â”‚         â”‚
     â”‚         â–¼
     â”‚    Pour chaque ticket:
     â”‚         â”‚
     â”‚         â–¼
     â”‚    get_ticket_details(id)
     â”‚         â”‚
     â”‚         â–¼
     â”‚    Analyse contenu + Classification
     â”‚         â”‚
     â”‚    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚    â”‚                     â”‚             â”‚              â”‚
     â”‚  RESET_MDP      DEBLOCAGE_COMPTE  CREATION_COMPTE  AUTRE
     â”‚    â”‚                     â”‚             â”‚              â”‚
     â”‚    â–¼                     â–¼             â–¼              â–¼
     â”‚  Workflow          Workflow       Extract+       Followup
     â”‚  complet           unlock         Followup       privÃ©
     â”‚  (7 Ã©tapes)        (5 Ã©tapes)     privÃ©          â”‚
     â”‚    â”‚                     â”‚             â”‚          â”‚
     â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚    â”‚
     â”‚    â–¼
     â”‚  Ticket suivant (si existe)
     â”‚    â”‚
     â”‚    â–¼
     â”‚  Tous traitÃ©s
     â”‚    â”‚
     â””â”€â”€â”€â”€â”¤
          â”‚
          â–¼
    Format JSON rÃ©sumÃ©
          â”‚
          â–¼
    Parser RÃ©sultats
          â”‚
     â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
     â”‚         â”‚
  Erreurs   SuccÃ¨s
     â”‚         â”‚
     â”‚         â–¼
     â”‚    Check tickets > 0 ?
     â”‚         â”‚
     â”‚    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
     â”‚    â”‚         â”‚
     â”‚   OUI       NON
     â”‚    â”‚         â”‚
     â”‚    â”‚         â–¼
     â”‚    â”‚    Log inactivitÃ©
     â”‚    â”‚         â”‚
     â”‚    â–¼         â”‚
     â”‚  Notification â”‚
     â”‚  Slack/Email  â”‚
     â”‚    â”‚         â”‚
     â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
    Merge tous flux
          â”‚
          â–¼
    Log PostgreSQL
    (widip_agent_logs)
          â”‚
          â–¼
    Workflow terminÃ©
    (Attente 3 min)
```

### ğŸ“Š MÃ©triques Assistant GLPI

**Performance** :
- **DurÃ©e moyenne** : 30-60 secondes par cycle (selon nombre de tickets)
- **Taux d'automatisation** : ~40% des tickets
- **Taux de rÃ©ussite** : ~95%

**CatÃ©gories** :
- **RESET_MDP** : ~60% des automatisations
- **DEBLOCAGE_COMPTE** : ~20%
- **CREATION_COMPTE** : ~10%
- **AUTRE (escalade)** : ~10%

---

## 7. Matrice des DÃ©pendances MCP

### ğŸ“Š Vue d'Ensemble

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                MATRICE DÃ‰PENDANCES MCP SERVICES                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Workflow        â”‚ GLPI â”‚ Obs. â”‚Phibeeâ”‚ SMTP â”‚ AD  â”‚MySecret  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  WIBOT_v1        â”‚  âœ…  â”‚      â”‚      â”‚      â”‚     â”‚          â”‚
â”‚  Proactif_v6     â”‚  âœ…  â”‚  âœ…  â”‚  âœ…  â”‚  âœ…  â”‚     â”‚          â”‚
â”‚  Assist_v2       â”‚  âœ…  â”‚      â”‚      â”‚  âœ…  â”‚ âœ…  â”‚   âœ…     â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ”— DÃ©tails des DÃ©pendances

#### WIBOT_v1 (Assistant IA Interne)

| MCP Service | Operations UtilisÃ©es | FrÃ©quence | CriticitÃ© |
|-------------|---------------------|-----------|-----------|
| **GLPI** | search_client, get_ticket_status, search_new_tickets, get_ticket_details | Ã€ la demande | Moyenne |

**Total MCP** : 1

---

#### Proactif_v6 (Monitoring RÃ©seau)

**Phase 1 - Sentinel (Diagnostic)** :

| MCP Service | Operations UtilisÃ©es | FrÃ©quence | CriticitÃ© |
|-------------|---------------------|-----------|-----------|
| **GLPI** | search_client | Toujours (1er appel) | âš ï¸ CRITIQUE |
| **Phibee** | diagnose_outage, test_link_status, get_link_info | Toujours | âš ï¸ CRITIQUE |
| **Observium** | get_device_status, get_device_metrics, get_device_history | Optionnel (contexte) | Moyenne |

**Phase 2 - Notificateur (Actions)** :

| MCP Service | Operations UtilisÃ©es | FrÃ©quence | CriticitÃ© |
|-------------|---------------------|-----------|-----------|
| **GLPI** | search_client, create_ticket, add_ticket_followup | Toujours | âš ï¸ CRITIQUE |
| **SMTP** | send_email, send_template_email, send_bulk_notification | Selon responsabilitÃ© | Haute |

**Total MCP** : 4 (GLPI, Observium, Phibee, SMTP)

---

#### Assist_v2 (Support Automatique)

| MCP Service | Operations UtilisÃ©es | FrÃ©quence | CriticitÃ© |
|-------------|---------------------|-----------|-----------|
| **GLPI** | search_new_tickets, get_ticket_details, add_ticket_followup, close_ticket | Toujours | âš ï¸ CRITIQUE |
| **Active Directory** | check_user, reset_password, unlock_account, get_user_info | Selon catÃ©gorie | âš ï¸ CRITIQUE |
| **MySecret** | create_secret | Si reset MDP | Haute |
| **SMTP** | send_email | Si reset MDP | Haute |

**Total MCP** : 4 (GLPI, AD, MySecret, SMTP)

---

### ğŸ¯ Services MCP par CriticitÃ©

#### âš ï¸ CRITIQUE (Bloquant)

- **GLPI** : UtilisÃ© par les 3 workflows
- **Phibee** : Indispensable pour dÃ©terminer responsabilitÃ© (Proactif)
- **Active Directory** : NÃ©cessaire pour reset MDP (Assist)

#### ğŸ”¶ HAUTE (Important)

- **SMTP** : Notifications essentielles (Proactif, Assist)
- **MySecret** : SÃ©curitÃ© liens MDP (Assist)

#### ğŸ”µ MOYENNE (Contexte)

- **Observium** : MÃ©triques additionnelles (Proactif)

---

## 8. Flux de DonnÃ©es

### ğŸŒŠ Vue d'Ensemble des Flux

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       FLUX DE DONNÃ‰ES WIDIP                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  [1] WIBOT - Flux Conversationnel                                â”‚
â”‚                                                                   â”‚
â”‚      User Chat â†’ Auth Check â†’ RAG Search â†’ MCP GLPI (si permis)  â”‚
â”‚          â”‚                        â”‚              â”‚                â”‚
â”‚          â”‚                        â–¼              â–¼                â”‚
â”‚          â”‚                   Vector DB      GLPI API              â”‚
â”‚          â”‚                        â”‚              â”‚                â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â–º Response  â”‚
â”‚                                                                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                   â”‚
â”‚  [2] Proactif - Flux Ã‰vÃ©nementiel (Webhook)                      â”‚
â”‚                                                                   â”‚
â”‚      Observium Alert â†’ Pre-Filter â†’ Sentinel Agent               â”‚
â”‚          â”‚                â”‚              â”‚                        â”‚
â”‚          â”‚                â–¼              â–¼                        â”‚
â”‚          â”‚          Filter Log    MCP Observium                  â”‚
â”‚          â”‚                          MCP Phibee                    â”‚
â”‚          â”‚                          MCP GLPI                      â”‚
â”‚          â”‚                              â”‚                         â”‚
â”‚          â”‚                              â–¼                         â”‚
â”‚          â”‚                        Diagnostic JSON                 â”‚
â”‚          â”‚                              â”‚                         â”‚
â”‚          â”‚                              â–¼                         â”‚
â”‚          â”‚                     Notificateur Agent                 â”‚
â”‚          â”‚                              â”‚                         â”‚
â”‚          â”‚                         MCP GLPI                       â”‚
â”‚          â”‚                         MCP SMTP                       â”‚
â”‚          â”‚                              â”‚                         â”‚
â”‚          â”‚                              â–¼                         â”‚
â”‚          â”‚                       Tickets + Emails                 â”‚
â”‚          â”‚                              â”‚                         â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â–º PostgreSQL Log     â”‚
â”‚                                                                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                   â”‚
â”‚  [3] Assist - Flux Polling (Schedule)                            â”‚
â”‚                                                                   â”‚
â”‚      Cron 3min â†’ Agent Support â†’ MCP GLPI (search)               â”‚
â”‚                        â”‚              â”‚                           â”‚
â”‚                        â”‚              â–¼                           â”‚
â”‚                        â”‚         New Tickets                      â”‚
â”‚                        â”‚              â”‚                           â”‚
â”‚                        â”‚              â–¼                           â”‚
â”‚                        â”‚      Pour chaque ticket:                 â”‚
â”‚                        â”‚              â”‚                           â”‚
â”‚                        â”‚              â–¼                           â”‚
â”‚                        â”‚      Classification                      â”‚
â”‚                        â”‚              â”‚                           â”‚
â”‚                        â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚                        â”‚    â”‚                   â”‚       â”‚        â”‚
â”‚                        â”‚  RESET            DEBLOCAGE  AUTRE       â”‚
â”‚                        â”‚    â”‚                   â”‚       â”‚        â”‚
â”‚                        â”‚    â–¼                   â–¼       â–¼        â”‚
â”‚                        â”‚  MCP AD            MCP AD   Escalade    â”‚
â”‚                        â”‚  MCP MySecret      MCP GLPI             â”‚
â”‚                        â”‚  MCP SMTP          â””â”€â”€â”€â”¬â”€â”€â”€â”˜            â”‚
â”‚                        â”‚  MCP GLPI              â”‚                â”‚
â”‚                        â”‚    â”‚                   â”‚                â”‚
â”‚                        â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                        â”‚              â”‚                           â”‚
â”‚                        â”‚              â–¼                           â”‚
â”‚                        â”‚       RÃ©sumÃ© JSON                        â”‚
â”‚                        â”‚              â”‚                           â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â–º PostgreSQL Log       â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“Š VolumÃ©trie des Flux

| Workflow | Trigger | FrÃ©quence | Volume / jour | DonnÃ©es / exÃ©cution |
|----------|---------|-----------|---------------|---------------------|
| WIBOT | Ã€ la demande | Variable | 50-100 requÃªtes | 2-10 KB |
| Proactif | Webhook | Ã‰vÃ©nementiel | 50-100 alertes | 20-50 KB |
| Assist | Schedule | Toutes les 3 min | 480 cycles | 1-100 KB |

### ğŸ”„ Patterns de Communication

#### Pattern 1 : Request-Response (WIBOT)

```
User â†’ n8n Agent â†’ MCP Client â†’ Hub MCP â†’ MCP Impl â†’ API â†’ Response
   â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

**CaractÃ©ristiques** :
- Synchrone
- Latence : 2-5 secondes
- Stateful (mÃ©moire conversation)

#### Pattern 2 : Event-Driven (Proactif)

```
Observium â†’ Webhook â†’ Immediate Response (Accepted)
                 â†“
          Async Processing
                 â†“
          Agent Sentinel â†’ MCP Tools â†’ Diagnostic
                 â†“
          Agent Notificateur â†’ MCP Tools â†’ Actions
                 â†“
          PostgreSQL Log
```

**CaractÃ©ristiques** :
- Asynchrone (fire-and-forget)
- Latence : 30-45 secondes (processing)
- Stateless (chaque alerte indÃ©pendante)

#### Pattern 3 : Polling (Assist)

```
Cron Trigger â†’ Agent â†’ MCP GLPI (search) â†’ Tickets
                 â†“
          Process Each Ticket
                 â†“
          MCP Tools (selon catÃ©gorie)
                 â†“
          PostgreSQL Log
                 â†“
          Sleep 3 minutes
                 â†“
          Repeat
```

**CaractÃ©ristiques** :
- PÃ©riodique (3 minutes)
- Latence : 30-60 secondes par cycle
- Stateful (mÃ©moire journaliÃ¨re)

---

## 9. MÃ©triques & Performances

### ğŸ“Š Objectifs de Performance

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 OBJECTIFS DE PERFORMANCE                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Workflow          â”‚ Latence Cible â”‚ Taux SuccÃ¨s â”‚ Volume  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚  WIBOT_v1          â”‚    < 5s       â”‚    > 90%    â”‚  50-100 â”‚
â”‚  Proactif_v6       â”‚    < 45s      â”‚    > 85%    â”‚  50-100 â”‚
â”‚  Assist_v2         â”‚    < 60s      â”‚    > 95%    â”‚  8000/anâ”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ¯ MÃ©triques ClÃ©s par Workflow

#### WIBOT_v1

| MÃ©trique | Valeur Actuelle | Objectif | Statut |
|----------|----------------|----------|--------|
| Latence moyenne | 3-4s | < 5s | âœ… Atteint |
| Taux de rÃ©ussite RAG | ~85% | > 80% | âœ… Atteint |
| PrÃ©cision rÃ©ponses | ~90% | > 85% | âœ… Atteint |
| Refus d'accÃ¨s | ~5% | < 10% | âœ… Normal |

#### Proactif_v6

| MÃ©trique | Valeur Actuelle | Objectif | Statut |
|----------|----------------|----------|--------|
| Latence totale | 35-40s | < 45s | âœ… Atteint |
| Sentinel duration | 15-18s | < 20s | âœ… Atteint |
| Notificateur duration | 10-12s | < 15s | âœ… Atteint |
| Taux diagnostic auto | ~80% | > 75% | âœ… Atteint |
| Taux crÃ©ation ticket | ~95% | > 90% | âœ… Atteint |
| Taux envoi email | ~98% | > 95% | âœ… Atteint |
| Alertes filtrÃ©es | ~30% | 20-40% | âœ… Normal |

#### Assist_v2

| MÃ©trique | Valeur Actuelle | Objectif | Statut |
|----------|----------------|----------|--------|
| DurÃ©e cycle moyen | 40-50s | < 60s | âœ… Atteint |
| Taux automatisation | ~40% | > 35% | âœ… Atteint |
| Taux rÃ©ussite | ~95% | > 90% | âœ… Atteint |
| Tickets/jour | 55 | Variable | â„¹ï¸ Info |
| Reset MDP auto | ~60% | > 50% | âœ… Atteint |

### ğŸ† Impact Business

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     IMPACT BUSINESS 2024                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Tickets automatisÃ©s (Assist) :       8 000 / an           â”‚
â”‚  Temps gagnÃ© par ticket :             5 min                â”‚
â”‚  Total temps gagnÃ© :                  666 heures / an       â”‚
â”‚  Ã‰quivalent :                         83 jours travail      â”‚
â”‚                                                             â”‚
â”‚  Alertes traitÃ©es (Proactif) :       ~25 000 / an          â”‚
â”‚  Tickets crÃ©Ã©s automatiquement :     ~20 000 / an          â”‚
â”‚  Temps gagnÃ© par alerte :            10 min                â”‚
â”‚  Total temps gagnÃ© :                  4 166 heures / an     â”‚
â”‚  Ã‰quivalent :                         520 jours travail     â”‚
â”‚                                                             â”‚
â”‚  RequÃªtes WIBOT :                     ~20 000 / an          â”‚
â”‚  RÃ©ponses instantanÃ©es :              90%                   â”‚
â”‚  Satisfaction utilisateurs :          85%                   â”‚
â”‚                                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                             â”‚
â”‚  TOTAL TEMPS GAGNÃ‰ :                  4 832 heures / an     â”‚
â”‚  Ã‰QUIVALENT :                         604 jours travail     â”‚
â”‚  COÃ›T Ã‰VITÃ‰ (40â‚¬/h) :                 193 280 â‚¬ / an       â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“ˆ Ã‰volution & Optimisations

**v6 Optimizations (Claude)** :
- âœ… Pre-filtering alertes (gain 30% rÃ©duction volume)
- âœ… Cache diagnostics (gain ~15s par alerte)
- âœ… Few-shot learning (gain prÃ©cision +10%)
- âœ… Timeout management (rÃ©duction Ã©checs 20%)
- âœ… MÃ©triques granulaires (observabilitÃ© +100%)

**Prochaines Optimisations** :
- ğŸ”œ Redis caching (gain 20-30% latence)
- ğŸ”œ Embeddings locaux (rÃ©duction coÃ»t API)
- ğŸ”œ Fine-tuning modÃ¨les locaux (prÃ©cision +5%)
- ğŸ”œ Auto-scaling MCP services (haute disponibilitÃ©)

---

## ğŸ“ Conclusion

L'architecture WIDIP reprÃ©sente un systÃ¨me d'automatisation IA mature et scalable avec :

### âœ¨ Points Forts

1. **Architecture Hub-and-Spoke** : Centralisation via MCP Global
2. **Local-First** : SouverainetÃ© donnÃ©es (RGPD compliant)
3. **Multi-Agent** : 4 agents IA spÃ©cialisÃ©s
4. **Fail-Safe** : Graceful degradation Ã  chaque niveau
5. **Observable** : MÃ©triques complÃ¨tes et logging

### ğŸ¯ RÃ©sultats

- **~600 jours de travail Ã©conomisÃ©s / an**
- **~40% des tickets automatisÃ©s**
- **~80% des alertes diagnostiquÃ©es automatiquement**
- **< 45s de latence pour traitement proactif**

### ğŸš€ Vision Future

- Migration complÃ¨te vers LLMs locaux (Qwen, Mistral)
- RÃ©duction coÃ»ts API (embeddings, Claude)
- Fine-tuning sur donnÃ©es mÃ©tier WIDIP
- Expansion vers d'autres cas d'usage (facturation, monitoring avancÃ©)

---

**Document gÃ©nÃ©rÃ© le** : 27 Novembre 2025  
**Version** : 1.0  
**Pour** : Maxime RIPOUTEAU
**Licence** : Apache 2.0
