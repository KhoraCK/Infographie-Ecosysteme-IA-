# ğŸ—ï¸ Architecture WIDIP - Automatisation IA des OpÃ©rations IT

> **Version** : 3.0  
> **Date** : DÃ©cembre 2025  
> **Auteur** : Documentation technique WIDIP  
> **Statut** : PrÃªt pour production

---

## ğŸ“‹ Table des matiÃ¨res

1. [Contexte et vision](#1-contexte-et-vision)
2. [Vue d'ensemble de l'architecture](#2-vue-densemble-de-larchitecture)
3. [Les deux workflows principaux](#3-les-deux-workflows-principaux)
4. [SystÃ¨me MCP : le cerveau des connexions](#4-systÃ¨me-mcp--le-cerveau-des-connexions)
5. [Redis : mÃ©moire partagÃ©e et synchronisation](#5-redis--mÃ©moire-partagÃ©e-et-synchronisation)
6. [Flux dÃ©taillÃ©s avec schÃ©mas](#6-flux-dÃ©taillÃ©s-avec-schÃ©mas)
7. [Credentials et sÃ©curitÃ©](#7-credentials-et-sÃ©curitÃ©)
8. [DÃ©ploiement et configuration](#8-dÃ©ploiement-et-configuration)
9. [Annexes techniques](#9-annexes-techniques)

---

## 1. Contexte et vision

### 1.1 Qui est WIDIP ?

**WIDIP** est une entreprise d'hÃ©bergement de donnÃ©es spÃ©cialisÃ©e dans le secteur **mÃ©dico-social**. Elle accompagne plus de **800 Ã©tablissements** (EHPAD, cliniques, associations, structures d'accueil) dans la gestion de leur infrastructure IT.

### 1.2 Le dÃ©fi opÃ©rationnel

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    VOLUME ANNUEL WIDIP                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š ~20 000 tickets de support / an                             â”‚
â”‚  ğŸ¥ 800+ Ã©tablissements clients                                 â”‚
â”‚  ğŸŒ Infrastructure rÃ©seau distribuÃ©e                            â”‚
â”‚  â° Support 24/7 requis pour le secteur santÃ©                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ProblÃ©matiques identifiÃ©es** :
- Alertes rÃ©seau nombreuses, souvent rÃ©pÃ©titives
- Temps de diagnostic manuel important
- Tickets de support nÃ©cessitant des actions standardisÃ©es
- Besoin de rÃ©activitÃ© pour le secteur mÃ©dico-social

### 1.3 La solution : automatisation par IA

L'architecture WIDIP utilise des **agents IA autonomes** capables de :

| CapacitÃ© | Description |
|----------|-------------|
| ğŸ” **Diagnostiquer** | Analyser automatiquement les alertes rÃ©seau |
| ğŸ« **CrÃ©er des tickets** | Ouvrir des tickets GLPI enrichis |
| ğŸ“§ **Notifier** | Envoyer des emails contextualisÃ©s |
| ğŸ”§ **Agir** | RÃ©initialiser mots de passe, dÃ©bloquer comptes |
| ğŸ“Š **Prioriser** | Trier les incidents par criticitÃ© |

---

## 2. Vue d'ensemble de l'architecture

### 2.1 SchÃ©ma global

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                        ARCHITECTURE WIDIP - VUE GLOBALE                       â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                              â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â•‘
â•‘   â”‚   OBSERVIUM     â”‚         â”‚     GLPI        â”‚                           â•‘
â•‘   â”‚  (Monitoring)   â”‚         â”‚   (Tickets)     â”‚                           â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â•‘
â•‘            â”‚ Webhooks                   â”‚ API REST                          â•‘
â•‘            â–¼                            â–¼                                    â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â•‘
â•‘   â”‚                         n8n                                 â”‚            â•‘
â•‘   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚            â•‘
â•‘   â”‚  â”‚  ğŸš¨ PROACTIF v8  â”‚    â”‚  ğŸ« ASSIST v4    â”‚              â”‚            â•‘
â•‘   â”‚  â”‚  (Alertes rÃ©seau)â”‚    â”‚  (Tickets support)â”‚             â”‚            â•‘
â•‘   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚            â•‘
â•‘   â”‚           â”‚                       â”‚                         â”‚            â•‘
â•‘   â”‚           â–¼                       â–¼                         â”‚            â•‘
â•‘   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚            â•‘
â•‘   â”‚  â”‚           ğŸ”§ MCP SERVEUR GLOBAL             â”‚           â”‚            â•‘
â•‘   â”‚  â”‚  (Concentrateur de tous les outils IA)      â”‚           â”‚            â•‘
â•‘   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚            â•‘
â•‘   â”‚                     â”‚                                       â”‚            â•‘
â•‘   â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”              â”‚            â•‘
â•‘   â”‚     â–¼       â–¼       â–¼       â–¼       â–¼       â–¼              â”‚            â•‘
â•‘   â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”          â”‚            â•‘
â•‘   â”‚  â”‚GLPI â”‚ â”‚Obserâ”‚ â”‚Phibeâ”‚ â”‚SMTP â”‚ â”‚ AD  â”‚ â”‚MySecâ”‚          â”‚            â•‘
â•‘   â”‚  â”‚ MCP â”‚ â”‚vium â”‚ â”‚e MCPâ”‚ â”‚ MCP â”‚ â”‚ MCP â”‚ â”‚ MCP â”‚          â”‚            â•‘
â•‘   â”‚  â””â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”˜          â”‚            â•‘
â•‘   â”‚     â”‚       â”‚       â”‚       â”‚       â”‚       â”‚              â”‚            â•‘
â•‘   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚            â•‘
â•‘   â”‚  â”‚              ğŸ—„ï¸ REDIS HELPER v2.2            â”‚          â”‚            â•‘
â•‘   â”‚  â”‚      (Cache, Mutex, Circuit Breaker)         â”‚          â”‚            â•‘
â•‘   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚            â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â•‘
â•‘            â”‚       â”‚       â”‚       â”‚       â”‚       â”‚                        â•‘
â•‘            â–¼       â–¼       â–¼       â–¼       â–¼       â–¼                        â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â•‘
â•‘   â”‚                    SERVICES EXTERNES                         â”‚           â•‘
â•‘   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚           â•‘
â•‘   â”‚  â”‚ GLPI â”‚ â”‚Observ. â”‚ â”‚Phibee â”‚ â”‚ SMTP â”‚ â”‚ AD â”‚ â”‚MySecretâ”‚  â”‚           â•‘
â•‘   â”‚  â”‚ API  â”‚ â”‚  API   â”‚ â”‚  API  â”‚ â”‚Serverâ”‚ â”‚ DC â”‚ â”‚  API   â”‚  â”‚           â•‘
â•‘   â”‚  â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚           â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â•‘
â•‘                                                                              â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â•‘
â•‘   â”‚  ğŸ¤– OLLAMA (LLM Local)                                      â”‚           â•‘
â•‘   â”‚  ModÃ¨les: Mistral 7B, Qwen3 Coder 30B                       â”‚           â•‘
â•‘   â”‚  GPU: NVIDIA L40S                                           â”‚           â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â•‘
â•‘                                                                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### 2.2 Les couches de l'architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  COUCHE 1 : SOURCES D'Ã‰VÃ‰NEMENTS                               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚  â€¢ Observium (webhooks alertes rÃ©seau)                         â”‚
â”‚  â€¢ GLPI (nouveaux tickets via polling)                         â”‚
â”‚  â€¢ Emails entrants (si configurÃ©)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  COUCHE 2 : WORKFLOWS ORCHESTRATEURS                           â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚  â€¢ Proactif v8 : traite les alertes rÃ©seau                     â”‚
â”‚  â€¢ Assist v4 : traite les tickets support                      â”‚
â”‚  â€¢ Health Check v2 : surveille l'Ã©tat de GLPI                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  COUCHE 3 : AGENTS IA (LangChain)                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚  â€¢ Sentinel : diagnostique les pannes                          â”‚
â”‚  â€¢ Notificateur : rÃ©dige les communications                    â”‚
â”‚  â€¢ Assist Agent : traite les demandes support                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  COUCHE 4 : MCP (MODEL CONTEXT PROTOCOL)                       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚  â€¢ MCP Serveur Global : expose les outils aux agents           â”‚
â”‚  â€¢ Sub-workflows MCP : implÃ©mentent chaque outil               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  COUCHE 5 : SERVICES EXTERNES                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚  â€¢ APIs : GLPI, Observium, Phibee Telecom                      â”‚
â”‚  â€¢ Protocoles : SMTP, SSH (Active Directory)                   â”‚
â”‚  â€¢ Services : MySecret (liens sÃ©curisÃ©s)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  COUCHE 6 : INFRASTRUCTURE PARTAGÃ‰E                            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚  â€¢ Redis : cache, mutex, circuit breaker                       â”‚
â”‚  â€¢ Ollama : infÃ©rence LLM locale                               â”‚
â”‚  â€¢ PostgreSQL : donnÃ©es n8n                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. Les deux workflows principaux

### 3.1 ğŸš¨ Proactif v8 - Gestion des alertes rÃ©seau

**Mission** : Transformer une alerte Observium brute en action concrÃ¨te (ticket GLPI + notification).

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         PROACTIF v8 - FLUX COMPLET                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   OBSERVIUM                                                          TECHNICIEN
      â”‚                                                                    â”‚
      â”‚  Webhook: "Device EHPAD-Bellevue-RTR01 is DOWN"                   â”‚
      â”‚                                                                    â”‚
      â–¼                                                                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                          â”‚
â”‚   WEBHOOK    â”‚  RÃ©ception alerte                                        â”‚
â”‚   TRIGGER    â”‚  POST /webhook/proactif-observium                        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                          â”‚
       â”‚                                                                   â”‚
       â–¼                                                                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                          â”‚
â”‚  PRE-FILTER  â”‚  Filtrage: doublons, alertes ignorÃ©es                    â”‚
â”‚              â”‚  â†’ Ã‰vite de traiter la mÃªme alerte 10 fois              â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                          â”‚
       â”‚                                                                   â”‚
       â–¼                                                                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚ CACHE CHECK  â”‚â”€â”€â”€â”€â–¶â”‚ Redis: GET phibee_diag_{device}    â”‚              â”‚
â”‚   (Redis)    â”‚â—€â”€â”€â”€â”€â”‚ â†’ RÃ©utilise diagnostic si < 20min  â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
       â”‚                                                                   â”‚
       â–¼                                                                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚ GLPI HEALTH  â”‚â”€â”€â”€â”€â–¶â”‚ Redis: GET glpi_health_status      â”‚              â”‚
â”‚   CHECK      â”‚     â”‚ â†’ Si "down", skip le cycle         â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
       â”‚                                                                   â”‚
       â”‚ GLPI OK ?                                                        â”‚
       â”‚                                                                   â”‚
       â–¼                                                                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚ ACQUIRE LOCK â”‚â”€â”€â”€â”€â–¶â”‚ Redis: SETNX llm_mutex             â”‚              â”‚
â”‚  (Sentinel)  â”‚     â”‚ â†’ Attend si LLM dÃ©jÃ  utilisÃ©       â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
       â”‚                                                                   â”‚
       â–¼                                                                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚                 ğŸ¤– AGENT SENTINEL                         â”‚              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚              â”‚
â”‚  ModÃ¨le: Qwen 2.5 14B via Ollama                         â”‚              â”‚
â”‚                                                          â”‚              â”‚
â”‚  Mission: Diagnostiquer la panne                         â”‚              â”‚
â”‚                                                          â”‚              â”‚
â”‚  Outils MCP disponibles:                                 â”‚              â”‚
â”‚  â€¢ Observium: get_device_status, get_device_history     â”‚              â”‚
â”‚  â€¢ Phibee: diagnose_outage, test_link_status            â”‚              â”‚
â”‚  â€¢ GLPI: search_client, create_ticket                   â”‚              â”‚
â”‚                                                          â”‚              â”‚
â”‚  Output: {                                               â”‚              â”‚
â”‚    responsibility: "phibee_fai" | "router_client",       â”‚              â”‚
â”‚    diagnosis: "Le lien fibre est down cÃ´tÃ© FAI",         â”‚              â”‚
â”‚    recommended_action: "Ouvrir ticket Phibee",           â”‚              â”‚
â”‚    client_info: { name, entity_id, contact }             â”‚              â”‚
â”‚  }                                                       â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
       â”‚                                                                   â”‚
       â–¼                                                                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                          â”‚
â”‚RELEASE LOCK  â”‚  LibÃ¨re le mutex pour le prochain                        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                          â”‚
       â”‚                                                                   â”‚
       â–¼                                                                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚ ACQUIRE LOCK â”‚â”€â”€â”€â”€â–¶â”‚ Redis: SETNX llm_mutex             â”‚              â”‚
â”‚(Notificateur)â”‚     â”‚ â†’ Nouveau lock pour phase 2        â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
       â”‚                                                                   â”‚
       â–¼                                                                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚              ğŸ¤– AGENT NOTIFICATEUR                        â”‚              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚              â”‚
â”‚  ModÃ¨le: Qwen 2.5 14B via Ollama                         â”‚              â”‚
â”‚                                                          â”‚              â”‚
â”‚  Mission: CrÃ©er le ticket et notifier                    â”‚              â”‚
â”‚                                                          â”‚              â”‚
â”‚  Outils MCP disponibles:                                 â”‚              â”‚
â”‚  â€¢ GLPI: create_ticket, add_followup                    â”‚              â”‚
â”‚  â€¢ SMTP: send_email, send_template_email                â”‚              â”‚
â”‚                                                          â”‚              â”‚
â”‚  Actions:                                                â”‚              â”‚
â”‚  1. CrÃ©e ticket GLPI avec diagnostic enrichi            â”‚              â”‚
â”‚  2. Envoie email au technicien d'astreinte              â”‚              â”‚
â”‚  3. Si critique: notifie le superviseur                 â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
       â”‚                                                                   â”‚
       â–¼                                                                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                          â”‚
â”‚RELEASE LOCK  â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                          â”‚
       â”‚                                                                   â”‚
       â–¼                                                                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                          â”‚
â”‚  SAVE CACHE  â”‚  Redis: SET diagnostic pour 20min                        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                          â”‚
       â”‚                                                                   â”‚
       â–¼                                                                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”
â”‚     LOG      â”‚  Trace complÃ¨te dans les exÃ©cutions n8n     â”‚  ğŸ“§ EMAIL     â”‚
â”‚   RESULTS    â”‚                                              â”‚  ğŸ“‹ TICKET    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚  âœ… TRAITÃ‰    â”‚
                                                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 ğŸ« Assist v4 - Gestion des tickets support

**Mission** : Traiter automatiquement les tickets de support (crÃ©ation comptes, reset MDP, etc.)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ASSIST v4 - FLUX COMPLET                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   GLPI                                                              UTILISATEUR
     â”‚                                                                    â”‚
     â”‚  Nouveau ticket: "CrÃ©ation compte pour Marie Dupont"              â”‚
     â”‚                                                                    â”‚
     â–¼                                                                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                          â”‚
â”‚   SCHEDULE   â”‚  Polling toutes les 3 minutes                           â”‚
â”‚   TRIGGER    â”‚  (pas de webhook GLPI â†’ on interroge)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                          â”‚
       â”‚                                                                   â”‚
       â–¼                                                                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚ GLPI HEALTH  â”‚â”€â”€â”€â”€â–¶â”‚ Redis: GET glpi_health_status      â”‚              â”‚
â”‚    CHECK     â”‚     â”‚ â†’ Si "down", skip le cycle         â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
       â”‚                                                                   â”‚
       â”‚ GLPI OK ?                                                        â”‚
       â”‚                                                                   â”‚
       â–¼                                                                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                          â”‚
â”‚ SEARCH NEW   â”‚  Via MCP GLPI: search_new_tickets                       â”‚
â”‚   TICKETS    â”‚  â†’ RÃ©cupÃ¨re tickets status=1 (Nouveau)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                          â”‚
       â”‚                                                                   â”‚
       â”‚ Tickets trouvÃ©s ?                                                â”‚
       â”‚                                                                   â”‚
       â–¼                                                                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚ ACQUIRE LOCK â”‚â”€â”€â”€â”€â–¶â”‚ Redis: SETNX llm_mutex             â”‚              â”‚
â”‚              â”‚     â”‚ â†’ Un seul agent Ã  la fois           â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
       â”‚                                                                   â”‚
       â–¼                                                                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚                  ğŸ¤– AGENT ASSIST                          â”‚              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚              â”‚
â”‚  ModÃ¨le: Mistral 7B via Ollama                           â”‚              â”‚
â”‚                                                          â”‚              â”‚
â”‚  Mission: Traiter la demande de support                  â”‚              â”‚
â”‚                                                          â”‚              â”‚
â”‚  Outils MCP disponibles:                                 â”‚              â”‚
â”‚  â€¢ GLPI: get_ticket_details, add_followup, close_ticket â”‚              â”‚
â”‚  â€¢ Active Directory: check_user, reset_password,        â”‚              â”‚
â”‚                      unlock_account, get_user_info      â”‚              â”‚
â”‚  â€¢ MySecret: create_secret (liens MDP sÃ©curisÃ©s)        â”‚              â”‚
â”‚  â€¢ SMTP: send_email                                     â”‚              â”‚
â”‚                                                          â”‚              â”‚
â”‚  Exemple de raisonnement:                                â”‚              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                              â”‚              â”‚
â”‚  1. "Je lis le ticket: crÃ©ation compte Marie Dupont"    â”‚              â”‚
â”‚  2. "Je vÃ©rifie si le compte existe dÃ©jÃ  dans AD"       â”‚              â”‚
â”‚     â†’ AD.check_user(username="mdupont")                 â”‚              â”‚
â”‚  3. "Le compte n'existe pas, je le crÃ©e"                â”‚              â”‚
â”‚     â†’ AD.create_user(...) [si implÃ©mentÃ©]               â”‚              â”‚
â”‚  4. "Je gÃ©nÃ¨re un mot de passe temporaire"              â”‚              â”‚
â”‚     â†’ AD.reset_password(username="mdupont")             â”‚              â”‚
â”‚  5. "Je crÃ©e un lien sÃ©curisÃ© pour le MDP"              â”‚              â”‚
â”‚     â†’ MySecret.create_secret(password)                  â”‚              â”‚
â”‚  6. "J'envoie l'email avec le lien"                     â”‚              â”‚
â”‚     â†’ SMTP.send_email(to=demandeur, body=lien)          â”‚              â”‚
â”‚  7. "Je ferme le ticket avec la solution"               â”‚              â”‚
â”‚     â†’ GLPI.close_ticket(ticket_id, solution)            â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
       â”‚                                                                   â”‚
       â–¼                                                                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                          â”‚
â”‚RELEASE LOCK  â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                          â”‚
       â”‚                                                                   â”‚
       â–¼                                                                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                          â”‚
â”‚    PARSE     â”‚  Extraction rÃ©sultat: ticket_id, actions, status        â”‚
â”‚   RESPONSE   â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                          â”‚
       â”‚                                                                   â”‚
       â–¼                                                                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”
â”‚     LOG      â”‚  Trace exÃ©cution + mÃ©triques                â”‚  ğŸ“§ EMAIL     â”‚
â”‚   RESULTS    â”‚                                              â”‚  ğŸ”‘ COMPTE    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚  âœ… RÃ‰SOLU    â”‚
                                                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. SystÃ¨me MCP : le cerveau des connexions

### 4.1 Qu'est-ce que MCP ?

**MCP (Model Context Protocol)** est un standard qui permet aux agents IA d'utiliser des "outils" externes de maniÃ¨re structurÃ©e.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ANALOGIE : MCP = BOÃTE Ã€ OUTILS                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  L'agent IA est comme un technicien qui a accÃ¨s Ã  une boÃ®te Ã  outils.
  
  Chaque outil (MCP) a :
  â€¢ Un NOM : "create_ticket", "reset_password", "send_email"
  â€¢ Une DESCRIPTION : ce qu'il fait
  â€¢ Des PARAMÃˆTRES : ce qu'il attend en entrÃ©e
  â€¢ Un RÃ‰SULTAT : ce qu'il retourne

  L'agent CHOISIT quel outil utiliser en fonction de la tÃ¢che.
  
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Agent: "Je dois crÃ©er un ticket GLPI pour cette alerte"            â”‚
  â”‚                                                                      â”‚
  â”‚  â†’ Regarde sa boÃ®te Ã  outils                                        â”‚
  â”‚  â†’ Trouve "GLPI.create_ticket"                                      â”‚
  â”‚  â†’ L'utilise avec les bons paramÃ¨tres                               â”‚
  â”‚  â†’ RÃ©cupÃ¨re le rÃ©sultat (ticket_id)                                 â”‚
  â”‚  â†’ Continue son raisonnement                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 Architecture MCP dans n8n

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ARCHITECTURE MCP n8n                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                        WORKFLOW PROACTIF v8                              â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚                      AGENT SENTINEL                                â”‚  â”‚
  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
  â”‚  â”‚  â”‚  MCP Client      MCP Client      MCP Client      MCP Client â”‚  â”‚  â”‚
  â”‚  â”‚  â”‚  (Observium)     (Phibee)        (GLPI)          (SMTP)     â”‚  â”‚  â”‚
  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚             â”‚              â”‚              â”‚              â”‚              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚              â”‚              â”‚              â”‚
                â”‚    Connexion SSE (Server-Sent Events)      â”‚
                â”‚              â”‚              â”‚              â”‚
                â–¼              â–¼              â–¼              â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                      MCP SERVEUR GLOBAL v6                               â”‚
  â”‚                                                                          â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
  â”‚  â”‚MCP Trigger â”‚ â”‚MCP Trigger â”‚ â”‚MCP Trigger â”‚ â”‚MCP Trigger â”‚ ...        â”‚
  â”‚  â”‚ Observium  â”‚ â”‚  Phibee    â”‚ â”‚   GLPI     â”‚ â”‚   SMTP     â”‚            â”‚
  â”‚  â”‚ :8668/mcp- â”‚ â”‚ :8669/mcp- â”‚ â”‚ :8670/mcp- â”‚ â”‚ :8671/mcp- â”‚            â”‚
  â”‚  â”‚ observium  â”‚ â”‚  phibee    â”‚ â”‚ glpi-serverâ”‚ â”‚   email    â”‚            â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜            â”‚
  â”‚        â”‚              â”‚              â”‚              â”‚                   â”‚
  â”‚        â”‚    Tool Workflow (Execute Sub-Workflow)    â”‚                   â”‚
  â”‚        â–¼              â–¼              â–¼              â–¼                   â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
  â”‚  â”‚   Call     â”‚ â”‚   Call     â”‚ â”‚   Call     â”‚ â”‚   Call     â”‚            â”‚
  â”‚  â”‚   MCP      â”‚ â”‚   MCP      â”‚ â”‚   MCP      â”‚ â”‚   MCP      â”‚            â”‚
  â”‚  â”‚ Observium  â”‚ â”‚  Phibee    â”‚ â”‚   GLPI     â”‚ â”‚   SMTP     â”‚            â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜            â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚              â”‚              â”‚              â”‚
           â”‚    Execute Sub-Workflow     â”‚              â”‚
           â–¼              â–¼              â–¼              â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚    MCP     â”‚  â”‚    MCP     â”‚  â”‚    MCP     â”‚  â”‚    MCP     â”‚
  â”‚ Observium  â”‚  â”‚  Phibee    â”‚  â”‚   GLPI     â”‚  â”‚   SMTP     â”‚
  â”‚    v5      â”‚  â”‚    v5      â”‚  â”‚    v6      â”‚  â”‚    v5      â”‚
  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
        â”‚               â”‚               â”‚               â”‚
        â”‚         HTTP Requests         â”‚               â”‚
        â–¼               â–¼               â–¼               â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Observium  â”‚  â”‚  Phibee    â”‚  â”‚   GLPI     â”‚  â”‚   SMTP     â”‚
  â”‚    API     â”‚  â”‚    API     â”‚  â”‚    API     â”‚  â”‚  Server    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3 DÃ©tail des MCP disponibles

#### ğŸ“Š MCP Observium (Monitoring rÃ©seau)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MCP OBSERVIUM v5                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Endpoint: /webhook/mcp-observium                               â”‚
â”‚  Credential: HTTP Header Auth (API Key Observium)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  OPÃ‰RATIONS:                                                    â”‚
â”‚                                                                 â”‚
â”‚  get_device_status                                              â”‚
â”‚  â”œâ”€ Input: device_name                                          â”‚
â”‚  â””â”€ Output: {status, uptime, ip, location, last_polled}        â”‚
â”‚                                                                 â”‚
â”‚  get_device_metrics                                             â”‚
â”‚  â”œâ”€ Input: device_name                                          â”‚
â”‚  â””â”€ Output: {cpu, memory, ports[], traffic}                    â”‚
â”‚                                                                 â”‚
â”‚  get_device_alerts                                              â”‚
â”‚  â”œâ”€ Input: device_name                                          â”‚
â”‚  â””â”€ Output: {alerts[], severity_summary}                       â”‚
â”‚                                                                 â”‚
â”‚  get_device_history                                             â”‚
â”‚  â”œâ”€ Input: device_name, hours                                   â”‚
â”‚  â””â”€ Output: {events[], downtime_minutes, stability}            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ğŸ“ MCP Phibee Telecom (FAI diagnostic)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MCP PHIBEE TELECOM v5                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Endpoint: /webhook/mcp-phibee                                  â”‚
â”‚  Credential: HTTP Header Auth (API Key Phibee)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  OPÃ‰RATIONS:                                                    â”‚
â”‚                                                                 â”‚
â”‚  diagnose_outage  â­ PRINCIPALE                                 â”‚
â”‚  â”œâ”€ Input: client_id, ip_address, device_name                   â”‚
â”‚  â””â”€ Output: {                                                   â”‚
â”‚       responsibility: "phibee_fai" | "router_client" | "power", â”‚
â”‚       diagnosis: "Description du problÃ¨me",                     â”‚
â”‚       recommendation: "Action Ã  entreprendre",                  â”‚
â”‚       ticket_action: "create_phibee_ticket" | "widip_interv"   â”‚
â”‚     }                                                           â”‚
â”‚                                                                 â”‚
â”‚  test_link_status                                               â”‚
â”‚  â”œâ”€ Input: client_id, ip_address                                â”‚
â”‚  â””â”€ Output: {link_up, signal_level, last_seen}                 â”‚
â”‚                                                                 â”‚
â”‚  get_link_info                                                  â”‚
â”‚  â”œâ”€ Input: client_id                                            â”‚
â”‚  â””â”€ Output: {type, debit, contrat, support_contact}            â”‚
â”‚                                                                 â”‚
â”‚  get_client_incidents                                           â”‚
â”‚  â”œâ”€ Input: client_id                                            â”‚
â”‚  â””â”€ Output: {incidents[], ongoing_count}                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ğŸ« MCP GLPI (Gestion tickets)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MCP GLPI v6                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Endpoint: /webhook/mcp-glpi-server                             â”‚
â”‚  Credential: HTTP Header Auth (App-Token + Session-Token)       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  OPÃ‰RATIONS:                                                    â”‚
â”‚                                                                 â”‚
â”‚  search_client                                                  â”‚
â”‚  â”œâ”€ Input: name | email | phone                                 â”‚
â”‚  â””â”€ Output: {users[], entity_id}                               â”‚
â”‚                                                                 â”‚
â”‚  create_ticket                                                  â”‚
â”‚  â”œâ”€ Input: title, description, client_name, priority, urgency  â”‚
â”‚  â””â”€ Output: {ticket_id, url}                                   â”‚
â”‚                                                                 â”‚
â”‚  search_new_tickets                                             â”‚
â”‚  â”œâ”€ Input: minutes_since (dÃ©faut 180), limit                    â”‚
â”‚  â””â”€ Output: {tickets[], count}                                 â”‚
â”‚                                                                 â”‚
â”‚  get_ticket_details                                             â”‚
â”‚  â”œâ”€ Input: ticket_id                                            â”‚
â”‚  â””â”€ Output: {id, title, content, status, priority, dates}      â”‚
â”‚                                                                 â”‚
â”‚  add_ticket_followup                                            â”‚
â”‚  â”œâ”€ Input: ticket_id, content, is_private                       â”‚
â”‚  â””â”€ Output: {followup_id}                                      â”‚
â”‚                                                                 â”‚
â”‚  update_ticket_status                                           â”‚
â”‚  â”œâ”€ Input: ticket_id, status (1-6)                              â”‚
â”‚  â””â”€ Output: {new_status}                                       â”‚
â”‚                                                                 â”‚
â”‚  close_ticket                                                   â”‚
â”‚  â”œâ”€ Input: ticket_id, solution                                  â”‚
â”‚  â””â”€ Output: {closed: true, solution_added: true}               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ğŸ“§ MCP SMTP (Emails)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MCP SMTP v5                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Endpoint: /webhook/mcp-email                                   â”‚
â”‚  Credential: SMTP natif n8n                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  OPÃ‰RATIONS:                                                    â”‚
â”‚                                                                 â”‚
â”‚  send_email                                                     â”‚
â”‚  â”œâ”€ Input: to, subject, body, priority, cc                      â”‚
â”‚  â””â”€ Output: {sent: true, sent_at}                              â”‚
â”‚                                                                 â”‚
â”‚  send_template_email                                            â”‚
â”‚  â”œâ”€ Input: to, template, data                                   â”‚
â”‚  â”‚  Templates: ticket_created, client_not_found,                â”‚
â”‚  â”‚             provider_incident, resolution_confirmed          â”‚
â”‚  â””â”€ Output: {sent: true, template_used}                        â”‚
â”‚                                                                 â”‚
â”‚  send_bulk_notification                                         â”‚
â”‚  â”œâ”€ Input: recipient_group, subject, message, priority          â”‚
â”‚  â”‚  Groups: team, managers, admins, all                         â”‚
â”‚  â””â”€ Output: {total_sent, recipients[]}                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ğŸ‘¤ MCP Active Directory (Comptes Windows)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MCP ACTIVE DIRECTORY v1                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Endpoint: /webhook/mcp-ad                                      â”‚
â”‚  Credential: SSH Password (vers Windows Server avec OpenSSH)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  OPÃ‰RATIONS:                                                    â”‚
â”‚                                                                 â”‚
â”‚  check_user                                                     â”‚
â”‚  â”œâ”€ Input: username                                             â”‚
â”‚  â””â”€ Output: {exists, samAccountName, displayName, enabled}     â”‚
â”‚                                                                 â”‚
â”‚  get_user_info                                                  â”‚
â”‚  â”œâ”€ Input: username                                             â”‚
â”‚  â””â”€ Output: {all AD properties: title, department, lastLogon}  â”‚
â”‚                                                                 â”‚
â”‚  reset_password                                                 â”‚
â”‚  â”œâ”€ Input: username                                             â”‚
â”‚  â””â”€ Output: {success, new_password (gÃ©nÃ©rÃ©), username}         â”‚
â”‚  âš ï¸ GÃ©nÃ¨re un mot de passe fort automatiquement                 â”‚
â”‚                                                                 â”‚
â”‚  unlock_account                                                 â”‚
â”‚  â”œâ”€ Input: username                                             â”‚
â”‚  â””â”€ Output: {success, message}                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ğŸ” MCP MySecret (Liens sÃ©curisÃ©s)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MCP MYSECRET v1                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Endpoint: /webhook/mcp-mysecret                                â”‚
â”‚  Credential: Aucun (API publique MySecret)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  OPÃ‰RATIONS:                                                    â”‚
â”‚                                                                 â”‚
â”‚  create_secret                                                  â”‚
â”‚  â”œâ”€ Input: payload (le secret Ã  partager)                       â”‚
â”‚  â”‚         expire_days (dÃ©faut: 7)                              â”‚
â”‚  â”‚         expire_views (dÃ©faut: 5)                             â”‚
â”‚  â””â”€ Output: {                                                   â”‚
â”‚       secret_url: "https://mysecret.widip.fr/p/abc123",         â”‚
â”‚       expires_in_days: 7,                                       â”‚
â”‚       expires_after_views: 5                                    â”‚
â”‚     }                                                           â”‚
â”‚                                                                 â”‚
â”‚  Usage typique:                                                 â”‚
â”‚  1. Agent gÃ©nÃ¨re un mot de passe via AD.reset_password          â”‚
â”‚  2. Agent crÃ©e un lien sÃ©curisÃ© via MySecret.create_secret     â”‚
â”‚  3. Agent envoie le lien par email via SMTP.send_email         â”‚
â”‚  â†’ L'utilisateur reÃ§oit un lien Ã  usage unique                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. Redis : mÃ©moire partagÃ©e et synchronisation

### 5.1 RÃ´le de Redis dans l'architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      REDIS - 3 FONCTIONS ESSENTIELLES                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  1ï¸âƒ£  MUTEX LLM - Ã‰viter les conflits Ollama                            â”‚
  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
  â”‚                                                                          â”‚
  â”‚  ProblÃ¨me: Un seul GPU, plusieurs workflows veulent utiliser le LLM     â”‚
  â”‚                                                                          â”‚
  â”‚     Proactif â”€â”€â”                                                         â”‚
  â”‚                â”œâ”€â”€â–¶ Ollama (1 seul) â”€â”€â–¶ ğŸ’¥ Conflit !                    â”‚
  â”‚     Assist â”€â”€â”€â”€â”˜                                                         â”‚
  â”‚                                                                          â”‚
  â”‚  Solution: Mutex Redis                                                   â”‚
  â”‚                                                                          â”‚
  â”‚     Proactif â”€â”€â–¶ SETNX llm_mutex â”€â”€â–¶ âœ… Lock acquis â”€â”€â–¶ Ollama         â”‚
  â”‚                                                                          â”‚
  â”‚     Assist â”€â”€â”€â”€â–¶ SETNX llm_mutex â”€â”€â–¶ âŒ DÃ©jÃ  pris â”€â”€â–¶ Attend...        â”‚
  â”‚                                      â–²                                   â”‚
  â”‚     Proactif termine â”€â”€â–¶ DELETE llm_mutex                                â”‚
  â”‚                                      â”‚                                   â”‚
  â”‚     Assist â”€â”€â”€â”€â–¶ SETNX llm_mutex â”€â”€â”€â”€â”˜ âœ… Lock acquis â”€â”€â–¶ Ollama       â”‚
  â”‚                                                                          â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  2ï¸âƒ£  CIRCUIT BREAKER GLPI - Ã‰viter les erreurs en cascade              â”‚
  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
  â”‚                                                                          â”‚
  â”‚  ProblÃ¨me: Si GLPI est down, tous les workflows Ã©chouent                â”‚
  â”‚                                                                          â”‚
  â”‚  Solution: Health Check + Flag Redis                                     â”‚
  â”‚                                                                          â”‚
  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                â”‚
  â”‚     â”‚  Health Check    â”‚  Toutes les 30 secondes:                       â”‚
  â”‚     â”‚  GLPI v2         â”‚  1. Ping GLPI API                              â”‚
  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  2. SET glpi_health_status = "ok" ou "down"   â”‚
  â”‚              â”‚                                                          â”‚
  â”‚              â–¼                                                          â”‚
  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                â”‚
  â”‚     â”‚      Redis       â”‚  glpi_health_status = "ok" (TTL 60s)          â”‚
  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                â”‚
  â”‚              â”‚                                                          â”‚
  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”                                                 â”‚
  â”‚     â–¼                 â–¼                                                 â”‚
  â”‚  Proactif          Assist                                               â”‚
  â”‚  "GLPI OK?"        "GLPI OK?"                                          â”‚
  â”‚     â”‚                 â”‚                                                 â”‚
  â”‚     â–¼                 â–¼                                                 â”‚
  â”‚  âœ… Continue      âœ… Continue                                          â”‚
  â”‚                                                                          â”‚
  â”‚  Si "down":                                                             â”‚
  â”‚  âŒ Skip cycle    âŒ Skip cycle                                        â”‚
  â”‚  (pas d'erreurs   (pas de timeout)                                      â”‚
  â”‚   inutiles)                                                             â”‚
  â”‚                                                                          â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  3ï¸âƒ£  CACHE DIAGNOSTICS - Ã‰viter les appels API rÃ©pÃ©tÃ©s                 â”‚
  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
  â”‚                                                                          â”‚
  â”‚  ProblÃ¨me: Un device en "flapping" gÃ©nÃ¨re 10 alertes en 5 minutes       â”‚
  â”‚            â†’ 10 appels Phibee = lent + coÃ»teux                          â”‚
  â”‚                                                                          â”‚
  â”‚  Solution: Cache du diagnostic pendant 20 minutes                       â”‚
  â”‚                                                                          â”‚
  â”‚     Alerte 1 (10h00):                                                   â”‚
  â”‚     GET phibee_diag_EHPAD-Bellevue-RTR01_2025-12-01                     â”‚
  â”‚     â†’ Cache miss                                                        â”‚
  â”‚     â†’ Appel Phibee API (15 secondes)                                   â”‚
  â”‚     â†’ SET phibee_diag_... = {diagnosis} (TTL 1200s = 20min)            â”‚
  â”‚                                                                          â”‚
  â”‚     Alerte 2 (10h02):                                                   â”‚
  â”‚     GET phibee_diag_EHPAD-Bellevue-RTR01_2025-12-01                     â”‚
  â”‚     â†’ Cache HIT âœ…                                                      â”‚
  â”‚     â†’ RÃ©utilise le diagnostic (instantanÃ©)                              â”‚
  â”‚     â†’ Pas de nouvel appel API                                           â”‚
  â”‚                                                                          â”‚
  â”‚     Gain: 10 alertes = 1 appel API au lieu de 10                        â”‚
  â”‚                                                                          â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 Redis Helper v2.2 - Le workflow utilitaire

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         REDIS HELPER v2.2                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  Deux modes d'appel:

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  MODE 1: Execute Sub-Workflow           â”‚
  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
  â”‚  UtilisÃ© par: Cache, Health Check       â”‚
  â”‚                                         â”‚
  â”‚  Proactif â”€â”€â–¶ Execute Workflow          â”‚
  â”‚               (Redis Helper v2.2)       â”‚
  â”‚               Input: {action, key, ...} â”‚
  â”‚                       â”‚                 â”‚
  â”‚                       â–¼                 â”‚
  â”‚               Retour JSON direct        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  MODE 2: Webhook HTTP                   â”‚
  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
  â”‚  UtilisÃ© par: Locks (avec polling)      â”‚
  â”‚                                         â”‚
  â”‚  Proactif â”€â”€â–¶ HTTP POST                 â”‚
  â”‚               /webhook/redis-helper     â”‚
  â”‚               Body: {action, key, ...}  â”‚
  â”‚                       â”‚                 â”‚
  â”‚                       â–¼                 â”‚
  â”‚               HTTP 200 + JSON           â”‚
  â”‚               (permet le retry/polling) â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  OPÃ‰RATIONS SUPPORTÃ‰ES                                                  â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                                                                          â”‚
  â”‚  GET                                                                     â”‚
  â”‚  â”œâ”€ Input: {action: "get", key: "ma_cle"}                               â”‚
  â”‚  â””â”€ Output: {success: true, value: "la valeur" | null}                  â”‚
  â”‚                                                                          â”‚
  â”‚  SET                                                                     â”‚
  â”‚  â”œâ”€ Input: {action: "set", key: "ma_cle", value: "data", ttl: 300}     â”‚
  â”‚  â””â”€ Output: {success: true, message: "Value set successfully"}         â”‚
  â”‚                                                                          â”‚
  â”‚  DELETE                                                                  â”‚
  â”‚  â”œâ”€ Input: {action: "delete", key: "ma_cle"}                            â”‚
  â”‚  â””â”€ Output: {success: true, message: "Key deleted"}                     â”‚
  â”‚                                                                          â”‚
  â”‚  SETNX (Set if Not eXists) - Pour les mutex                             â”‚
  â”‚  â”œâ”€ Input: {action: "setnx", key: "llm_mutex", value: "lock", ttl: 60} â”‚
  â”‚  â””â”€ Output:                                                              â”‚
  â”‚      Si clÃ© n'existe pas: {success: true, message: "Lock acquired"}     â”‚
  â”‚      Si clÃ© existe dÃ©jÃ :  {success: false, message: "Key already exists"}â”‚
  â”‚                                                                          â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 ClÃ©s Redis utilisÃ©es

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CLÃ‰S REDIS - RÃ‰FÃ‰RENCE                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  CLÃ‰                     â”‚  TTL            â”‚  USAGE                    â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚  glpi_health_status      â”‚  60 secondes    â”‚  Circuit breaker GLPI     â”‚
  â”‚                          â”‚                 â”‚  Valeurs: "ok" | "down"   â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚  glpi_down_alert_sent    â”‚  300 secondes   â”‚  Anti-spam alertes        â”‚
  â”‚                          â”‚  (5 min)        â”‚  Flag: "true" si envoyÃ©   â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚  llm_mutex               â”‚  60-180 sec     â”‚  Mutex agent IA           â”‚
  â”‚                          â”‚                 â”‚  Valeur: ID du lock       â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚  phibee_diag_{device}_   â”‚  1200 secondes  â”‚  Cache diagnostic Phibee  â”‚
  â”‚  {date}                  â”‚  (20 min)       â”‚  Valeur: JSON diagnostic  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. Flux dÃ©taillÃ©s avec schÃ©mas

### 6.1 Exemple complet : Alerte rÃ©seau â†’ Ticket rÃ©solu

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           CAS RÃ‰EL : ROUTEUR EHPAD EN PANNE - FLUX COMPLET                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  CONTEXTE:
  â”€â”€â”€â”€â”€â”€â”€â”€â”€
  â€¢ Client: EHPAD Les Musiciens (Grenoble)
  â€¢ Device: EHPAD-Musiciens-RTR01 (routeur principal)
  â€¢ ProblÃ¨me: Lien fibre Phibee Telecom coupÃ©
  â€¢ Heure: Mardi 10h15

  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  Ã‰TAPE 1: DÃ‰TECTION (Observium)
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  OBSERVIUM                                                          â”‚
      â”‚                                                                     â”‚
      â”‚  10h15:00 - Polling device EHPAD-Musiciens-RTR01                   â”‚
      â”‚  10h15:02 - âŒ Ping timeout (3 essais)                             â”‚
      â”‚  10h15:03 - Status: DOWN                                            â”‚
      â”‚  10h15:03 - Webhook dÃ©clenchÃ© â†’ POST /webhook/proactif-observium   â”‚
      â”‚                                                                     â”‚
      â”‚  Payload envoyÃ©:                                                    â”‚
      â”‚  {                                                                  â”‚
      â”‚    "device_name": "EHPAD-Musiciens-RTR01",                         â”‚
      â”‚    "device_id": 1234,                                               â”‚
      â”‚    "status": "down",                                                â”‚
      â”‚    "ip": "192.168.100.1",                                          â”‚
      â”‚    "location": "EHPAD Les Musiciens - Grenoble",                   â”‚
      â”‚    "downtime_seconds": 120,                                         â”‚
      â”‚    "alert_type": "device_down",                                     â”‚
      â”‚    "timestamp": "2025-12-02T10:15:03Z"                             â”‚
      â”‚  }                                                                  â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â–¼

  Ã‰TAPE 2: RÃ‰CEPTION ET FILTRAGE (Proactif v8)
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  PROACTIF v8 - Webhook Trigger                                      â”‚
      â”‚                                                                     â”‚
      â”‚  10h15:03 - Alerte reÃ§ue                                           â”‚
      â”‚                                                                     â”‚
      â”‚  Pre-Filter:                                                        â”‚
      â”‚  âœ… Pas de doublon rÃ©cent                                          â”‚
      â”‚  âœ… Device non dans liste ignorÃ©e                                  â”‚
      â”‚  âœ… Alerte significative (device_down)                             â”‚
      â”‚                                                                     â”‚
      â”‚  Cache Check (Redis):                                               â”‚
      â”‚  GET phibee_diag_EHPAD-Musiciens-RTR01_2025-12-02                  â”‚
      â”‚  â†’ NULL (pas de cache)                                             â”‚
      â”‚                                                                     â”‚
      â”‚  GLPI Health Check (Redis):                                         â”‚
      â”‚  GET glpi_health_status                                            â”‚
      â”‚  â†’ "ok" âœ…                                                         â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â–¼

  Ã‰TAPE 3: DIAGNOSTIC IA (Agent Sentinel)
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  AGENT SENTINEL                                                     â”‚
      â”‚                                                                     â”‚
      â”‚  10h15:04 - Acquire lock: SETNX llm_mutex â†’ âœ… OK                  â”‚
      â”‚                                                                     â”‚
      â”‚  10h15:04 - Agent dÃ©marre son raisonnement:                        â”‚
      â”‚                                                                     â”‚
      â”‚  ğŸ¤– "J'ai reÃ§u une alerte device_down pour EHPAD-Musiciens-RTR01"  â”‚
      â”‚                                                                     â”‚
      â”‚  ğŸ¤– "Je vais d'abord vÃ©rifier l'historique Observium"              â”‚
      â”‚     â†’ Appel MCP: Observium.get_device_history(device, hours=24)    â”‚
      â”‚     â† RÃ©sultat: "2 incidents similaires ce mois, dernier il y a   â”‚
      â”‚                  3 jours, rÃ©solu en 2h (problÃ¨me FAI)"             â”‚
      â”‚                                                                     â”‚
      â”‚  ğŸ¤– "Je vais diagnostiquer via Phibee Telecom"                     â”‚
      â”‚     â†’ Appel MCP: Phibee.diagnose_outage(client_id, ip, device)     â”‚
      â”‚     â† RÃ©sultat: {                                                   â”‚
      â”‚         responsibility: "phibee_fai",                               â”‚
      â”‚         diagnosis: "Coupure fibre dÃ©tectÃ©e sur le NRO",            â”‚
      â”‚         ticket_phibee: "INC-2025-12345",                           â”‚
      â”‚         eta: "~2 heures"                                           â”‚
      â”‚       }                                                             â”‚
      â”‚                                                                     â”‚
      â”‚  ğŸ¤– "C'est un problÃ¨me FAI Phibee, pas notre responsabilitÃ©"       â”‚
      â”‚     "Je dois identifier le client dans GLPI"                       â”‚
      â”‚     â†’ Appel MCP: GLPI.search_client(name="EHPAD Les Musiciens")   â”‚
      â”‚     â† RÃ©sultat: {entity_id: 42, contact: "direction@ehpad..."}    â”‚
      â”‚                                                                     â”‚
      â”‚  10h15:25 - Diagnostic terminÃ© (21 secondes)                       â”‚
      â”‚  10h15:25 - Release lock: DELETE llm_mutex                         â”‚
      â”‚                                                                     â”‚
      â”‚  Output Sentinel:                                                   â”‚
      â”‚  {                                                                  â”‚
      â”‚    "responsibility": "phibee_fai",                                  â”‚
      â”‚    "diagnosis": "Coupure fibre Phibee - Ticket FAI ouvert",        â”‚
      â”‚    "client_info": { "entity_id": 42, "name": "EHPAD Les Musiciens"},â”‚
      â”‚    "phibee_ticket": "INC-2025-12345",                              â”‚
      â”‚    "eta": "~2 heures",                                              â”‚
      â”‚    "recommended_action": "Informer le client, attendre rÃ©solution" â”‚
      â”‚  }                                                                  â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â–¼

  Ã‰TAPE 4: NOTIFICATION (Agent Notificateur)
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  AGENT NOTIFICATEUR                                                 â”‚
      â”‚                                                                     â”‚
      â”‚  10h15:26 - Acquire lock: SETNX llm_mutex â†’ âœ… OK                  â”‚
      â”‚                                                                     â”‚
      â”‚  10h15:26 - Agent dÃ©marre:                                         â”‚
      â”‚                                                                     â”‚
      â”‚  ğŸ¤– "Je dois crÃ©er un ticket GLPI et notifier l'Ã©quipe"            â”‚
      â”‚                                                                     â”‚
      â”‚  ğŸ¤– "CrÃ©ation du ticket GLPI"                                      â”‚
      â”‚     â†’ Appel MCP: GLPI.create_ticket({                              â”‚
      â”‚         title: "[PROACTIF] Panne rÃ©seau EHPAD Les Musiciens",      â”‚
      â”‚         description: "Diagnostic automatique:\n" +                  â”‚
      â”‚                      "- ResponsabilitÃ©: Phibee Telecom (FAI)\n" +  â”‚
      â”‚                      "- Ticket Phibee: INC-2025-12345\n" +         â”‚
      â”‚                      "- ETA: ~2 heures\n" +                         â”‚
      â”‚                      "- Action: Informer le client",               â”‚
      â”‚         entity_id: 42,                                              â”‚
      â”‚         priority: 4, // Haute                                       â”‚
      â”‚         urgency: 4                                                  â”‚
      â”‚       })                                                            â”‚
      â”‚     â† RÃ©sultat: {ticket_id: 9876}                                  â”‚
      â”‚                                                                     â”‚
      â”‚  ğŸ¤– "J'envoie un email au technicien d'astreinte"                  â”‚
      â”‚     â†’ Appel MCP: SMTP.send_template_email({                        â”‚
      â”‚         to: "astreinte@widip.fr",                                  â”‚
      â”‚         template: "provider_incident",                              â”‚
      â”‚         data: {                                                     â”‚
      â”‚           client: "EHPAD Les Musiciens",                           â”‚
      â”‚           device: "EHPAD-Musiciens-RTR01",                         â”‚
      â”‚           provider: "Phibee Telecom",                              â”‚
      â”‚           provider_ticket: "INC-2025-12345",                       â”‚
      â”‚           eta: "~2 heures",                                         â”‚
      â”‚           glpi_ticket: 9876                                        â”‚
      â”‚         }                                                           â”‚
      â”‚       })                                                            â”‚
      â”‚     â† RÃ©sultat: {sent: true}                                       â”‚
      â”‚                                                                     â”‚
      â”‚  10h15:35 - Notification terminÃ©e (9 secondes)                     â”‚
      â”‚  10h15:35 - Release lock: DELETE llm_mutex                         â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â–¼

  Ã‰TAPE 5: FINALISATION
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  PROACTIF v8 - Fin de traitement                                    â”‚
      â”‚                                                                     â”‚
      â”‚  10h15:36 - Sauvegarde cache diagnostic                            â”‚
      â”‚             SET phibee_diag_EHPAD-Musiciens-RTR01_2025-12-02       â”‚
      â”‚             TTL: 1200 secondes (20 minutes)                         â”‚
      â”‚                                                                     â”‚
      â”‚  10h15:36 - Log rÃ©sultat                                           â”‚
      â”‚             {                                                       â”‚
      â”‚               "status": "completed",                                â”‚
      â”‚               "processing_time_seconds": 33,                        â”‚
      â”‚               "actions": ["diagnosed", "ticket_created", "notified"]â”‚
      â”‚             }                                                       â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  RÃ‰SULTAT FINAL:
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  ğŸ“‹ TICKET GLPI #9876                                               â”‚
      â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
      â”‚  Titre: [PROACTIF] Panne rÃ©seau EHPAD Les Musiciens                â”‚
      â”‚  Statut: Nouveau                                                    â”‚
      â”‚  PrioritÃ©: Haute                                                    â”‚
      â”‚  EntitÃ©: EHPAD Les Musiciens                                       â”‚
      â”‚                                                                     â”‚
      â”‚  Description:                                                       â”‚
      â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                 â”‚
      â”‚  ğŸš¨ Alerte automatique - Diagnostic IA                              â”‚
      â”‚                                                                     â”‚
      â”‚  Device: EHPAD-Musiciens-RTR01                                     â”‚
      â”‚  Statut: DOWN depuis 10h15                                         â”‚
      â”‚                                                                     â”‚
      â”‚  ğŸ“Š Diagnostic:                                                     â”‚
      â”‚  â€¢ ResponsabilitÃ©: Phibee Telecom (FAI)                            â”‚
      â”‚  â€¢ Cause: Coupure fibre dÃ©tectÃ©e sur le NRO                        â”‚
      â”‚  â€¢ Ticket Phibee: INC-2025-12345                                   â”‚
      â”‚  â€¢ DÃ©lai estimÃ©: ~2 heures                                         â”‚
      â”‚                                                                     â”‚
      â”‚  âœ… Action recommandÃ©e:                                             â”‚
      â”‚  Informer le client et attendre rÃ©solution Phibee                  â”‚
      â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                 â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  ğŸ“§ EMAIL ENVOYÃ‰ Ã€ astreinte@widip.fr                               â”‚
      â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
      â”‚  Objet: âš ï¸ [IMPORTANT] Incident FAI - EHPAD Les Musiciens          â”‚
      â”‚                                                                     â”‚
      â”‚  Bonjour,                                                           â”‚
      â”‚                                                                     â”‚
      â”‚  Un incident rÃ©seau a Ã©tÃ© dÃ©tectÃ© et diagnostiquÃ© automatiquement: â”‚
      â”‚                                                                     â”‚
      â”‚  â€¢ Client: EHPAD Les Musiciens                                     â”‚
      â”‚  â€¢ Device: EHPAD-Musiciens-RTR01                                   â”‚
      â”‚  â€¢ Cause: ProblÃ¨me FAI Phibee Telecom                              â”‚
      â”‚  â€¢ Ticket Phibee: INC-2025-12345                                   â”‚
      â”‚  â€¢ DÃ©lai estimÃ©: ~2 heures                                         â”‚
      â”‚                                                                     â”‚
      â”‚  Ticket GLPI crÃ©Ã©: #9876                                           â”‚
      â”‚                                                                     â”‚
      â”‚  Action requise: Informer le client si nÃ©cessaire                  â”‚
      â”‚                                                                     â”‚
      â”‚  Cordialement,                                                      â”‚
      â”‚  SystÃ¨me de monitoring automatique WIDIP                           â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  TEMPS TOTAL: 33 secondes (de l'alerte au ticket + email)
  INTERVENTIONS HUMAINES: 0
  VALEUR AJOUTÃ‰E:
  â€¢ Diagnostic automatique de la responsabilitÃ©
  â€¢ Ticket enrichi avec contexte FAI
  â€¢ Technicien informÃ© immÃ©diatement
  â€¢ Historique conservÃ© pour analyse
```

---

## 7. Credentials et sÃ©curitÃ©

### 7.1 Vue d'ensemble des credentials

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       CREDENTIALS - MATRICE COMPLÃˆTE                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  SERVICE       â”‚  TYPE CREDENTIAL      â”‚  CONFIGURATION REQUISE            â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚  Redis         â”‚  Redis (natif n8n)    â”‚  Host, Port, Password (si auth)   â”‚
  â”‚                â”‚                       â”‚  UtilisÃ© par: Redis Helper v2.2   â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚  GLPI          â”‚  HTTP Header Auth     â”‚  Headers:                         â”‚
  â”‚                â”‚                       â”‚  - App-Token: <token>             â”‚
  â”‚                â”‚                       â”‚  - Session-Token: <token>         â”‚
  â”‚                â”‚                       â”‚  UtilisÃ© par: MCP GLPI, Health    â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚  Observium     â”‚  HTTP Header Auth     â”‚  Headers:                         â”‚
  â”‚                â”‚                       â”‚  - Authorization: Bearer <key>    â”‚
  â”‚                â”‚                       â”‚  UtilisÃ© par: MCP Observium       â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚  Phibee        â”‚  HTTP Header Auth     â”‚  Headers:                         â”‚
  â”‚                â”‚                       â”‚  - X-API-Key: <key>               â”‚
  â”‚                â”‚                       â”‚  UtilisÃ© par: MCP Phibee          â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚  SMTP          â”‚  SMTP (natif n8n)     â”‚  Host, Port, User, Password       â”‚
  â”‚                â”‚                       â”‚  TLS/SSL selon configuration      â”‚
  â”‚                â”‚                       â”‚  UtilisÃ© par: MCP SMTP            â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚  Active Dir.   â”‚  SSH Password         â”‚  Host: Windows Server (OpenSSH)   â”‚
  â”‚                â”‚                       â”‚  User: admin avec droits AD       â”‚
  â”‚                â”‚                       â”‚  UtilisÃ© par: MCP AD              â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚  Ollama        â”‚  Aucun (local)        â”‚  URL: http://localhost:11434      â”‚
  â”‚                â”‚                       â”‚  Pas d'authentification           â”‚
  â”‚                â”‚                       â”‚  UtilisÃ© par: Agents IA           â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚  MySecret      â”‚  Aucun                â”‚  API publique                     â”‚
  â”‚                â”‚                       â”‚  URL via variable env             â”‚
  â”‚                â”‚                       â”‚  UtilisÃ© par: MCP MySecret        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2 Variables d'environnement

```bash
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#                    VARIABLES D'ENVIRONNEMENT n8n
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# OBSERVIUM (Monitoring)
OBSERVIUM_URL=https://observium.widip.local

# PHIBEE TELECOM (FAI)
PHIBEE_API_URL=https://api.phibee-telecom.fr

# SMTP (Emails)
SMTP_FROM_EMAIL=noreply@widip.fr

# MYSECRET (Liens sÃ©curisÃ©s)
MYSECRET_API_URL=https://mysecret.widip.fr

# OLLAMA (LLM Local)
OLLAMA_URL=http://localhost:11434

# Note: Les credentials sensibles (mots de passe, API keys) sont stockÃ©s
# directement dans le gestionnaire de credentials n8n, pas en variables.
```

### 7.3 SÃ©curitÃ© des donnÃ©es

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      SÃ‰CURITÃ‰ - POINTS CLÃ‰S                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  âœ… DONNÃ‰ES SENSIBLES
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  â€¢ Mots de passe gÃ©nÃ©rÃ©s: transmis via MySecret (liens Ã  usage unique)
  â€¢ Credentials API: stockÃ©s chiffrÃ©s dans n8n
  â€¢ DonnÃ©es patients: jamais dans les logs (conformitÃ© RGPD santÃ©)

  âœ… INFRASTRUCTURE
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  â€¢ LLM 100% local (Ollama): aucune donnÃ©e vers le cloud
  â€¢ Redis local: pas d'exposition externe
  â€¢ n8n auto-hÃ©bergÃ©: contrÃ´le total

  âœ… AUTHENTIFICATION
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  â€¢ MCP Triggers protÃ©gÃ©s par Header Auth
  â€¢ API GLPI: double token (App + Session)
  â€¢ AD via SSH: authentification Windows

  âœ… AUDIT
  â”€â”€â”€â”€â”€â”€â”€â”€
  â€¢ Toutes les exÃ©cutions n8n sont loguÃ©es
  â€¢ TraÃ§abilitÃ© complÃ¨te des actions IA
  â€¢ Tickets GLPI = historique permanent
```

---

## 8. DÃ©ploiement et configuration

### 8.1 Ordre de dÃ©ploiement recommandÃ©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CHECKLIST DE DÃ‰PLOIEMENT                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  PHASE 1: Infrastructure (30 min)
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  â–¡ 1. DÃ©marrer Redis
       docker run -d --name redis -p 6379:6379 redis:alpine

  â–¡ 2. DÃ©marrer Ollama + charger modÃ¨les
       ollama pull mistral:7b
       ollama pull qwen2.5:14b

  â–¡ 3. VÃ©rifier n8n opÃ©rationnel

  PHASE 2: Credentials (20 min)
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  â–¡ 4. CrÃ©er credential Redis
  â–¡ 5. CrÃ©er credential GLPI (Header Auth)
  â–¡ 6. CrÃ©er credential Observium (Header Auth)
  â–¡ 7. CrÃ©er credential Phibee (Header Auth)
  â–¡ 8. CrÃ©er credential SMTP
  â–¡ 9. CrÃ©er credential SSH (pour AD)

  PHASE 3: Workflows de base (15 min)
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  â–¡ 10. Importer Redis Helper v2.2
        â†’ Activer â†’ Noter l'ID du workflow
        â†’ Remplacer REDIS_CREDENTIAL_ID

  â–¡ 11. Importer Health Check GLPI v2
        â†’ Remplacer REDIS_HELPER_V2_WORKFLOW_ID
        â†’ Activer

  PHASE 4: MCP Workflows (20 min)
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  â–¡ 12. Importer MCP Observium v5 â†’ Activer â†’ Noter ID
  â–¡ 13. Importer MCP Phibee v5 â†’ Activer â†’ Noter ID
  â–¡ 14. Importer MCP GLPI v6 â†’ Activer â†’ Noter ID
  â–¡ 15. Importer MCP SMTP v5 â†’ Activer â†’ Noter ID
  â–¡ 16. Importer MCP AD v1 â†’ Activer â†’ Noter ID
  â–¡ 17. Importer MCP MySecret v1 â†’ Activer â†’ Noter ID

  PHASE 5: MCP Serveur Global (10 min)
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  â–¡ 18. Importer MCP Serveur Global v6
  â–¡ 19. CORRIGER les paths dupliquÃ©s:
        - MCP Server AD: "mcp-ad" (pas "mcp-email")
        - MCP Server MySecret: "mcp-mysecret" (pas "mcp-email")
  â–¡ 20. Remplacer tous les workflow IDs
  â–¡ 21. Activer

  PHASE 6: Workflows principaux (15 min)
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  â–¡ 22. Importer Proactif v8
        â†’ Remplacer REDIS_HELPER_V2_WORKFLOW_ID
        â†’ VÃ©rifier endpoints MCP
        â†’ Activer

  â–¡ 23. Importer Assist v4
        â†’ Remplacer REDIS_HELPER_V2_WORKFLOW_ID
        â†’ VÃ©rifier endpoints MCP
        â†’ Activer

  PHASE 7: Tests (30 min)
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  â–¡ 24. Tester Redis Helper: GET/SET/SETNX
  â–¡ 25. Tester Health Check: vÃ©rifier clÃ© glpi_health_status
  â–¡ 26. Tester chaque MCP individuellement
  â–¡ 27. Tester Proactif avec alerte simulÃ©e
  â–¡ 28. Tester Assist avec ticket test

  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  TEMPS TOTAL ESTIMÃ‰: ~2h30 (premiÃ¨re installation)
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### 8.2 Diagramme de dÃ©pendances

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DÃ‰PENDANCES ENTRE WORKFLOWS                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚   Redis Server    â”‚
                          â”‚   (Infrastructure)â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚ Redis Helper v2.2 â”‚
                          â”‚  (Utilitaire)     â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â–¼               â–¼               â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ Health Check v2 â”‚ â”‚Proactif v8â”‚ â”‚  Assist v4    â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚               â”‚
                                    â–¼               â–¼
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚     MCP Serveur Global v6     â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â–¼           â–¼           â–¼               â–¼           â–¼           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   MCP    â”‚ â”‚   MCP    â”‚ â”‚   MCP    â”‚ â”‚   MCP    â”‚ â”‚   MCP    â”‚ â”‚   MCP    â”‚
    â”‚Observium â”‚ â”‚  Phibee  â”‚ â”‚   GLPI   â”‚ â”‚   SMTP   â”‚ â”‚    AD    â”‚ â”‚ MySecret â”‚
    â”‚    v5    â”‚ â”‚    v5    â”‚ â”‚    v6    â”‚ â”‚    v5    â”‚ â”‚    v1    â”‚ â”‚    v1    â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
         â”‚            â”‚            â”‚            â”‚            â”‚            â”‚
         â–¼            â–¼            â–¼            â–¼            â–¼            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚Observium â”‚ â”‚  Phibee  â”‚ â”‚   GLPI   â”‚ â”‚   SMTP   â”‚ â”‚ Windows  â”‚ â”‚ MySecret â”‚
    â”‚   API    â”‚ â”‚   API    â”‚ â”‚   API    â”‚ â”‚  Server  â”‚ â”‚   AD     â”‚ â”‚   API    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 9. Annexes techniques

### 9.1 Fichiers du projet

```
WIDIP_Architecture/
â”œâ”€â”€ ğŸ“ Workflows/
â”‚   â”œâ”€â”€ ğŸ”§ WIDIP_Redis_Helper_v2.2.json
â”‚   â”œâ”€â”€ ğŸ¥ WIDIP_Health_Check_GLPI_v2.json
â”‚   â”œâ”€â”€ ğŸš¨ WIDIP_Proactif_Observium_v8.json
â”‚   â””â”€â”€ ğŸ« WIDIP_Assist_ticket_v4.json
â”‚
â”œâ”€â”€ ğŸ“ MCP/
â”‚   â”œâ”€â”€ ğŸŒ WIDIP_MCP_SERVEUR_GLOBAL_v6.json
â”‚   â”œâ”€â”€ ğŸ“Š WIDIP_MCP_Observium_v5.json
â”‚   â”œâ”€â”€ ğŸ“ WIDIP_MCP_Phibee_telecom_v5.json
â”‚   â”œâ”€â”€ ğŸ« WIDIP_MCP_GLPI_v6.json
â”‚   â”œâ”€â”€ ğŸ“§ WIDIP_MCP_SMTP_v5.json
â”‚   â”œâ”€â”€ ğŸ‘¤ WIDIP_MCP_ActiveDirectory_v1.json
â”‚   â””â”€â”€ ğŸ” WIDIP_MCP_MySecret_v1.json
â”‚
â”œâ”€â”€ ğŸ“ Documentation/
â”‚   â”œâ”€â”€ ğŸ“– WIDIP_ARCHITECTURE_COMPLETE_v3.md (ce fichier)
â”‚   â”œâ”€â”€ ğŸ“‹ CREDENTIALS_SETUP.md
â”‚   â””â”€â”€ ğŸ”„ MIGRATION_GUIDE_v1_to_v2.md
â”‚
â””â”€â”€ ğŸ“ Archive/ (non dÃ©ployÃ©)
    â”œâ”€â”€ WIDIP_LLM_Gateway_v1.json
    â”œâ”€â”€ WIDIP_LLM_Worker_v1.json
    â””â”€â”€ WIDIP_LLM_Result_v1.json
```

### 9.2 MÃ©triques de performance attendues

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      MÃ‰TRIQUES CIBLES                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  MÃ‰TRIQUE                  â”‚  CIBLE          â”‚  NOTES                    â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚  Latence Redis             â”‚  < 5 ms         â”‚  Sub-Workflow             â”‚
  â”‚  Latence Redis             â”‚  < 20 ms        â”‚  Via webhook              â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚  Temps diagnostic Proactif â”‚  < 45 s         â”‚  Sentinel complet         â”‚
  â”‚  Temps notif Proactif      â”‚  < 15 s         â”‚  Notificateur seul        â”‚
  â”‚  Temps total Proactif      â”‚  < 60 s         â”‚  Alerte â†’ Ticket + Email  â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚  Temps traitement Assist   â”‚  < 90 s         â”‚  Ticket simple            â”‚
  â”‚  Temps reset password      â”‚  < 30 s         â”‚  AD + MySecret + Email    â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚  InfÃ©rence Mistral 7B      â”‚  5-15 s         â”‚  GPU L40S                 â”‚
  â”‚  InfÃ©rence Qwen 2.5 14B    â”‚  15-30 s        â”‚  GPU L40S                 â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚  Volume supportÃ©           â”‚  ~30 req/jour   â”‚  Sans file d'attente      â”‚
  â”‚  Pic supportÃ©              â”‚  ~100 req/jour  â”‚  Avec attente mutex       â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.3 Ã‰volutions futures possibles

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ROADMAP POTENTIELLE                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  ğŸ“… COURT TERME (1-3 mois)
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  â€¢ Ajout de nouveaux templates email
  â€¢ Dashboard Grafana pour mÃ©triques
  â€¢ Tests automatisÃ©s des workflows

  ğŸ“… MOYEN TERME (3-6 mois)
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  â€¢ Second GPU â†’ parallÃ©lisation Proactif/Assist
  â€¢ MCP Redis natif (si besoin file d'attente)
  â€¢ IntÃ©gration Teams/Slack pour notifications

  ğŸ“… LONG TERME (6-12 mois)
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  â€¢ ModÃ¨les fine-tunÃ©s sur donnÃ©es WIDIP
  â€¢ Auto-rÃ©solution de tickets simples
  â€¢ PrÃ©diction de pannes (ML)
```

---

## ğŸ“ Glossaire

| Terme | DÃ©finition |
|-------|------------|
| **MCP** | Model Context Protocol - standard permettant aux LLM d'utiliser des outils |
| **LLM** | Large Language Model - modÃ¨le de langage (Mistral, Qwen, etc.) |
| **Ollama** | Serveur local pour exÃ©cuter des LLM |
| **Mutex** | Verrou d'exclusion mutuelle (un seul accÃ¨s Ã  la fois) |
| **Circuit Breaker** | Pattern de protection contre les pannes en cascade |
| **GLPI** | Gestionnaire Libre de Parc Informatique (ticketing) |
| **Observium** | Plateforme de monitoring rÃ©seau |
| **Phibee Telecom** | FAI fibre optique partenaire |
| **TTL** | Time To Live - durÃ©e de vie d'une donnÃ©e en cache |
| **Sub-Workflow** | Workflow n8n appelÃ© par un autre workflow |
| **Webhook** | Endpoint HTTP appelÃ© par un systÃ¨me externe |

---

**Document gÃ©nÃ©rÃ© le 2 dÃ©cembre 2025**  
**Architecture validÃ©e pour production**

