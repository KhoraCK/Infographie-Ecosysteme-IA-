# ğŸ—ï¸ Architecture WIDIP v6 - Automatisation IA des OpÃ©rations IT

> **Version** : 6.0  
> **Date** : 9 DÃ©cembre 2025  
> **Auteur** : RIPOUTEAU Maxime  
> **Statut** : Pret pour test - Boucle de diagnostic client intÃ©grÃ©e

---

## ğŸ“‹ Table des matiÃ¨res

1. [Contexte et vision](#1-contexte-et-vision)
2. [NouveautÃ©s v6 : Boucle de diagnostic client](#2-nouveautÃ©s-v6--boucle-de-diagnostic-client)
3. [Infrastructure et IDs](#3-infrastructure-et-ids)
4. [Vue d'ensemble de l'architecture](#4-vue-densemble-de-larchitecture)
5. [Les 4 workflows principaux](#5-les-4-workflows-principaux)
6. [SystÃ¨me MCP : les outils des agents](#6-systÃ¨me-mcp--les-outils-des-agents)
7. [Redis : mÃ©moire partagÃ©e et synchronisation](#7-redis--mÃ©moire-partagÃ©e-et-synchronisation)
8. [Exemple complet de bout en bout](#8-exemple-complet-de-bout-en-bout)
9. [Outil DiagnosticWIDIP](#9-outil-diagnosticwidip)
10. [Credentials et sÃ©curitÃ©](#10-credentials-et-sÃ©curitÃ©)
11. [DÃ©ploiement et mÃ©triques](#11-dÃ©ploiement-et-mÃ©triques)
12. [Changelog v5 â†’ v6](#12-changelog-v5--v6)

---

## 1. Contexte et vision

### 1.1 Qui est WIDIP ?

**WIDIP** est une entreprise d'hÃ©bergement de donnÃ©es spÃ©cialisÃ©e dans le secteur **mÃ©dico-social**. Elle accompagne plus de **800 Ã©tablissements** (EHPAD, cliniques, associations, structures d'accueil) dans la gestion de leur infrastructure IT.

### 1.2 Le dÃ©fi opÃ©rationnel

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    VOLUME ANNUEL WIDIP                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š ~20 000 tickets de support / an                             â”‚
â”‚  ğŸ¥ 800+ Ã©tablissements clients                                 â”‚
â”‚  ğŸŒ Infrastructure rÃ©seau distribuÃ©e                            â”‚
â”‚  â° Support 24/7 requis pour le secteur santÃ©                   â”‚
â”‚  ğŸ” Diagnostic rÃ©seau complexe (WIDIP / FAI / Local)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.3 La solution v6 : boucle de diagnostic fermÃ©e

| CapacitÃ© | Description |
|----------|-------------|
| ğŸ” **Diagnostiquer** | Analyser automatiquement les alertes rÃ©seau via Observium |
| ğŸ« **CrÃ©er des tickets** | Ouvrir des tickets GLPI enrichis avec diagnostic |
| ğŸ“§ **Notifier + Demander** | Envoyer emails + demande d'outil diagnostic si nÃ©cessaire |
| ğŸ› ï¸ **Collecter** | Recevoir les codes DIAG du client via l'outil |
| ğŸ§  **Analyser** | DÃ©terminer automatiquement la responsabilitÃ© (WIDIP/FAI/Local) |
| ğŸ”§ **Agir** | RÃ©initialiser mots de passe, dÃ©bloquer/crÃ©er comptes |

---

## 2. NouveautÃ©s v6 : Boucle de diagnostic client

### 2.1 Le problÃ¨me rÃ©solu

En v5, quand l'analyse Observium seule ne permettait pas de dÃ©terminer la responsabilitÃ© (confiance < 80%), le technicien devait **manuellement** :
1. Contacter le client
2. Lui demander de faire des tests rÃ©seau
3. InterprÃ©ter les rÃ©sultats
4. Mettre Ã  jour le ticket

### 2.2 La solution v6 : boucle automatisÃ©e

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BOUCLE DE DIAGNOSTIC v6                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   PROACTIF v9                                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚   â”‚Observiumâ”‚â”€â”€â”€â”€â–ºâ”‚ Sentinel v9 â”‚â”€â”€â”€â”€â–ºâ”‚ Confiance < 80% ?â”‚                 â”‚
â”‚   â”‚ Alerte  â”‚     â”‚ (Diagnostic)â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚                           â”‚
â”‚                                          OUI   â”‚   NON                     â”‚
â”‚                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚                                    â–¼                      â–¼                â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚                          â”‚ Email + demande â”‚    â”‚ Ticket + action â”‚       â”‚
â”‚                          â”‚ outil diagnosticâ”‚    â”‚ directe         â”‚       â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                   â”‚                                        â”‚
â”‚   CLIENT                          â–¼                                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚   â”‚  1. TÃ©lÃ©charge DiagnosticWIDIP.exe                          â”‚         â”‚
â”‚   â”‚  2. Lance l'outil                                            â”‚         â”‚
â”‚   â”‚  3. Copie le code: #DIAG gw=ok int=fail dns=ok ping=12ms    â”‚         â”‚
â”‚   â”‚  4. Colle dans followup GLPI                                 â”‚         â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                   â”‚                                        â”‚
â”‚   ASSIST v6.1                     â–¼                                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚   â”‚  BRANCHE DIAG (polling 3min)                                 â”‚         â”‚
â”‚   â”‚  1. DÃ©tecte #DIAG dans followups                             â”‚         â”‚
â”‚   â”‚  2. Parse: gw=ok int=fail dns=ok ping=12ms                   â”‚         â”‚
â”‚   â”‚  3. Analyse responsabilitÃ© â†’ FAI (85% confiance)             â”‚         â”‚
â”‚   â”‚  4. Ajoute followup technique automatique                    â”‚         â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 Format du code DIAG

```
#DIAG gw=ok int=fail dns=ok ping=12ms
```

| ClÃ© | Description | Valeurs |
|-----|-------------|---------|
| `gw` | Ping vers la passerelle locale (gateway/routeur) | ok / fail |
| `int` | Ping vers Internet (8.8.8.8) | ok / fail |
| `dns` | RÃ©solution DNS (google.com) | ok / fail |
| `ping` | Latence moyenne en millisecondes | Xms |

### 2.4 Matrice de responsabilitÃ©

| gw | int | dns | â†’ ResponsabilitÃ© | Confiance | Explication |
|----|-----|-----|------------------|-----------|-------------|
| **fail** | * | * | ğŸ”Œ **Local/CÃ¢blage** | 90% | Passerelle inaccessible = problÃ¨me local |
| ok | **fail** | * | ğŸŒ **FAI** | 85% | RÃ©seau local OK mais pas d'Internet |
| ok | ok | **fail** | ğŸ”¤ **FAI (DNS)** | 75% | Internet OK mais DNS Ã©choue |
| ok | ok | ok | âœ… **RÃ©solu/Intermittent** | 80% | Tous les tests passent |
| null | null | null | â“ **IndÃ©terminÃ©** | 30% | DonnÃ©es insuffisantes |

---

## 3. Infrastructure et IDs

### 3.1 Informations VM

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    INFRASTRUCTURE VM                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ–¥ï¸  ID OVH         : wh38667-ovh                               â”‚
â”‚  ğŸŒ IP VM           : 10.238.110.30                             â”‚
â”‚  ğŸ¤– API Ollama      : 9b2d80f1962c49f5acb090580c2ae50b...       â”‚
â”‚  ğŸ® GPU             : NVIDIA L40S (VM2)                         â”‚
â”‚  ğŸ§  ModÃ¨le          : Qwen2.5:14b (production)                  â”‚
â”‚  ğŸ§  ModÃ¨le cible    : Qwen3-Coder:30b (upgrade prÃ©vu)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 IDs des Workflows

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    WORKFLOWS PRINCIPAUX                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Workflow                        â”‚  ID n8n                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸš¨ WIDIP_Proactif_Observium_v9  â”‚  FvooGzIxbHh7PJxY            â”‚
â”‚  ğŸ« WIDIP_Assist_ticket_v6.1     â”‚  JKlFZ6UyMLGdIquP            â”‚
â”‚  ğŸ”§ WIDIP_Redis_Helper_v2.2      â”‚  aCuwZ3jJb1c2dMVY            â”‚
â”‚  ğŸ¥ WIDIP_Health_Check_GLPI_v2   â”‚  yNJ1g9IKO2ZSQZ2M            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    WORKFLOWS MCP (5 outils)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  MCP Workflow                    â”‚  ID n8n                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š MCP_Observium                â”‚  QMnaB7g1DpUfN9rK            â”‚
â”‚  ğŸ« MCP_GLPI_v7                  â”‚  c9sDkkS8stHEdliP            â”‚
â”‚  ğŸ‘¤ MCP_ActiveDirectory_v2       â”‚  2tSBUs69Kn3NYxxT            â”‚
â”‚  ğŸ” MCP_MySecret_v1              â”‚  geNUXjUljodz4CPG            â”‚
â”‚  ğŸ”— MCP_Server (Hub)             â”‚  5gXkLvxfoj5i3wew            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 Endpoints MCP (SSE)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    LIENS MCP SERVER                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  MCP Observium  : http://0.0.0.0:5678/mcp-test/mcp-observium/sseâ”‚
â”‚  MCP GLPI       : http://0.0.0.0:5678/mcp-test/mcp-glpi-server/sseâ”‚
â”‚  MCP AD         : http://0.0.0.0:5678/mcp-test/mcp-ad/sse       â”‚
â”‚  MCP MySecret   : http://0.0.0.0:5678/mcp-test/mcp-mysecret/sse â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. Vue d'ensemble de l'architecture

### 4.1 SchÃ©ma global v6

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                        ARCHITECTURE WIDIP v6 - VUE GLOBALE                    â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                              â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â•‘
â•‘   â”‚   OBSERVIUM     â”‚         â”‚     GLPI        â”‚                           â•‘
â•‘   â”‚  (Monitoring)   â”‚         â”‚ (Tickets+Email) â”‚                           â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â•‘
â•‘            â”‚ Webhooks                 â”‚â”‚ API + Followups                    â•‘
â•‘            â–¼                          â–¼â–¼                                     â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â•‘
â•‘   â”‚                         n8n (VM1)                          â”‚            â•‘
â•‘   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚            â•‘
â•‘   â”‚  â”‚  ğŸš¨ PROACTIF v9  â”‚    â”‚  ğŸ« ASSIST v6.1              â”‚  â”‚            â•‘
â•‘   â”‚  â”‚  2 agents:       â”‚    â”‚  2 branches parallÃ¨les:      â”‚  â”‚            â•‘
â•‘   â”‚  â”‚  â€¢ Sentinel      â”‚    â”‚  â€¢ Agent Support (tickets)   â”‚  â”‚            â•‘
â•‘   â”‚  â”‚  â€¢ Notificateur  â”‚    â”‚  â€¢ Branche DIAG (codes)      â”‚  â”‚            â•‘
â•‘   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚            â•‘
â•‘   â”‚           â”‚                       â”‚                         â”‚            â•‘
â•‘   â”‚           â–¼                       â–¼                         â”‚            â•‘
â•‘   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚            â•‘
â•‘   â”‚  â”‚         ğŸ”§ MCP WORKFLOWS (5 outils)         â”‚           â”‚            â•‘
â•‘   â”‚  â”‚  Observium â”‚ GLPI â”‚ AD â”‚ MySecret â”‚ Server  â”‚           â”‚            â•‘
â•‘   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚            â•‘
â•‘   â”‚                     â”‚                                       â”‚            â•‘
â•‘   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚            â•‘
â•‘   â”‚  â”‚         ğŸ—„ï¸ REDIS HELPER v2.2            â”‚               â”‚            â•‘
â•‘   â”‚  â”‚  â€¢ Cache diagnostic                      â”‚               â”‚            â•‘
â•‘   â”‚  â”‚  â€¢ Mutex LLM (llm_mutex)                 â”‚               â”‚            â•‘
â•‘   â”‚  â”‚  â€¢ Circuit Breaker GLPI                  â”‚               â”‚            â•‘
â•‘   â”‚  â”‚  â€¢ Anti-doublon DIAG                     â”‚               â”‚            â•‘
â•‘   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚            â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â•‘
â•‘                              â”‚                                               â•‘
â•‘                              â–¼                                               â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â•‘
â•‘   â”‚  ğŸ¤– OLLAMA (VM2 - GPU L40S)                                 â”‚           â•‘
â•‘   â”‚  ModÃ¨le: Qwen2.5:14b (14B params)                          â”‚           â•‘
â•‘   â”‚  Vitesse: ~20-30 tokens/sec                                 â”‚           â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â•‘
â•‘                                                                              â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â•‘
â•‘   â”‚  ğŸ‘¤ CLIENT (avec DiagnosticWIDIP.exe)                       â”‚           â•‘
â•‘   â”‚  GÃ©nÃ¨re: #DIAG gw=ok int=fail dns=ok ping=12ms              â”‚           â•‘
â•‘   â”‚  â†’ Colle dans followup GLPI                                 â”‚           â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â•‘
â•‘                                                                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### 4.2 Les 7 couches de l'architecture v6

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  COUCHE 1 : SOURCES D'Ã‰VÃ‰NEMENTS                               â”‚
â”‚  â€¢ Observium (webhooks alertes rÃ©seau)                         â”‚
â”‚  â€¢ GLPI (tickets + followups avec codes DIAG)                  â”‚
â”‚  â€¢ Health Check (monitoring santÃ© GLPI)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  COUCHE 2 : WORKFLOWS PRINCIPAUX (n8n)                         â”‚
â”‚  â€¢ PROACTIF v9 : Diagnostic + demande outil client si besoin  â”‚
â”‚  â€¢ ASSIST v6.1 : Tickets + dÃ©tection codes DIAG               â”‚
â”‚  â€¢ HEALTH CHECK v2 : Surveillance continue de GLPI            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  COUCHE 3 : SYSTÃˆME MCP (5 outils)                             â”‚
â”‚  â€¢ Observium : RÃ©cupÃ©ration d'infos rÃ©seau                     â”‚
â”‚  â€¢ GLPI : Gestion tickets + envoi emails + followups           â”‚
â”‚  â€¢ Active Directory : Gestion comptes utilisateurs             â”‚
â”‚  â€¢ MySecret : GÃ©nÃ©ration liens sÃ©curisÃ©s temporaires           â”‚
â”‚  â€¢ Server : Hub central MCP Triggers                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  COUCHE 4 : REDIS HELPER v2.2                                  â”‚
â”‚  â€¢ Cache diagnostic Observium                                  â”‚
â”‚  â€¢ Mutex LLM (sÃ©rialise accÃ¨s Ollama)                         â”‚
â”‚  â€¢ Circuit Breaker GLPI                                        â”‚
â”‚  â€¢ Anti-doublon codes DIAG (TTL 24h)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  COUCHE 5 : INTELLIGENCE ARTIFICIELLE                          â”‚
â”‚  â€¢ Ollama + Qwen2.5:14b : Raisonnement et dÃ©cisions           â”‚
â”‚  â€¢ Agent Sentinel : Diagnostic rÃ©seau                          â”‚
â”‚  â€¢ Agent Notificateur : CrÃ©ation tickets + emails              â”‚
â”‚  â€¢ Agent Support : Traitement tickets                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  COUCHE 6 : SYSTÃˆMES EXTERNES                                  â”‚
â”‚  â€¢ API Observium (monitoring rÃ©seau)                           â”‚
â”‚  â€¢ API GLPI (tickets + emails)                                 â”‚
â”‚  â€¢ Active Directory (gestion utilisateurs)                     â”‚
â”‚  â€¢ API MySecret (partage sÃ©curisÃ©)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  COUCHE 7 : CLIENT (NOUVEAU v6)                                â”‚
â”‚  â€¢ DiagnosticWIDIP.exe : Outil de diagnostic local             â”‚
â”‚  â€¢ GÃ©nÃ¨re code DIAG Ã  coller dans GLPI                         â”‚
â”‚  â€¢ Boucle fermÃ©e : client â†’ GLPI â†’ Assist â†’ analyse auto       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. Les 4 workflows principaux

### 5.1 ğŸš¨ WIDIP_Proactif_Observium_v9

**ID** : `FvooGzIxbHh7PJxY`  
**RÃ´le** : Diagnostic automatique des alertes rÃ©seau + demande outil client si confiance faible.

**DÃ©clenchement** : Webhook Observium `/widip-alertes`

**Flux v9** :
```
Webhook Observium (alerte rÃ©seau)
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Parse Alerte + Tracking ID          â”‚
â”‚ ALT-2025-1733748123-A7B3C2          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
    â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RÃ©ponse     â”‚      â”‚ Pre-Filter      â”‚
â”‚ Webhook     â”‚      â”‚ â€¢ Micro-coupure â”‚
â”‚ immÃ©diate   â”‚      â”‚ â€¢ Maintenance   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Redis: Check Cacheâ”‚
                    â”‚ observium_diag_*  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Redis: GLPI Healthâ”‚
                    â”‚ Circuit Breaker   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ GLPI OK                       â”‚ GLPI DOWN
              â–¼                               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Acquire LLM Lock    â”‚         â”‚ Mode DÃ©gradÃ©    â”‚
    â”‚ llm_mutex (TTL 120s)â”‚         â”‚ (log seulement) â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ğŸ¤– AGENT SENTINEL v9                    â”‚
    â”‚ Outils: MCP Observium, MCP GLPI         â”‚
    â”‚ â€¢ search_client(device_name)            â”‚
    â”‚ â€¢ get_device_info(device)               â”‚
    â”‚ â€¢ get_device_history(device, 24h)       â”‚
    â”‚                                         â”‚
    â”‚ OUTPUT:                                 â”‚
    â”‚ â€¢ responsibility: fai_probable          â”‚
    â”‚ â€¢ confidence: 70%                       â”‚
    â”‚ â€¢ besoin_diagnostic_client: true        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
              â”‚Release Lock   â”‚
              â”‚Cache Redis    â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚confidence < 80% ?     â”‚
          â–¼ OUI                   â–¼ NON
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PrÃ©parer Email Outilâ”‚  â”‚ (pas d'email outil) â”‚
â”‚ DiagnosticWIDIP.exe â”‚  â”‚                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                        â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ğŸ¤– AGENT NOTIFICATEUR v9                â”‚
    â”‚ Outils: MCP GLPI                        â”‚
    â”‚ â€¢ create_ticket()                       â”‚
    â”‚ â€¢ send_email() (avec lien outil si req) â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Temps cible** : < 60 secondes (alerte â†’ ticket + email)

**MCP utilisÃ©s** : Observium, GLPI

---

### 5.2 ğŸ« WIDIP_Assist_ticket_v6.1

**ID** : `JKlFZ6UyMLGdIquP`  
**RÃ´le** : Traitement intelligent des tickets + analyse automatique des codes DIAG.

**DÃ©clenchement** : Polling toutes les 3 minutes

**Flux v6.1 avec double branche** :
```
Polling 3min
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Initialiser Contexte                â”‚
â”‚ execution_id, started_at            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Redis: Check GLPI     â”‚
    â”‚ Health (circuit break)â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ GLPI OK ?     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚ OUI
        â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Acquire LLM   â”‚
        â”‚ Lock (180s)   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                       â”‚
    â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BRANCHE AGENT   â”‚   â”‚ BRANCHE DIAG (NOUVEAU)  â”‚
â”‚                 â”‚   â”‚                         â”‚
â”‚ ğŸ¤– Agent        â”‚   â”‚ 1. Chercher followups   â”‚
â”‚ Support WIDIP   â”‚   â”‚    contenant #DIAG      â”‚
â”‚                 â”‚   â”‚    (5 derniÃ¨res min)    â”‚
â”‚ Outils:         â”‚   â”‚                         â”‚
â”‚ â€¢ MCP GLPI      â”‚   â”‚ 2. Redis: dÃ©jÃ  traitÃ© ? â”‚
â”‚ â€¢ MCP AD        â”‚   â”‚    diag_processed_{id}  â”‚
â”‚ â€¢ MCP MySecret  â”‚   â”‚                         â”‚
â”‚                 â”‚   â”‚ 3. Parser Format DIAG   â”‚
â”‚ Actions:        â”‚   â”‚    gw=ok int=fail...    â”‚
â”‚ â€¢ Reset MDP     â”‚   â”‚                         â”‚
â”‚ â€¢ DÃ©blocage     â”‚   â”‚ 4. Analyser             â”‚
â”‚ â€¢ CrÃ©ation      â”‚   â”‚    ResponsabilitÃ©       â”‚
â”‚   compte        â”‚   â”‚    â†’ FAI (85%)          â”‚
â”‚ â€¢ Escalade      â”‚   â”‚                         â”‚
â”‚                 â”‚   â”‚ 5. PrÃ©parer Followup    â”‚
â”‚ IGNORE tickets  â”‚   â”‚    GLPI technique       â”‚
â”‚ avec #DIAG      â”‚   â”‚                         â”‚
â”‚ (handled here)  â”‚   â”‚ 6. Envoyer via MCP      â”‚
â”‚                 â”‚   â”‚                         â”‚
â”‚                 â”‚   â”‚ 7. Redis: marquer       â”‚
â”‚                 â”‚   â”‚    traitÃ© (TTL 24h)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                         â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Merge Toutes Branches â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Release LLM Lock      â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Consolider RÃ©sultats  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Log PostgreSQL        â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Temps cible** : 
- Branche Agent : < 90 secondes (ticket simple)
- Branche DIAG : < 30 secondes (analyse code)

**MCP utilisÃ©s** : GLPI, Active Directory, MySecret

---

### 5.3 ğŸ¥ WIDIP_Health_Check_GLPI_v2

**ID** : `yNJ1g9IKO2ZSQZ2M`  
**RÃ´le** : Surveillance continue de la disponibilitÃ© de l'API GLPI.

**DÃ©clenchement** : Cron (toutes les 30 secondes).

**Flux** :
```
Cron trigger (30s)
    â†“
Ping GLPI API: /apirest.php/initSession
    â†“
Analyze Health Response
    â†“
Redis: Update "glpi_health_status" (TTL 60s)
    â†“
Si DOWN:
    - Redis: Check "glpi_down_alert_sent"
    - Si pas encore notifiÃ© â†’ PrÃ©parer alerte
    - Redis: Set "glpi_down_alert_sent" (TTL 300s)
    â†“
Si UP (et Ã©tait DOWN):
    - Prepare Recovery Alert
    - Redis: Delete "glpi_down_alert_sent"
```

**Objectif** : Circuit breaker pour Ã©viter les tentatives sur GLPI en panne.

---

### 5.4 ğŸ”§ WIDIP_Redis_Helper_v2.2

**ID** : `aCuwZ3jJb1c2dMVY`  
**RÃ´le** : Service centralisÃ© pour toutes les opÃ©rations Redis.

**DÃ©clenchement** : 
- Execute Sub-Workflow (interne)
- Webhook POST `/redis-helper` (externe)

**OpÃ©rations supportÃ©es** :
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ACTION     â”‚  DESCRIPTION                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  get        â”‚  RÃ©cupÃ©rer une valeur                              â”‚
â”‚  set        â”‚  Stocker une valeur avec TTL optionnel             â”‚
â”‚  delete     â”‚  Supprimer une clÃ©                                 â”‚
â”‚  setnx      â”‚  Set if Not eXists (pour mutex)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. SystÃ¨me MCP : les outils des agents

### 6.1 Vue d'ensemble

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   SYSTÃˆME MCP v6 - 5 OUTILS                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  1. ğŸ“Š MCP OBSERVIUM (QMnaB7g1DpUfN9rK)                        â”‚
â”‚     â†’ RÃ©cupÃ©ration infos rÃ©seau (devices, ports, historique)   â”‚
â”‚                                                                 â”‚
â”‚  2. ğŸ« MCP GLPI v7 (c9sDkkS8stHEdliP)                          â”‚
â”‚     â†’ Gestion tickets + comptes + emails + followups           â”‚
â”‚                                                                 â”‚
â”‚  3. ğŸ‘¤ MCP ACTIVE DIRECTORY v2 (2tSBUs69Kn3NYxxT)              â”‚
â”‚     â†’ Gestion complÃ¨te comptes utilisateurs Windows            â”‚
â”‚                                                                 â”‚
â”‚  4. ğŸ” MCP MYSECRET v1 (geNUXjUljodz4CPG)                      â”‚
â”‚     â†’ GÃ©nÃ©ration liens temporaires sÃ©curisÃ©s                   â”‚
â”‚                                                                 â”‚
â”‚  5. ğŸ”— MCP SERVER (5gXkLvxfoj5i3wew)                           â”‚
â”‚     â†’ Hub central des MCP Triggers SSE                         â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 ğŸ“Š MCP Observium

**ID** : `QMnaB7g1DpUfN9rK`  
**Endpoint** : `http://0.0.0.0:5678/mcp-test/mcp-observium/sse`

| OpÃ©ration | Description |
|-----------|-------------|
| `get_device_status` | Ã‰tat complet d'un device (up/down, uptime, location) |
| `get_device_metrics` | MÃ©triques dÃ©taillÃ©es + ports |
| `get_device_alerts` | Alertes actives sur un device |
| `get_device_history` | Historique incidents (X derniÃ¨res heures) |

### 6.3 ğŸ« MCP GLPI v7

**ID** : `c9sDkkS8stHEdliP`  
**Endpoint** : `http://0.0.0.0:5678/mcp-test/mcp-glpi-server/sse`

| OpÃ©ration | Description |
|-----------|-------------|
| `search_client` | Recherche client par nom/email/tÃ©lÃ©phone |
| `create_ticket` | CrÃ©ation nouveau ticket |
| `get_ticket_status` | Statut d'un ticket |
| `get_ticket_details` | DÃ©tails complets d'un ticket |
| `add_ticket_followup` | Ajouter un suivi (public ou privÃ©) |
| `search_new_tickets` | Recherche tickets rÃ©cents |
| `update_ticket_status` | Mise Ã  jour statut |
| `close_ticket` | ClÃ´turer avec solution |
| `create_glpi_user` | CrÃ©er utilisateur GLPI |
| `get_glpi_user` | Infos utilisateur GLPI |
| `update_glpi_user` | Modifier utilisateur |
| `disable_glpi_user` | DÃ©sactiver utilisateur |

### 6.4 ğŸ‘¤ MCP Active Directory v2

**ID** : `2tSBUs69Kn3NYxxT`  
**Endpoint** : `http://0.0.0.0:5678/mcp-test/mcp-ad/sse`

| OpÃ©ration | Description |
|-----------|-------------|
| `check_user` | VÃ©rifier existence utilisateur |
| `get_user_info` | Infos complÃ¨tes utilisateur AD |
| `reset_password` | RÃ©initialiser mot de passe |
| `unlock_account` | DÃ©bloquer compte verrouillÃ© |
| `create_user` | CrÃ©er nouvel utilisateur |
| `disable_account` | DÃ©sactiver compte |
| `enable_account` | RÃ©activer compte |
| `move_to_ou` | DÃ©placer vers une autre OU |
| `copy_groups_from` | Copier groupes depuis un rÃ©fÃ©rent |

### 6.5 ğŸ” MCP MySecret v1

**ID** : `geNUXjUljodz4CPG`  
**Endpoint** : `http://0.0.0.0:5678/mcp-test/mcp-mysecret/sse`

| OpÃ©ration | Description |
|-----------|-------------|
| `create_secret` | CrÃ©er lien temporaire sÃ©curisÃ© (expire_days, expire_views) |

---

## 7. Redis : mÃ©moire partagÃ©e et synchronisation

### 7.1 ClÃ©s Redis utilisÃ©es

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           CLÃ‰S REDIS v6                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  ğŸ”’ MUTEX / SYNCHRONISATION                                                 â”‚
â”‚  â”œâ”€ llm_mutex                    â”‚ TTL 120-180s â”‚ Lock accÃ¨s Ollama        â”‚
â”‚                                                                             â”‚
â”‚  ğŸ¥ HEALTH CHECK / CIRCUIT BREAKER                                          â”‚
â”‚  â”œâ”€ glpi_health_status           â”‚ TTL 60s      â”‚ ok | degraded | down     â”‚
â”‚  â”œâ”€ glpi_down_alert_sent         â”‚ TTL 300s     â”‚ Flag anti-spam alertes   â”‚
â”‚                                                                             â”‚
â”‚  ğŸ“Š CACHE OBSERVIUM                                                         â”‚
â”‚  â”œâ”€ observium_diag_{device}_{date} â”‚ TTL 1200s  â”‚ Cache diagnostic device  â”‚
â”‚                                                                             â”‚
â”‚  ğŸ” ANTI-DOUBLON DIAG (NOUVEAU v6)                                          â”‚
â”‚  â”œâ”€ diag_processed_{followup_id} â”‚ TTL 86400s   â”‚ DIAG dÃ©jÃ  traitÃ©         â”‚
â”‚  â”‚   Valeur: {"processed_at": "...", "responsibility": "fai", "ticket_id": 123}
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2 Patterns utilisÃ©s

**1. Mutex LLM (Polling avec SETNX)**
```javascript
// Acquire Lock
while (!acquired && elapsed < maxWait) {
  response = await httpRequest({
    url: '/webhook/redis-helper',
    body: { action: 'setnx', key: 'llm_mutex', value: lockId, ttl: 180 }
  });
  if (response.success) acquired = true;
  else await sleep(500);
}

// Release Lock
await httpRequest({
  url: '/webhook/redis-helper',
  body: { action: 'delete', key: 'llm_mutex' }
});
```

**2. Circuit Breaker GLPI**
```javascript
// Check Health avant appel GLPI
const health = await redisHelper({ action: 'get', key: 'glpi_health_status' });
if (health.value === 'down') {
  // Mode dÃ©gradÃ© - skip GLPI calls
  return { degraded_mode: true };
}
```

**3. Anti-doublon DIAG**
```javascript
// Avant de traiter un code DIAG
const existing = await redisHelper({ 
  action: 'get', 
  key: `diag_processed_${followup_id}` 
});
if (existing.value) {
  // DÃ©jÃ  traitÃ©, ignorer
  return;
}

// AprÃ¨s traitement
await redisHelper({
  action: 'set',
  key: `diag_processed_${followup_id}`,
  value: JSON.stringify({ processed_at: now, responsibility, ticket_id }),
  ttl: 86400  // 24h
});
```

---

## 8. Exemple complet de bout en bout

### 8.1 ScÃ©nario : Panne rÃ©seau EHPAD Les Oliviers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SCÃ‰NARIO COMPLET - De l'alerte Observium au diagnostic automatique         â”‚
â”‚  Client: EHPAD Les Oliviers | Device: RT-OLIVIERS-01 | IP: 10.138.12.1     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

#### Ã‰TAPE 1 : Alerte Observium (T+0s)

```
ğŸ“¡ OBSERVIUM dÃ©tecte que RT-OLIVIERS-01 ne rÃ©pond plus au ping

Webhook envoyÃ© Ã  n8n:
POST /webhook/widip-alertes
{
  "device_name": "RT-OLIVIERS-01",
  "ip_address": "10.138.12.1",
  "alert_type": "ping_down",
  "status": "critical",
  "message": "Device is not responding to ICMP ping",
  "downtime_minutes": 5
}
```

---

#### Ã‰TAPE 2 : Proactif v9 - Traitement initial (T+2s)

```
ğŸš¨ PROACTIF v9 reÃ§oit l'alerte

1. Parse + Tracking ID: ALT-2025-1733748123-OLI7B2
2. Pre-Filter: downtime > 5min âœ“, pas en maintenance âœ“ â†’ PASS
3. Redis: Cache check â†’ pas de diagnostic rÃ©cent
4. Redis: GLPI Health â†’ OK
5. Acquire LLM Lock â†’ success (waited 0ms)
```

---

#### Ã‰TAPE 3 : Agent Sentinel v9 - Diagnostic (T+5s Ã  T+25s)

```
ğŸ¤– AGENT SENTINEL v9 dÃ©marre

Appels MCP:
  1. search_client("OLIVIERS") 
     â†’ client_id: "CLI-OLI-042", email: "direction@ehpad-oliviers.fr"
  
  2. get_device_info("RT-OLIVIERS-01")
     â†’ status: down, last_seen: 5min ago, type: router
  
  3. get_device_history("RT-OLIVIERS-01", 24)
     â†’ 0 incidents derniÃ¨res 24h, uptime Ã©tait 99.9%

ANALYSE:
  - Device client (pas Ã©quipement WIDIP)
  - Tout le site semble down (1 seul device client visible)
  - Pas d'historique de problÃ¨mes
  - Impossible de confirmer FAI vs Local sans tests client

OUTPUT JSON:
{
  "diagnostic_success": true,
  "tracking_id": "ALT-2025-1733748123-OLI7B2",
  "device_name": "RT-OLIVIERS-01",
  "client_name": "EHPAD Les Oliviers",
  "client_email": "direction@ehpad-oliviers.fr",
  "responsibility": "fai_probable",
  "confidence": 65,
  "besoin_diagnostic_client": true,
  "diagnosis": "Le routeur client ne rÃ©pond plus. Sans accÃ¨s au rÃ©seau local, 
               impossible de dÃ©terminer si c'est un problÃ¨me FAI ou local.",
  "reasoning": "Device client down, pas de donnÃ©es Phibee disponibles, 
               besoin de tests depuis le site.",
  "severity": "high",
  "recommended_action": "Demander au client de lancer l'outil diagnostic"
}
```

---

#### Ã‰TAPE 4 : PrÃ©paration email outil (T+26s)

```
ğŸ“§ PRÃ‰PARER EMAIL OUTIL DIAGNOSTIC

Confiance 65% < 80% â†’ besoin_diagnostic_client: true

Email prÃ©parÃ©:
  Subject: "[WIDIP] ProblÃ¨me rÃ©seau dÃ©tectÃ© - Action requise"
  To: direction@ehpad-oliviers.fr
  Body: 
    Bonjour,
    
    Nous avons dÃ©tectÃ© un problÃ¨me de connectivitÃ© sur votre site.
    
    Pour nous aider Ã  identifier la cause rapidement, merci de :
    1. TÃ©lÃ©charger l'outil diagnostic : https://diagnostic.widip.fr/DiagnosticWIDIP.exe
    2. L'exÃ©cuter sur un poste du rÃ©seau
    3. Copier le code gÃ©nÃ©rÃ© dans votre ticket GLPI
    
    Cordialement,
    L'Ã©quipe WIDIP
```

---

#### Ã‰TAPE 5 : Agent Notificateur v9 - Actions (T+27s Ã  T+45s)

```
ğŸ¤– AGENT NOTIFICATEUR v9 dÃ©marre

Appels MCP:
  1. create_ticket({
       title: "ğŸ”´ Panne rÃ©seau - RT-OLIVIERS-01 - EHPAD Les Oliviers",
       description: "[Diagnostic auto]\nDevice: RT-OLIVIERS-01\n
                     ResponsabilitÃ© probable: FAI (65%)\n
                     En attente diagnostic client...",
       urgency: 4,
       client_id: "CLI-OLI-042"
     })
     â†’ ticket_id: 48291
  
  2. send_email({
       ticket_id: 48291,
       to: "direction@ehpad-oliviers.fr",
       subject: "[WIDIP] ProblÃ¨me rÃ©seau dÃ©tectÃ© - Action requise",
       body: [email HTML avec lien outil]
     })
     â†’ sent: true

OUTPUT:
{
  "success": true,
  "ticket": { "created": true, "id": 48291 },
  "notifications": { 
    "client_emailed": true,
    "email_type": "diagnostic_tool_request"
  }
}
```

```
âœ… PROACTIF v9 TERMINÃ‰ - T+48s
   Ticket #48291 crÃ©Ã©
   Email avec demande outil envoyÃ©
   Redis: Cache sauvegardÃ©, Lock libÃ©rÃ©
```

---

#### Ã‰TAPE 6 : Client utilise l'outil (T+15min)

```
ğŸ‘¤ CLIENT - EHPAD Les Oliviers

Le secrÃ©tariat reÃ§oit l'email et tÃ©lÃ©charge DiagnosticWIDIP.exe

L'outil s'exÃ©cute et affiche:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ” Diagnostic RÃ©seau WIDIP                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ğŸ“¡ INFORMATIONS RÃ‰SEAU                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                          â”‚
â”‚    Carte rÃ©seau : Ethernet                                      â”‚
â”‚    Adresse IP   : 10.138.12.45                                  â”‚
â”‚    Passerelle   : 10.138.12.1                                   â”‚
â”‚    DNS          : 10.138.12.1, 8.8.8.8                          â”‚
â”‚                                                                 â”‚
â”‚  ğŸ§ª TESTS DE CONNECTIVITÃ‰                                       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                          â”‚
â”‚    ğŸ”Œ Passerelle (10.138.12.1)  : âœ… OK (2ms)                   â”‚
â”‚    ğŸŒ Internet (8.8.8.8)        : âŒ Ã‰CHEC - Timeout            â”‚
â”‚    ğŸ”¤ DNS (google.com)          : âŒ Ã‰CHEC - RÃ©solution         â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“Š ANALYSE                                                     â”‚
â”‚  â†’ ProblÃ¨me probable FAI (pas d'Internet)                       â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  #DIAG gw=ok int=fail dns=fail ping=2ms                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚        [ğŸ“‹ Copier le code]  [â–¶ Relancer]                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Le client copie le code et le colle dans un followup du ticket #48291:

"Bonjour, voici le rÃ©sultat du diagnostic:
#DIAG gw=ok int=fail dns=fail ping=2ms"
```

---

#### Ã‰TAPE 7 : Assist v6.1 dÃ©tecte le code DIAG (T+18min)

```
ğŸ« ASSIST v6.1 - Polling 3min

BRANCHE DIAG dÃ©tecte:
  1. Chercher Followups #DIAG â†’ TrouvÃ© dans ticket #48291
     followup_id: 892341
     content: "...#DIAG gw=ok int=fail dns=fail ping=2ms"
  
  2. Redis: dÃ©jÃ  traitÃ© ? â†’ Non (clÃ© n'existe pas)
  
  3. Parser Format DIAG:
     {
       gw: "ok",
       int: "fail", 
       dns: "fail",
       ping: "2"
     }
  
  4. Analyser ResponsabilitÃ©:
     - gw=ok â†’ RÃ©seau local fonctionne âœ“
     - int=fail â†’ Pas d'Internet âœ—
     - dns=fail â†’ Pas de DNS (consÃ©quence de int=fail)
     
     â†’ RÃˆGLE APPLIQUÃ‰E: gw=ok + int=fail â†’ FAI
     
     {
       responsibility: "fai",
       responsibility_label: "FAI (Fournisseur d'AccÃ¨s Internet)",
       confidence: 85,
       explanation: "Le rÃ©seau local fonctionne (passerelle accessible) 
                     mais la connexion Internet est coupÃ©e. 
                     Cela indique trÃ¨s probablement une panne du cÃ´tÃ© du FAI.",
       recommended_action: "Contacter le FAI pour signaler la panne.",
       severity: "high"
     }
```

---

#### Ã‰TAPE 8 : Followup automatique ajoutÃ© (T+18min 30s)

```
ğŸ“ FOLLOWUP TECHNIQUE AJOUTÃ‰ AU TICKET #48291

ğŸŒ **ANALYSE DIAGNOSTIC AUTOMATIQUE**

**ResponsabilitÃ© identifiÃ©e:** FAI (Fournisseur d'AccÃ¨s Internet)
**Confiance:** 85%
**SÃ©vÃ©ritÃ©:** HIGH

---

**ğŸ“Š RÃ©sultats du diagnostic client:**
- Passerelle (gateway): ok âœ…
- Internet: fail âŒ
- DNS: fail âŒ
- Latence: 2ms

---

**ğŸ” Analyse:**
Le rÃ©seau local fonctionne (passerelle accessible) mais la connexion 
Internet est coupÃ©e. Cela indique trÃ¨s probablement une panne du cÃ´tÃ© du FAI.

**ğŸ’¡ Action recommandÃ©e:**
Contacter le FAI pour signaler la panne. VÃ©rifier si d'autres clients 
du mÃªme FAI sont impactÃ©s.

---
_Analyse automatique WIDIP v6 - 09/12/2025 15:18_
```

```
âœ… Redis: Marquer traitÃ©
   ClÃ©: diag_processed_892341
   Valeur: {"processed_at": "2025-12-09T15:18:30Z", "responsibility": "fai", "ticket_id": 48291}
   TTL: 86400s (24h)
```

---

#### RÃ‰SUMÃ‰ DU FLUX COMPLET

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TIMELINE COMPLÃˆTE                                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  T+0s      â”‚ Observium dÃ©tecte panne RT-OLIVIERS-01                        â”‚
â”‚  T+2s      â”‚ Proactif v9 reÃ§oit webhook                                    â”‚
â”‚  T+25s     â”‚ Agent Sentinel termine diagnostic (confiance 65%)             â”‚
â”‚  T+45s     â”‚ Ticket #48291 crÃ©Ã© + email outil envoyÃ©                       â”‚
â”‚  T+15min   â”‚ Client exÃ©cute DiagnosticWIDIP.exe                            â”‚
â”‚  T+16min   â”‚ Client colle #DIAG gw=ok int=fail dns=fail ping=2ms          â”‚
â”‚  T+18min   â”‚ Assist v6.1 dÃ©tecte et analyse le code                        â”‚
â”‚  T+18min30sâ”‚ Followup technique ajoutÃ© â†’ ResponsabilitÃ© FAI (85%)          â”‚
â”‚                                                                             â”‚
â”‚  RÃ‰SULTAT: Diagnostic automatique complet en ~18 minutes                   â”‚
â”‚            Sans intervention humaine pour l'analyse                         â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 9. Outil DiagnosticWIDIP

### 9.1 Description

Outil Windows lÃ©ger permettant aux clients de gÃ©nÃ©rer un code diagnostic standardisÃ© Ã  coller dans leur ticket GLPI.

### 9.2 Versions disponibles

| Version | Format | Taille | PrÃ©requis |
|---------|--------|--------|-----------|
| **PowerShell** (recommandÃ©e) | `.ps1` + `.bat` | ~15 Ko | Windows 7+ |
| **Python compilÃ©** | `.exe` | ~10-15 Mo | Aucun |

### 9.3 Tests effectuÃ©s

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TESTS DIAGNOSTIC                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  1. ğŸ”Œ Test Passerelle (Gateway)                                â”‚
â”‚     ping vers adresse passerelle dÃ©tectÃ©e via ipconfig          â”‚
â”‚     RÃ©sultat: ok (Xms) | fail                                   â”‚
â”‚                                                                 â”‚
â”‚  2. ğŸŒ Test Internet                                            â”‚
â”‚     ping vers 8.8.8.8 (Google DNS)                              â”‚
â”‚     RÃ©sultat: ok (Xms) | fail                                   â”‚
â”‚                                                                 â”‚
â”‚  3. ğŸ”¤ Test DNS                                                 â”‚
â”‚     RÃ©solution de www.google.com                                â”‚
â”‚     RÃ©sultat: ok (IP rÃ©solue) | fail                            â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.4 Format de sortie

```
#DIAG gw=ok int=fail dns=fail ping=2ms
```

### 9.5 HÃ©bergement recommandÃ©

```
https://diagnostic.widip.fr/
â”œâ”€â”€ DiagnosticWIDIP.bat      (lanceur)
â”œâ”€â”€ DiagnosticWIDIP.ps1      (script PowerShell)
â””â”€â”€ DiagnosticWIDIP.exe      (optionnel, version compilÃ©e)
```

---

## 10. Credentials et sÃ©curitÃ©

### 10.1 Credentials n8n requises

| Credential | Type | Usage |
|------------|------|-------|
| `WIDIP Redis` | Redis | Connexion Redis local |
| `WIDIP GLPI` | HTTP Multi-Headers | API GLPI (App-Token + Session) |
| `WIDIP Observium` | HTTP Header Auth | API Observium |
| `WIDIP AD SSH` | SSH | Connexion serveur AD pour PowerShell |
| `WIDIP MySecret` | Variable env | URL API MySecret |

### 10.2 Variables d'environnement

```bash
GLPI_API_URL=http://glpi.widip.local
OBSERVIUM_URL=http://observium.widip.local
MYSECRET_API_URL=https://mysecret.widip.fr
OLLAMA_API_URL=http://10.238.110.30:11434
```

### 10.3 SÃ©curitÃ©

- **Sanitization** : Tous les inputs MCP AD sont sanitizÃ©s contre l'injection PowerShell
- **TTL Redis** : Toutes les clÃ©s sensibles ont un TTL pour Ã©viter la persistance
- **Followups privÃ©s** : Les analyses indÃ©terminÃ©es ou WIDIP sont marquÃ©es privÃ©es
- **Pas de donnÃ©es sensibles** : Le code DIAG ne contient que des rÃ©sultats de tests (ok/fail)

---

## 11. DÃ©ploiement et mÃ©triques

### 11.1 Ordre de dÃ©ploiement

```
1. WIDIP_Redis_Helper_v2.2      (infrastructure)
2. WIDIP_Health_Check_GLPI_v2   (monitoring)
3. WIDIP_MCP_Server             (hub MCP)
4. WIDIP_MCP_* (tous)           (outils)
5. WIDIP_Proactif_Observium_v9  (alertes)
6. WIDIP_Assist_ticket_v6.1     (tickets)
```

### 11.2 MÃ©triques cibles v6

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          MÃ‰TRIQUES CIBLES v6                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  MÃ‰TRIQUE                  â”‚  CIBLE          â”‚  NOTES                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Latence Redis             â”‚  < 5 ms         â”‚  Sub-Workflow                 â”‚
â”‚  Latence Redis             â”‚  < 20 ms        â”‚  Via webhook                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Temps diagnostic Proactif â”‚  < 45 s         â”‚  Sentinel complet             â”‚
â”‚  Temps notif Proactif      â”‚  < 15 s         â”‚  Notificateur seul            â”‚
â”‚  Temps total Proactif      â”‚  < 60 s         â”‚  Alerte â†’ Ticket + Email      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Temps analyse DIAG        â”‚  < 30 s         â”‚  DÃ©tection â†’ Followup         â”‚
â”‚  Temps traitement Assist   â”‚  < 90 s         â”‚  Ticket simple                â”‚
â”‚  Temps reset password      â”‚  < 30 s         â”‚  AD + MySecret + Email        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  InfÃ©rence Qwen2.5:14b     â”‚  5-15 s         â”‚  GPU L40S                     â”‚
â”‚  Tokens/sec                â”‚  20-30 t/s      â”‚  GÃ©nÃ©ration                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Volume supportÃ©           â”‚  ~50 req/jour   â”‚  Sans file d'attente          â”‚
â”‚  Pic supportÃ©              â”‚  ~150 req/jour  â”‚  Avec attente mutex           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 12. Changelog v5 â†’ v6

### 12.1 NouveautÃ©s majeures

| Composant | v5 | v6 |
|-----------|-----|-----|
| **Proactif** | v8 - Diagnostic Observium seul | v9 - Email outil diagnostic si confiance < 80% |
| **Assist** | v4 - Traitement tickets | v6.1 - Double branche (Agent + DIAG) |
| **Outil client** | âŒ Inexistant | âœ… DiagnosticWIDIP.exe |
| **Code DIAG** | âŒ Inexistant | âœ… Format standardisÃ© #DIAG |
| **Redis clÃ©s** | 4 clÃ©s | 5 clÃ©s (+diag_processed_*) |

### 12.2 Nouveaux IDs workflows

| Workflow | Ancien ID (v5) | Nouveau ID (v6) |
|----------|----------------|-----------------|
| Proactif | zBYBmEHgXDT2nWHJ | FvooGzIxbHh7PJxY |
| Assist | 8muMSPoq5CW8oHGq | JKlFZ6UyMLGdIquP |
| MCP GLPI | juHWzwO4WgW9LX0B | c9sDkkS8stHEdliP |

### 12.3 Architecture prÃ©servÃ©e

- âœ… Redis Helper v2.2 (inchangÃ©)
- âœ… Health Check GLPI v2 (inchangÃ©)
- âœ… MCP Observium (inchangÃ©)
- âœ… MCP AD v2 (inchangÃ©)
- âœ… MCP MySecret v1 (inchangÃ©)
- âœ… Pattern Mutex LLM (inchangÃ©)
- âœ… Circuit Breaker GLPI (inchangÃ©)

---

## ğŸ“ Glossaire

| Terme | DÃ©finition |
|-------|------------|
| **MCP** | Model Context Protocol - standard permettant aux LLM d'utiliser des outils |
| **LLM** | Large Language Model - modÃ¨le de langage (Qwen2.5, etc.) |
| **Ollama** | Serveur local pour exÃ©cuter des LLM |
| **Mutex** | Verrou d'exclusion mutuelle (un seul accÃ¨s Ã  la fois) |
| **Circuit Breaker** | Pattern de protection contre les pannes en cascade |
| **GLPI** | Gestionnaire Libre de Parc Informatique (ticketing + emails) |
| **Observium** | Plateforme de monitoring rÃ©seau |
| **TTL** | Time To Live - durÃ©e de vie d'une donnÃ©e en cache |
| **SETNX** | SET if Not eXists - opÃ©ration Redis atomique pour les mutex |
| **DIAG** | Code diagnostic standardisÃ© gÃ©nÃ©rÃ© par l'outil client |
| **Followup** | Suivi/commentaire ajoutÃ© Ã  un ticket GLPI |
| **SSE** | Server-Sent Events - protocole de communication MCP |

---

## ğŸ“Š SchÃ©ma d'architecture dÃ©taillÃ©

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                     ARCHITECTURE DÃ‰TAILLÃ‰E WIDIP v6                            â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â•‘
â•‘  â”‚                        SOURCES EXTERNES                              â”‚    â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â•‘
â•‘               â”‚                     â”‚                                         â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘
â•‘  â”‚   OBSERVIUM         â”‚  â”‚      GLPI        â”‚  â”‚   CLIENT              â”‚   â•‘
â•‘  â”‚  (Alertes rÃ©seau)   â”‚  â”‚(Tickets+Followups)â”‚  â”‚ (DiagnosticWIDIP.exe) â”‚   â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘
â•‘               â”‚ Webhooks            â”‚ API                    â”‚ #DIAG code    â•‘
â•‘               â–¼                     â–¼                        â–¼               â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â•‘
â•‘  â”‚                          n8n - VM1                                     â”‚ â•‘
â•‘  â”‚                                                                        â”‚ â•‘
â•‘  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚ â•‘
â•‘  â”‚  â”‚ğŸ¥Health Check â”‚              â”‚ğŸ”§ Redis       â”‚                     â”‚ â•‘
â•‘  â”‚  â”‚   GLPI v2     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Helper v2.2   â”‚                     â”‚ â•‘
â•‘  â”‚  â”‚(yNJ1g9I..)    â”‚              â”‚(aCuwZ3jJ...)  â”‚                     â”‚ â•‘
â•‘  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚ â•‘
â•‘  â”‚          â”‚                              â–²                              â”‚ â•‘
â•‘  â”‚          â”‚ Update health                â”‚ Cache, Mutex, Anti-doublon  â”‚ â•‘
â•‘  â”‚          â–¼                              â”‚                              â”‚ â•‘
â•‘  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚ â•‘
â•‘  â”‚  â”‚                  Redis DB                                â”‚          â”‚ â•‘
â•‘  â”‚  â”‚  â€¢ glpi_health_status        (TTL 60s)                   â”‚          â”‚ â•‘
â•‘  â”‚  â”‚  â€¢ llm_mutex                 (TTL 120-180s)              â”‚          â”‚ â•‘
â•‘  â”‚  â”‚  â€¢ observium_diag_*          (TTL 1200s)                 â”‚          â”‚ â•‘
â•‘  â”‚  â”‚  â€¢ diag_processed_*          (TTL 86400s) [NEW v6]       â”‚          â”‚ â•‘
â•‘  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚ â•‘
â•‘  â”‚                     â–²                                                  â”‚ â•‘
â•‘  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚ â•‘
â•‘  â”‚  â”‚                                     â”‚                              â”‚ â•‘
â•‘  â”‚  â–¼                                     â–¼                              â”‚ â•‘
â•‘  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚ â•‘
â•‘  â”‚  â”‚ğŸš¨ PROACTIF v9    â”‚       â”‚ğŸ« ASSIST v6.1                  â”‚       â”‚ â•‘
â•‘  â”‚  â”‚(FvooGzIxb...)    â”‚       â”‚(JKlFZ6UyM...)                  â”‚       â”‚ â•‘
â•‘  â”‚  â”‚                  â”‚       â”‚                                â”‚       â”‚ â•‘
â•‘  â”‚  â”‚ 2 Agents:        â”‚       â”‚ 2 Branches parallÃ¨les:         â”‚       â”‚ â•‘
â•‘  â”‚  â”‚ â€¢ Sentinel v9    â”‚       â”‚ â€¢ Agent Support WIDIP          â”‚       â”‚ â•‘
â•‘  â”‚  â”‚ â€¢ Notificateur v9â”‚       â”‚ â€¢ Branche DIAG [NEW v6]        â”‚       â”‚ â•‘
â•‘  â”‚  â”‚                  â”‚       â”‚                                â”‚       â”‚ â•‘
â•‘  â”‚  â”‚ Si confiance<80%:â”‚       â”‚ DIAG Branch:                   â”‚       â”‚ â•‘
â•‘  â”‚  â”‚ â†’ Email outil    â”‚       â”‚ 1. DÃ©tecte #DIAG               â”‚       â”‚ â•‘
â•‘  â”‚  â”‚   diagnostic     â”‚       â”‚ 2. Parse format                â”‚       â”‚ â•‘
â•‘  â”‚  â”‚                  â”‚       â”‚ 3. Analyse responsabilitÃ©      â”‚       â”‚ â•‘
â•‘  â”‚  â”‚                  â”‚       â”‚ 4. Ajoute followup technique   â”‚       â”‚ â•‘
â•‘  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚ â•‘
â•‘  â”‚           â”‚                          â”‚                               â”‚ â•‘
â•‘  â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚ â•‘
â•‘  â”‚                      â–¼                                                â”‚ â•‘
â•‘  â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚ â•‘
â•‘  â”‚           â”‚   MCP WORKFLOWS (5 outils)     â”‚                         â”‚ â•‘
â•‘  â”‚           â”‚                                â”‚                         â”‚ â•‘
â•‘  â”‚           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                         â”‚ â•‘
â•‘  â”‚           â”‚  â”‚  ğŸ“Š MCP Observium        â”‚  â”‚                         â”‚ â•‘
â•‘  â”‚           â”‚  â”‚  (QMnaB7g1DpUfN9rK)     â”‚  â”‚                         â”‚ â•‘
â•‘  â”‚           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                         â”‚ â•‘
â•‘  â”‚           â”‚                                â”‚                         â”‚ â•‘
â•‘  â”‚           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                         â”‚ â•‘
â•‘  â”‚           â”‚  â”‚  ğŸ« MCP GLPI v7          â”‚  â”‚                         â”‚ â•‘
â•‘  â”‚           â”‚  â”‚  (c9sDkkS8stHEdliP)     â”‚  â”‚                         â”‚ â•‘
â•‘  â”‚           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                         â”‚ â•‘
â•‘  â”‚           â”‚                                â”‚                         â”‚ â•‘
â•‘  â”‚           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                         â”‚ â•‘
â•‘  â”‚           â”‚  â”‚  ğŸ‘¤ MCP AD v2            â”‚  â”‚                         â”‚ â•‘
â•‘  â”‚           â”‚  â”‚  (2tSBUs69Kn3NYxxT)     â”‚  â”‚                         â”‚ â•‘
â•‘  â”‚           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                         â”‚ â•‘
â•‘  â”‚           â”‚                                â”‚                         â”‚ â•‘
â•‘  â”‚           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                         â”‚ â•‘
â•‘  â”‚           â”‚  â”‚  ğŸ” MCP MySecret v1      â”‚  â”‚                         â”‚ â•‘
â•‘  â”‚           â”‚  â”‚  (geNUXjUljodz4CPG)     â”‚  â”‚                         â”‚ â•‘
â•‘  â”‚           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                         â”‚ â•‘
â•‘  â”‚           â”‚                                â”‚                         â”‚ â•‘
â•‘  â”‚           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                         â”‚ â•‘
â•‘  â”‚           â”‚  â”‚  ğŸ”— MCP Server (Hub)     â”‚  â”‚                         â”‚ â•‘
â•‘  â”‚           â”‚  â”‚  (5gXkLvxfoj5i3wew)     â”‚  â”‚                         â”‚ â•‘
â•‘  â”‚           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                         â”‚ â•‘
â•‘  â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚ â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â•‘
â•‘                           â”‚                                               â•‘
â•‘                           â–¼                                               â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â•‘
â•‘  â”‚                    ğŸ¤– OLLAMA - VM2                          â”‚         â•‘
â•‘  â”‚  ModÃ¨le: Qwen2.5:14b (14B params)                          â”‚         â•‘
â•‘  â”‚  GPU: NVIDIA L40S (48GB VRAM)                               â”‚         â•‘
â•‘  â”‚  Performance: 20-30 tokens/sec                              â”‚         â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â•‘
â•‘                           â”‚                                               â•‘
â•‘              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â•‘
â•‘              â–¼            â–¼            â–¼                                  â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â•‘
â•‘  â”‚ Observium APIâ”‚ â”‚   GLPI API   â”‚ â”‚ Windows AD   â”‚                     â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â•‘
â•‘                                                                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

**Document crÃ©Ã© le 9 dÃ©cembre 2025**  
**Architecture v6**
---
> **AVIS DE PROPRIÃ‰TÃ‰ ET CONFIDENTIALITÃ‰**
> Ce document, ainsi que l'architecture technique, les workflows (n8n), les scripts et les mÃ©thodologies (notamment la "Boucle de diagnostic client") qu'il dÃ©crit, sont la propriÃ©tÃ© exclusive de **WIDIP** et de son auteur **RIPOUTEAU Maxime**.
>
> Toute reproduction, distribution, modification ou utilisation non autorisÃ©e de tout ou partie de ce systÃ¨me sans accord Ã©crit prÃ©alable est strictement interdite. Ces informations sont confidentielles et protÃ©gÃ©es par le Code de la propriÃ©tÃ© intellectuelle.
>
> Â© WIDIP 2025 - Tous droits rÃ©servÃ©s.
---